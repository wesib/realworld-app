import{c as s}from"../js/core/main.9847b445.js";import{_ as e}from"../js/helpers.e1623395.js";import{v as r,m as t,b as o,u as a,I as i}from"../js/frontmeans/input-aspects.552a677b.js";import{i as m,S as p,O as j,H as c,N as n,j as f,d}from"../js/wesib/generic.36801613.js";import{C as u}from"../js/wesib/wesib.1ebc214d.js";import{C as l}from"../js/core.10059585.js";import{a as b}from"../js/core/api.e687a690.js";import{b as h}from"../js/core/auth.d58e7713.js";import{C as v,s as g}from"../js/core/forms.c0daa8d3.js";import{U as y}from"../js/user-email.component.923fb1b8.js";import{U as w}from"../js/user-name.component.20a5f8a0.js";import{U as S}from"../js/user-password.component.c36a7e3c.js";import"../js/core/layout.f26065db.js";import"../js/frontmeans/namespace-aliaser.9467f14d.js";import"../js/proc7ts/fun-events.0c993baf.js";import"../js/proc7ts/primitives.7b24aae7.js";import"../js/proc7ts/supply.9762ee6d.js";import"../js/core/loader.430f4736.js";import"../js/proc7ts/workbench.dbc8e30b.js";import"../js/proc7ts/context-values.5140e67e.js";import"../js/proc7ts/push-iterator.ccd51d52.js";import"../js/proc7ts/call-thru.f4f68410.js";import"../js/proc7ts/delta-set.d5d9e832.js";import"../js/frontmeans/dom-events.ba8d072f.js";import"../js/frontmeans/render-scheduler.6f331202.js";import"../js/hatsy/http-header-value.851567fb.js";import"../js/frontmeans/httongue.6b868a5b.js";let _=class{constructor(s){this._authService=s.get(h),this._navigation=s.get(n),s.whenSettled((({element:s})=>{this.form=f.by((s=>r({username:"",email:"",password:""},s)),(e=>t(s.querySelector("form"),e))),this.submitButton=g(s.querySelector("button"))}))}submit({control:s}){s.aspect(o).markEdited(),s.aspect(a).submit((s=>b(this._authService.register(s)))).then((()=>this._navigation.open("."))).catch((s=>{s instanceof i?console.error("Failed to register",...s.errors):console.error("Failed to register",s)}))}};e([m()],_.prototype,"form",void 0),e([p({form:{share:d,local:!0},name:""})],_.prototype,"submitButton",void 0),e([j()],_.prototype,"submit",null),_=e([u(["register",l],{feature:{needs:[v,y,w,S]}},c())],_),s.load(_);//# sourceMappingURL=main.531d52cf.js.map
