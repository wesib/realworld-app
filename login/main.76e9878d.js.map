{"version":3,"file":"main.76e9878d.js","sources":["../../src/pages/login/login-email.component.ts","../../src/pages/login/login-password.component.ts","../../src/pages/login/login.component.ts","../../src/pages/login/index.ts"],"sourcesContent":["import { SetInputName } from '@wesib/generic/input';\nimport { Component } from '@wesib/wesib';\nimport { inText, InValidation, requirePresent } from 'input-aspects';\nimport { Conduit__NS, UseConduitInput } from '../../common';\n\n@Component(\n    ['login-email', Conduit__NS],\n    UseConduitInput({\n      makeControl({ node, aspects }) {\n        return inText(node.element, { aspects })\n            .setup(InValidation, validation => validation.by(requirePresent()));\n      },\n    }),\n    SetInputName('email'),\n)\nexport class LoginEmailComponent {\n}\n","import { SetInputName } from '@wesib/generic/input';\nimport { Component } from '@wesib/wesib';\nimport { inText, InValidation, requirePresent } from 'input-aspects';\nimport { Conduit__NS, UseConduitInput } from '../../common';\n\n@Component(\n    ['login-password', Conduit__NS],\n    UseConduitInput({\n      makeControl({ node, aspects }) {\n        return inText(node.element, { aspects })\n            .setup(InValidation, validation => validation.by(requirePresent()));\n      },\n    }),\n    SetInputName('password'),\n)\nexport class LoginPasswordComponent {\n}\n","import { HandleNavLinks, Navigation } from '@wesib/generic';\nimport { InputToForm, OnSubmit } from '@wesib/generic/input';\nimport { Component, ComponentContext } from '@wesib/wesib';\nimport { InStatus, InSubmit, InSubmitError } from 'input-aspects';\nimport { apiSubmit, AuthService, Conduit__NS, FillConduitForm, LoginRequest } from '../../common';\nimport { LoginEmailComponent } from './login-email.component';\nimport { LoginPasswordComponent } from './login-password.component';\n\n@Component(\n    ['login', Conduit__NS],\n    {\n      feature: {\n        needs: [\n          LoginEmailComponent,\n          LoginPasswordComponent,\n        ],\n      },\n    },\n    FillConduitForm<LoginRequest>({\n      emptyModel: {\n        email: '',\n        password: '',\n      },\n    }),\n    HandleNavLinks(),\n)\nexport class LoginComponent {\n\n  private readonly _authService: AuthService;\n  private readonly _navigation: Navigation;\n\n  constructor(context: ComponentContext) {\n    this._authService = context.get(AuthService);\n    this._navigation = context.get(Navigation);\n  }\n\n  @OnSubmit()\n  submit({ control }: InputToForm<LoginRequest>): void {\n    control.aspect(InStatus).markEdited();\n    control.aspect(InSubmit)\n        .submit(request => apiSubmit(this._authService.login(request)))\n        .then(() => this._navigation.open('.'))\n        .catch(e => {\n          if (e instanceof InSubmitError) {\n            console.log('Failed to login', ...e.errors);\n          } else {\n            console.log('Failed to login', e);\n          }\n        });\n  }\n\n}\n","import { conduitContext } from '../../common';\nimport { LoginComponent } from './login.component';\n\nexport * from './login-email.component';\nexport * from './login-password.component';\n\nconduitContext.load(LoginComponent);\n"],"names":["LoginEmailComponent","Component","Conduit__NS","UseConduitInput","makeControl","node","aspects","inText","element","setup","InValidation","validation","by","requirePresent","SetInputName","LoginPasswordComponent","LoginComponent","[object Object]","context","this","_authService","get","AuthService","_navigation","Navigation","control","aspect","InStatus","markEdited","InSubmit","submit","request","apiSubmit","login","then","open","catch","e","InSubmitError","console","log","errors","__decorate","OnSubmit","feature","needs","FillConduitForm","emptyModel","email","password","HandleNavLinks","conduitContext","load"],"mappings":"uPAeaA,EAAb,QAAaA,KAVZC,EACG,CAAC,cAAeC,GAChBC,EAAgB,CACdC,YAAW,EAACC,KAAEA,EAAIC,QAAEA,KACXC,EAAOF,EAAKG,QAAS,CAAEF,QAAAA,IACzBG,MAAMC,EAAcC,GAAcA,EAAWC,GAAGC,QAGzDC,EAAa,WAEJd,OCAAe,EAAb,QAAaA,KAVZd,EACG,CAAC,iBAAkBC,GACnBC,EAAgB,CACdC,YAAW,EAACC,KAAEA,EAAIC,QAAEA,KACXC,EAAOF,EAAKG,QAAS,CAAEF,QAAAA,IACzBG,MAAMC,EAAcC,GAAcA,EAAWC,GAAGC,QAGzDC,EAAa,cAEJC,GCWb,IAAaC,EAAb,MAKEC,YAAYC,GACVC,KAAKC,aAAeF,EAAQG,IAAIC,GAChCH,KAAKI,YAAcL,EAAQG,IAAIG,GAIjCP,QAAOQ,QAAEA,IACPA,EAAQC,OAAOC,GAAUC,aACzBH,EAAQC,OAAOG,GACVC,OAAOC,GAAWC,EAAUb,KAAKC,aAAaa,MAAMF,KACpDG,KAAK,IAAMf,KAAKI,YAAYY,KAAK,MACjCC,MAAMC,IACDA,aAAaC,EACfC,QAAQC,IAAI,qBAAsBH,EAAEI,QAEpCF,QAAQC,IAAI,kBAAmBH,OATzCK,GADCC,gCAVU3B,KAlBZf,EACG,CAAC,QAASC,GACV,CACE0C,QAAS,CACPC,MAAO,CACL7C,EACAe,KAIN+B,EAA8B,CAC5BC,WAAY,CACVC,MAAO,GACPC,SAAU,MAGdC,MAESlC,GCpBbmC,EAAeC,KAAKpC"}