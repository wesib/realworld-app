import{a8 as s,af as a,ab as e,ag as t,a9 as o,ae as n,f as l,ah as d,G as r,ai as c,aj as m,ak as p,al as i,I as f,aa as u,am as b,a6 as g,w as j}from"../js/lib.b2c89f25.js";import{C as w,S as k,U as C,d as h,f as y,g as F,i as v}from"../js/wesib.62985baa.js";import{C as x,b as A,A as E,a as G,c as I}from"../js/common.e7f2daf1.js";let O=class{};O=s([w(["login-email",x],C({makeControl:({node:s,aspects:l})=>a(s.element,{aspects:l}).setup(e,s=>s.by(t())).setup(o,s=>{s.add(n()),s.add(A())})}),k("email"))],O);let S=class{};S=s([w(["login-password",x],C({makeControl:({node:s,aspects:l})=>a(s.element,{aspects:l}).setup(e,s=>s.by(t())).setup(o,s=>{s.add(n()),s.add(A())})}),k("password"))],S);let U=class{constructor(s){const a=s.get(y),e=s.get(E);s.whenOn(t=>{l({form:a.select("form",{all:!0,deep:!0}).first,button:a.select("button",{all:!0,deep:!0}).first,aspects:s.get(F)}).consume(({form:[a],button:[t],aspects:[l]})=>{if(!a)return;const w=j(),k=d({email:"",password:""}).setup(s=>r(s).needs(w)).setup(o,s=>s.add(n())).setup(c,s=>s.derive(m()));p(a.element,{form:k,aspects:l}).setup(o,s=>s.add(k.aspect(o))),t&&i(t.element,{form:k,aspects:l});const C=new f(a.element);return r(C).needs(k),C.on("submit").instead(()=>{k.aspect(u).markEdited(),k.aspect(b).submit(s=>G(e.login(s))).catch(s=>{s instanceof g?console.log("Failed to login",...s.errors):console.log("Failed to login",s)})}),v(s,k),w}).needs(t)})}};U=s([w(["login",x],h(),{feature:{needs:[O,S]}})],U),I.load(U);export{O as LoginEmailComponent,S as LoginPasswordComponent};//# sourceMappingURL=main.12156ace.js.map
