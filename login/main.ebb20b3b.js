import{a7 as s,ae as e,aa as a,af as t,a8 as o,ad as n,f as l,ag as c,$ as r,ac as d,ah as i,ai as m,G as p,a5 as u,w as f}from"../js/lib.d76a949a.js";import{C as g,S as b,U as w,d as j,f as v,g as C,i as h}from"../js/wesib.858e5021.js";import{C as k,b as y,A as F,a as x,c as A}from"../js/common.14fcaefc.js";let G=class{};G=s([g(["login-email",k],w({makeControl:({node:s,aspects:l})=>e(s.element).convert(l).setup(a,s=>s.by(t())).setup(o,s=>{s.add(n()),s.add(y())})}),b("email"))],G);let O=class{};O=s([g(["login-password",k],w({makeControl:({node:s,aspects:l})=>e(s.element).convert(l).setup(a,s=>s.by(t())).setup(o,s=>{s.add(n()),s.add(y())})}),b("password"))],O);let S=class{constructor(s){const t=s.get(v),g=s.get(F);s.whenOn(b=>{l({form:t.select("form",{all:!0,deep:!0}).first,button:t.select("button",{all:!0,deep:!0}).first,aspects:s.get(C)}).consume(({form:[t],button:[l],aspects:[b]})=>{if(!t)return;const w=f(),j=c({email:"",password:""}).setup(r,s=>s.needs(w));j.aspect(a);const v=j.convert(d.to(t.element),b),C=v.aspect(i);return v.setup(o,s=>s.add(n())),l&&e(l.element).convert(b).setup(m,s=>s.derive(v.aspect(m))),new p(t.element).on("submit").instead(()=>{C.submit(s=>x(g.login(s))).catch(s=>{s instanceof u?console.log("Failed to login",...s.errors):console.log("Failed to login",s)})}),h(s,j),w}).needs(b)})}};S=s([g(["login",k],j(),{feature:{needs:[G,O]}})],S),A.load(S);export{G as LoginEmailComponent,O as LoginPasswordComponent};//# sourceMappingURL=main.ebb20b3b.js.map
