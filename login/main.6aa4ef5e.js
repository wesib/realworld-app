import{a7 as s,ae as e,aa as a,af as t,a8 as o,ad as n,f as l,ag as c,$ as r,ac as d,ah as i,ai as m,G as p,a5 as u,w as f}from"../js/lib.66b09466.js";import{C as b,S as g,U as j,f as w,h as v,i as h,j as C}from"../js/wesib.867fc5e7.js";import{C as k,b as y,A as F,a as x,c as A}from"../js/common.d82c17fb.js";let G=class{};G=s([b(["login-email",k],j({makeControl:({node:s,aspects:l})=>e(s.element).convert(l).setup(a,s=>s.by(t())).setup(o,s=>{s.add(n()),s.add(y())})}),g("email"))],G);let O=class{};O=s([b(["login-password",k],j({makeControl:({node:s,aspects:l})=>e(s.element).convert(l).setup(a,s=>s.by(t())).setup(o,s=>{s.add(n()),s.add(y())})}),g("password"))],O);let S=class{constructor(s){const t=s.get(v),b=s.get(F);s.whenOn(g=>{l({form:t.select("form",{all:!0,deep:!0}).first,button:t.select("button",{all:!0,deep:!0}).first,aspects:s.get(h)}).consume(({form:[t],button:[l],aspects:[g]})=>{if(!t)return;const j=f(),w=c({email:"",password:""}).setup(r,s=>s.needs(j));w.aspect(a);const v=w.convert(d.to(t.element),g),h=v.aspect(i);return v.setup(o,s=>s.add(n())),l&&e(l.element).convert(g).setup(m,s=>s.derive(v.aspect(m))),new p(t.element).on("submit").instead(()=>{h.submit(s=>x(b.login(s))).catch(s=>{s instanceof u?console.log("Failed to login",...s.errors):console.log("Failed to login",s)})}),C(s,w),j}).needs(g)})}};S=s([b(["login",k],w(),{feature:{needs:[G,O]}})],S),A.load(S);export{G as LoginEmailComponent,O as LoginPasswordComponent};//# sourceMappingURL=main.6aa4ef5e.js.map
