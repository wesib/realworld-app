import{c as s}from"../js/core/main.34ec5e59.js";import{_ as o}from"../js/helpers.e1623395.js";import{v as t,m as r,b as e,u as a,I as i}from"../js/frontmeans/input-aspects.f8acf040.js";import{h as m,S as p,O as j,g as n,N as c,i as f,c as l}from"../js/wesib/generic.daf122de.js";import{C as u}from"../js/wesib/wesib.c496f508.js";import{C as d}from"../js/core.10059585.js";import{a as h}from"../js/core/api.51544e65.js";import{b}from"../js/core/auth.3f3b4c69.js";import{C as v,s as g}from"../js/core/forms.d987144f.js";import{U as y}from"../js/user-email.component.fa545e40.js";import{U as w}from"../js/user-password.component.9b6f5655.js";import"../js/core/layout.43733f82.js";import"../js/frontmeans/namespace-aliaser.9467f14d.js";import"../js/proc7ts/fun-events.3257bf57.js";import"../js/proc7ts/primitives.38e5298b.js";import"../js/proc7ts/supply.9762ee6d.js";import"../js/core/loader.b1c22415.js";import"../js/proc7ts/workbench.31425b55.js";import"../js/proc7ts/context-values.24d38e04.js";import"../js/proc7ts/push-iterator.c8328864.js";import"../js/proc7ts/call-thru.f4f68410.js";import"../js/proc7ts/delta-set.d5d9e832.js";import"../js/frontmeans/dom-events.1d1a7091.js";import"../js/frontmeans/render-scheduler.6f331202.js";import"../js/hatsy/http-header-value.851567fb.js";import"../js/frontmeans/httongue.6b868a5b.js";let S=class{constructor(s){this._authService=s.get(b),this._navigation=s.get(c),s.whenSettled((({element:s})=>{this.form=f.by((s=>t({email:"",password:""},s)),(o=>r(s.querySelector("form"),o))),this.submitButton=g(s.querySelector("button"))}))}submit({control:s}){s.aspect(e).markEdited(),s.aspect(a).submit((s=>h(this._authService.login(s)))).then((()=>this._navigation.open("."))).catch((s=>{s instanceof i?console.error("Failed to login",...s.errors):console.error("Failed to login",s)}))}};o([m()],S.prototype,"form",void 0),o([p({form:{share:l,local:!0},name:""})],S.prototype,"submitButton",void 0),o([j()],S.prototype,"submit",null),S=o([u(["login",d],{feature:{needs:[v,y,w]}},n())],S),s.load(S);//# sourceMappingURL=main.ec3484d8.js.map
