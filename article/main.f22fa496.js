import{t as e}from"../js/lib/fun-events.a21352be.js";import{c as t}from"../js/lib/namespace-aliaser.535f16ce.js";import{o as s,R as o,C as n,a as r,B as i,s as a}from"../js/wesib/wesib.84ff8eb8.js";import{_ as c}from"../js/helpers.920c7f83.js";import{a as p,N as m,b as d,P as l}from"../js/wesib/generic.643f46dc.js";import{C as h}from"../js/common.74dd5bad.js";import{L as f}from"../js/generic/loader.74a72c40.js";import{c as u}from"../js/common/main.55e12d02.js";import{A as j,a as b}from"../js/common/articles.1ec63218.js";import{A as _}from"../js/common/input.297b22b9.js";import{F as g,C as v}from"../js/follow-author.component.2c606173.js";import{A as y,C}from"../js/article-meta-support.feature.7efd9d89.js";let x=class{constructor(t){this._context=t,this._response=e();const s=t.get(b),o=t.get(m),n=this._context.get(d);n.provide({a:C,is:this._response.read.keep.thru_(e=>e&&e.ok?e.body:{})}),n.provide({a:v,is:this._response.read.keep.thru_(e=>e&&e.ok?e.body.author:{})}),t.whenOn(e=>{e.whenOff(()=>this.content=void 0),this._response.read.tillOff(e)(e=>{e&&e.ok?s.htmlContents(e.body).then(e=>{t.connected&&(this.content=e)}).catch(e=>{t.connected&&(this.content=void 0,this.response={ok:!1,errors:{article:[`can not be parser ${String(e)}`]}})}):this.content=void 0})}),t.whenOn(e=>{o.read.tillOff(e).consume(e=>{const t=e.get(l).pathname.substring(0);return s.article(t)(e=>this.response=e)})})}get response(){return this._response.it}set response(e){this._response.it=e}render(){const e=t.name(["visible",h],this._context.get(r)),s=this._context.get(_),{element:o,contentRoot:n}=this._context,{document:a}=this._context.get(i);let c;return()=>{const{response:e}=this;e?e.ok?function({body:e}){p(),m(!0),a.getElementById("article:title").innerText=e.title}(e):function({errors:e}){p(),m(!1),c=s(e),c&&n.appendChild(c)}(e):(m(!1),c||(c=n.appendChild(a.createElement("conduit-loader"))))};function p(){c&&(c.remove(),c=void 0)}function m(t){t?o.classList.add(e):o.classList.remove(e)}}renderContent(){const{document:e}=this._context.get(i);return()=>{const t=e.getElementById("article:content");if(t){t.innerHTML="";const e=this.content;e&&t.appendChild(e)}}}};c([s()],x.prototype,"content",void 0),c([s()],x.prototype,"response",null),c([o({path:a("response")})],x.prototype,"render",null),c([o({path:a("content")})],x.prototype,"renderContent",null),x=c([n(["article",h],{feature:{needs:[y,j,g,f]}},p())],x),u.load(x);//# sourceMappingURL=main.f22fa496.js.map
