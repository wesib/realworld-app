import{t as e}from"../js/lib/fun-events.a21352be.js";import{c as t}from"../js/lib/namespace-aliaser.535f16ce.js";import{o as s,R as o,C as n,c as r,B as i,s as c}from"../js/wesib/wesib.c03111fd.js";import{_ as a}from"../js/helpers.920c7f83.js";import{a as p,N as d,b as l,f as m}from"../js/wesib/generic.7ab3ed7c.js";import{C as h}from"../js/core.f6946162.js";import{L as f}from"../js/core/loader.755172e7.js";import{c as u}from"../js/core/main.cf584391.js";import{A as j,a as b}from"../js/core/articles.c746720c.js";import{A as _}from"../js/core/input.5459c5de.js";import{F as g,c as v,n as C,C as y}from"../js/follow-author.component.8982ae76.js";import{A as x,C as k}from"../js/article-meta-components-support.feature.b7569be2.js";let w=class{constructor(t){this._context=t,this._response=e();const s=t.get(b),o=t.get(d),n=this._context.get(l),r=v(this._response.read.keep.thru_(e=>e&&e.ok?e.body.author:C));n.provide({a:k,is:this._response.read.keep.thru_(e=>e&&e.ok?e.body:{})}),n.provide({a:y,is:r}),t.whenOn(e=>{e.whenOff(()=>this.content=void 0),this._response.read.tillOff(e)(e=>{e&&e.ok?s.htmlContents(e.body).then(e=>{t.connected&&(this.content=e)}).catch(e=>{t.connected&&(this.content=void 0,this.response={ok:!1,errors:{article:[`can not be parser ${String(e)}`]}})}):this.content=void 0})}),t.whenOn(e=>{o.read.tillOff(e).consume(e=>{const t=decodeURIComponent(e.get(m).pathname.substring(0));return s.article(t)(e=>this.response=e)})})}get response(){return this._response.it}set response(e){this._response.it=e}render(){const e=t.name(["visible",h],this._context.get(r)),s=this._context.get(_),{element:o,contentRoot:n}=this._context,{document:c}=this._context.get(i);let a;return()=>{const{response:e}=this;e?e.ok?function({body:e}){p(),d(!0),c.getElementById("article:title").innerText=e.title}(e):function({errors:e}){p(),d(!1),a=s(e),a&&n.appendChild(a)}(e):(d(!1),a||(a=n.appendChild(c.createElement("conduit-loader"))))};function p(){a&&(a.remove(),a=void 0)}function d(t){t?o.classList.add(e):o.classList.remove(e)}}renderContent(){const{document:e}=this._context.get(i);return()=>{const t=e.getElementById("article:content");if(t){t.innerHTML="";const e=this.content;e&&t.appendChild(e)}}}};a([s()],w.prototype,"content",void 0),a([s()],w.prototype,"response",null),a([o({path:c("response")})],w.prototype,"render",null),a([o({path:c("content")})],w.prototype,"renderContent",null),w=a([n(["article",h],{feature:{needs:[x,j,g,f]}},p())],w),u.load(w);//# sourceMappingURL=main.9cfcdc1e.js.map
