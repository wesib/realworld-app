import{t as e}from"../js/lib/fun-events.a21352be.js";import{c as t}from"../js/lib/namespace-aliaser.535f16ce.js";import{o as s,R as o,C as n,c as r,B as i,s as a}from"../js/wesib/wesib.c03111fd.js";import{_ as c}from"../js/helpers.920c7f83.js";import{a as p,N as l,b as d,f as m}from"../js/wesib/generic.7ab3ed7c.js";import{C as h}from"../js/core.f6946162.js";import{L as f}from"../js/core/loader.755172e7.js";import{c as u}from"../js/core/main.cf584391.js";import{A as j,a as _}from"../js/core/articles.c746720c.js";import{A as b}from"../js/core/input.5459c5de.js";import{F as g,c as v,n as y,C}from"../js/follow-author.component.8982ae76.js";import{A as x,C as k}from"../js/article-meta-components-support.feature.7964e674.js";let w=class{constructor(t){this._context=t,this._response=e();const s=t.get(_),o=t.get(l),n=this._context.get(d),r=v(this._response.read.keep.thru_(e=>e&&e.ok?e.body.author:y));n.provide({a:k,is:this._response.read.keep.thru_(e=>e&&e.ok?e.body:{})}),n.provide({a:C,is:r}),t.whenOn(e=>{e.whenOff(()=>this.content=void 0),this._response.read.tillOff(e)(e=>{e&&e.ok?s.htmlContents(e.body).then(e=>{t.connected&&(this.content=e)}).catch(e=>{t.connected&&(this.content=void 0,this.response={ok:!1,errors:{article:[`can not be parser ${String(e)}`]}})}):this.content=void 0})}),t.whenOn(e=>{o.read.tillOff(e).consume(e=>{const t=e.get(m).pathname.substring(0);return s.article(t)(e=>this.response=e)})})}get response(){return this._response.it}set response(e){this._response.it=e}render(){const e=t.name(["visible",h],this._context.get(r)),s=this._context.get(b),{element:o,contentRoot:n}=this._context,{document:a}=this._context.get(i);let c;return()=>{const{response:e}=this;e?e.ok?function({body:e}){p(),l(!0),a.getElementById("article:title").innerText=e.title}(e):function({errors:e}){p(),l(!1),c=s(e),c&&n.appendChild(c)}(e):(l(!1),c||(c=n.appendChild(a.createElement("conduit-loader"))))};function p(){c&&(c.remove(),c=void 0)}function l(t){t?o.classList.add(e):o.classList.remove(e)}}renderContent(){const{document:e}=this._context.get(i);return()=>{const t=e.getElementById("article:content");if(t){t.innerHTML="";const e=this.content;e&&t.appendChild(e)}}}};c([s()],w.prototype,"content",void 0),c([s()],w.prototype,"response",null),c([o({path:a("response")})],w.prototype,"render",null),c([o({path:a("content")})],w.prototype,"renderContent",null),w=c([n(["article",h],{feature:{needs:[x,j,g,f]}},p())],w),u.load(w);//# sourceMappingURL=main.f3f8012c.js.map
