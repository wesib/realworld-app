import{t}from"../js/lib/fun-events.a21352be.js";import{c as e}from"../js/lib/namespace-aliaser.535f16ce.js";import{o as s,R as o,C as n,a as r,B as i,s as a}from"../js/wesib/wesib.84ff8eb8.js";import{_ as c}from"../js/helpers.920c7f83.js";import{b as l,a as p,N as m,P as d}from"../js/wesib/generic.643f46dc.js";import{C as h}from"../js/common.74dd5bad.js";import{L as u}from"../js/generic/loader.74a72c40.js";import{c as f}from"../js/common/main.cbd1afd7.js";import{A as j,a as b}from"../js/common/articles.16ea6782.js";import{A as g}from"../js/common/input.9985e50b.js";import{C as _,A as v}from"../js/article-meta-support.feature.bcf3ee96.js";import{e as y}from"../js/common/util.36d20bba.js";let w=class{constructor(t){this._context=t;const e=t.get(l);t.whenOn(t=>{e.get(_).tillOff(t)(t=>{this.author=t.slug?t.author:void 0})})}render(){const{contentRoot:t}=this._context;return()=>{this.author?(t.className=this.author.following?"btn-outline-primary":"btn-outline-secondary",t.innerHTML=`<i class="ion-plus-round"></i> Follow ${y(this.author.username)}`):t.innerHTML=""}}};c([s()],w.prototype,"author",void 0),c([o()],w.prototype,"render",null),w=c([n(["follow-author",h])],w);let x=class{constructor(e){this._context=e,this._response=t();const s=e.get(b),o=e.get(m);this._context.get(l).provide({a:_,is:this._response.read.keep.thru_(t=>t&&t.ok?t.body:{})}),e.whenOn(t=>{t.whenOff(()=>this.content=void 0),this._response.read.tillOff(t)(t=>{t&&t.ok?s.htmlContents(t.body).then(t=>{e.connected&&(this.content=t)}).catch(t=>{e.connected&&(this.content=void 0,this.response={ok:!1,errors:{article:[`can not be parser ${String(t)}`]}})}):this.content=void 0})}),e.whenOn(t=>{o.read.tillOff(t).consume(t=>{const e=t.get(d).pathname.substring(0);return s.article(e)(t=>this.response=t)})})}get response(){return this._response.it}set response(t){this._response.it=t}render(){const t=e.name(["visible",h],this._context.get(r)),s=this._context.get(g),{element:o,contentRoot:n}=this._context,{document:a}=this._context.get(i);let c;return()=>{const{response:e}=this;function r(){c&&(c.remove(),c=void 0)}function i(e){e?o.classList.add(t):o.classList.remove(t)}e?e.ok?function({body:e}){r(),i(!0),o.classList.add(t),a.getElementById("article:title").innerText=e.title}(e):function({errors:e}){r(),i(!1),o.classList.remove(t),c=s(e),c&&n.appendChild(c)}(e):(i(!1),c||(c=n.appendChild(a.createElement("conduit-loader"))))}}renderContent(){const{document:t}=this._context.get(i);return()=>{const e=t.getElementById("article:content");if(e){e.innerHTML="";const t=this.content;t&&e.appendChild(t)}}}};c([s()],x.prototype,"content",void 0),c([s()],x.prototype,"response",null),c([o({path:a("response")})],x.prototype,"render",null),c([o({path:a("content")})],x.prototype,"renderContent",null),x=c([n(["article",h],{feature:{needs:[v,j,w,u]}},p())],x),f.load(x);//# sourceMappingURL=main.1fe855b5.js.map
