{"version":3,"file":"main.a25ec9fd.js","sources":["../../src/pages/article/comment-event.ts","../../src/pages/article/article-comment.component.ts","../../src/pages/article/article-comments.component.ts","../../src/pages/article/article-content.component.ts","../../src/pages/article/article-comment-text.component.ts","../../src/pages/article/new-article-comment.component.ts","../../src/pages/article/article.component.ts","../../src/pages/article/main.ts"],"sourcesContent":["import { Comment } from '../../core/comments';\n\nexport type CommentEventDetails =\n    | {\n  added?: undefined;\n  removed: number;\n} | {\n  added: Comment;\n  removed?: undefined;\n};\n\nexport class CommentEvent extends CustomEvent<CommentEventDetails> {\n}\n","import { HierarchyContext } from '@wesib/generic';\nimport { InputFromControl, NoInputFromControl } from '@wesib/generic/input';\nimport { BootstrapWindow, Component, ComponentContext, DomProperty, StateProperty } from '@wesib/wesib';\nimport { DomEventDispatcher } from 'fun-events/dom';\nimport { InSubmit, inSubmitButton, InSubmitError } from 'input-aspects';\nimport { Conduit__NS } from '../../core';\nimport { apiSubmit } from '../../core/api';\nimport { AuthService, AuthUser, notAuthenticated, NotAuthenticated } from '../../core/auth';\nimport { Comment, CommentService } from '../../core/comments';\nimport { escapeHtml } from '../../core/util';\nimport { formatDate, RenderHTML } from '../../reusable';\nimport { CommentEvent } from './comment-event';\nimport { CurrentArticle, noArticle } from './current-article';\n\n@Component(['article-comment', Conduit__NS])\nexport class ArticleCommentComponent {\n\n  @DomProperty()\n  articleComment?: Comment;\n\n  @StateProperty()\n  article: CurrentArticle = noArticle;\n\n  @StateProperty()\n  user: AuthUser | NotAuthenticated = notAuthenticated;\n\n  form: InputFromControl | NoInputFromControl = {};\n\n  constructor(private readonly _context: ComponentContext) {\n\n    const authService = _context.get(AuthService);\n    const hierarchy = _context.get(HierarchyContext);\n\n    _context.whenOn(supply => {\n      authService.user\n          .tillOff(supply)(user => this.user = user)\n          .whenOff(() => this.user = notAuthenticated);\n      hierarchy.get(CurrentArticle)\n          .tillOff(supply)(article => this.article = article)\n          .whenOff(() => this.article = noArticle);\n      hierarchy.get(InputFromControl)\n          .tillOff(supply)(form => this.form = form)\n          .whenOff(() => this.form = {});\n    });\n  }\n\n  @RenderHTML({ comment: 'COMMENT' })\n  render(): Node | undefined {\n\n    const comment = this.articleComment;\n\n    if (!comment) {\n      return;\n    }\n\n    const commentService = this._context.get(CommentService);\n    const { document } = this._context.get(BootstrapWindow);\n    const { author } = comment;\n    const authorLink = `profile/#/${encodeURIComponent(author.username)}`;\n    const authorImage = author.image ? `<img src=\"http://i.imgur.com/Qr71crq.jpg\" class=\"comment-author-img\" />` : '';\n    const date = formatDate(new Date(comment.createdAt));\n    const fragment = document.createDocumentFragment();\n    const cardBody = fragment.appendChild(document.createElement('div'));\n\n    cardBody.className = 'card-body';\n\n    const cardText = cardBody.appendChild(document.createElement('p'));\n\n    cardText.className = 'card-text';\n    cardText.innerText = comment.body;\n\n    const cardFooter = fragment.appendChild(document.createElement('div'));\n\n    cardFooter.className = 'card-footer';\n\n    cardFooter.innerHTML = `\n<a href=\"${authorLink}\" class=\"comment-author\">${authorImage}</a>\n<a href=\"${authorLink}\" class=\"comment-author\">${escapeHtml(author.username)}</a>\n<span class=\"date-posted\">${date}</span>`;\n\n    const { control: form } = this.form;\n    const { slug } = this.article;\n\n    if (this.user.username === author.username && form && slug) {\n\n      const options = cardFooter.appendChild(document.createElement('span'));\n\n      options.className = 'mod-options';\n\n      const deleteBtn = options.appendChild(document.createElement('button'));\n\n      deleteBtn.type = 'button';\n      deleteBtn.className = 'btn btn-sm';\n      deleteBtn.innerHTML = '<i class=\"ion-trash-a\"></i>';\n      inSubmitButton(deleteBtn, { form });\n\n      new DomEventDispatcher(deleteBtn).on('click').just(() => {\n        form.aspect(InSubmit)\n            .submit(() => apiSubmit(commentService.deleteComment(slug, comment.id)))\n            .then(() => {\n              this._context.dispatchEvent(new CommentEvent(\n                  'conduit:comment',\n                  {\n                    bubbles: true,\n                    detail: { removed: comment.id },\n                  },\n              ));\n            })\n            .catch(e => {\n              if (e instanceof InSubmitError) {\n                console.error('Failed to remove comment', ...e.errors);\n              } else {\n                console.error('Failed to remove comment', e);\n              }\n            });\n      });\n    }\n\n    return fragment;\n  }\n\n}\n","import { HierarchyContext } from '@wesib/generic';\nimport { inputFromControl } from '@wesib/generic/input';\nimport { BootstrapWindow, Component, ComponentContext, ElementRenderer, Render, StateProperty } from '@wesib/wesib';\nimport { nextSkip } from 'call-thru';\nimport { eventSupplyOf, nextOnEvent } from 'fun-events';\nimport { inGroup } from 'input-aspects';\nimport { Conduit__NS } from '../../core';\nimport { ApiResponse } from '../../core/api';\nimport { Comment, CommentList, CommentService, CommentsSupport } from '../../core/comments';\nimport { ConduitInputSupport } from '../../core/input';\nimport { RenderLoader } from '../../core/loader';\nimport { ArticleCommentComponent } from './article-comment.component';\nimport { CommentEvent } from './comment-event';\nimport { CurrentArticle } from './current-article';\n\n@Component(\n    ['article-comments', Conduit__NS],\n    {\n      feature: {\n        needs: [\n          ArticleCommentComponent,\n          CommentsSupport,\n          ConduitInputSupport,\n        ],\n      },\n    },\n)\nexport class ArticleCommentsComponent {\n\n  @RenderLoader({ comment: 'COMMENTS' })\n  response?: ApiResponse<CommentList>;\n\n  @StateProperty()\n  comments: Comment[] = [];\n\n  constructor(private readonly _context: ComponentContext) {\n\n    const commentService = _context.get(CommentService);\n    const hierarchy = this._context.get(HierarchyContext);\n\n    this._context.whenOn(supply => {\n      this._context.on<CommentEvent>('conduit:comment')(({ detail: { added, removed } }) => {\n        if (added) {\n          this.comments = [added, ...this.comments];\n        } else {\n          this.comments = this.comments.filter(comment => comment.id !== removed);\n        }\n      });\n\n      hierarchy.get(CurrentArticle).tillOff(supply).thru_(\n          article => article.slug ? nextOnEvent(commentService.articleComments(article.slug)) : nextSkip,\n      )(response => {\n        this.response = response;\n        if (response.ok) {\n          this.comments = response.body.comments;\n        }\n      });\n\n      const group = inGroup({});\n\n      eventSupplyOf(group).needs(supply);\n      inputFromControl(_context, group);\n    });\n  }\n\n  @Render()\n  render(): ElementRenderer {\n\n    const { document } = this._context.get(BootstrapWindow);\n    const { contentRoot }: { contentRoot: Node } = this._context;\n    const range = document.createRange();\n\n    range.setStartAfter(contentRoot.appendChild(document.createComment('[COMMENTS[')));\n    range.setEndBefore(contentRoot.appendChild(document.createComment(']COMMENTS]')));\n\n    return () => {\n      range.deleteContents();\n\n      const { comments } = this;\n\n      if (!comments.length) {\n        return;\n      }\n\n      const fragment = document.createDocumentFragment();\n\n      comments.forEach(comment => {\n\n        const commentEl = fragment.appendChild(document.createElement('conduit-article-comment'));\n\n        (commentEl as any).articleComment = comment;\n      });\n\n      range.insertNode(fragment);\n    };\n  }\n\n}\n","import { HierarchyContext } from '@wesib/generic';\nimport { Component, ComponentContext, StateProperty } from '@wesib/wesib';\nimport { Conduit__NS } from '../../core';\nimport { ArticleService } from '../../core/articles';\nimport { RenderHTML } from '../../reusable';\nimport { CurrentArticle } from './current-article';\n\n@Component(['article-content', Conduit__NS])\nexport class ArticleContentComponent {\n\n  @StateProperty()\n  content?: Node;\n\n  constructor(private readonly _context: ComponentContext) {\n\n    const articleService = _context.get(ArticleService);\n    const hierarchy = this._context.get(HierarchyContext);\n\n    _context.whenOn(supply => {\n      supply.whenOff(() => this.content = undefined);\n      hierarchy.get(CurrentArticle).tillOff(supply)(article => {\n        if (article.slug) {\n          articleService.htmlContents(article)\n              .then(content => {\n                if (_context.connected) {\n                  this.content = content;\n                }\n              })\n              .catch(error => {\n                if (_context.connected) {\n                  this.content = undefined;\n                  console.error('Failed to parse article', error);\n                }\n              });\n        } else {\n          this.content = undefined;\n        }\n      });\n    });\n  }\n\n  @RenderHTML({ comment: 'ARTICLE(content)' })\n  render(): Node | undefined {\n    return this.content;\n  }\n\n}\n","import { SetInputName } from '@wesib/generic/input';\nimport { Component } from '@wesib/wesib';\nimport { inText, InValidation, requirePresent } from 'input-aspects';\nimport { Conduit__NS } from '../../core';\nimport { UseConduitInput } from '../../core/input';\n\n@Component(\n    ['article-comment-text', Conduit__NS],\n    UseConduitInput({\n      select: 'textarea',\n      makeControl({ node, aspects }) {\n        return inText(node.element, { aspects })\n            .setup(InValidation, validation => validation.by(requirePresent()));\n      },\n    }),\n    SetInputName('text'),\n)\nexport class ArticleCommentTextComponent {\n\n}\n","import { HierarchyContext } from '@wesib/generic';\nimport { InputToForm, OnSubmit } from '@wesib/generic/input';\nimport { Component, ComponentContext, ElementRenderer, Render, StateProperty } from '@wesib/wesib';\nimport { InStatus, InSubmit, InSubmitError } from 'input-aspects';\nimport { Conduit__NS } from '../../core';\nimport { apiSubmit } from '../../core/api';\nimport { AuthService, AuthUser, notAuthenticated, NotAuthenticated } from '../../core/auth';\nimport { CommentService, CommentsSupport } from '../../core/comments';\nimport { FillConduitForm } from '../../core/input';\nimport { ArticleCommentTextComponent } from './article-comment-text.component';\nimport { CommentEvent } from './comment-event';\nimport { CurrentArticle, noArticle } from './current-article';\n\ninterface NewComment {\n  text: string;\n}\n\n@Component(\n    ['new-article-comment', Conduit__NS],\n    {\n      feature: {\n        needs: [\n          ArticleCommentTextComponent,\n          CommentsSupport,\n        ],\n      },\n    },\n    FillConduitForm<NewComment>({\n      emptyModel: {\n        text: '',\n      },\n    }),\n)\nexport class NewArticleCommentComponent {\n\n  private readonly _commentService: CommentService;\n\n  article: CurrentArticle = noArticle;\n\n  @StateProperty()\n  user: AuthUser | NotAuthenticated = notAuthenticated;\n\n  constructor(private readonly _context: ComponentContext) {\n    this._commentService = _context.get(CommentService);\n\n    const authService = _context.get(AuthService);\n    const hierarchy = _context.get(HierarchyContext);\n\n    _context.whenOn(supply => {\n      authService.user\n          .tillOff(supply)(user => this.user = user)\n          .whenOff(() => this.user = notAuthenticated);\n      hierarchy.get(CurrentArticle)\n          .tillOff(supply)(article => this.article = article)\n          .whenOff(() => this.article = noArticle);\n    });\n  }\n\n  @Render()\n  render(): ElementRenderer {\n\n    const { element }: { element: Element } = this._context;\n    const image = element.querySelector('.comment-author-img');\n\n    return () => {\n      if (this.user.email && this.user.image) {\n        image?.setAttribute('src', this.user.image);\n      } else {\n        image?.removeAttribute('src');\n      }\n    };\n  }\n\n  @OnSubmit()\n  submit({ control }: InputToForm<NewComment>): void {\n\n    const { article } = this;\n\n    if (!article.slug) {\n      return;\n    }\n\n    control.aspect(InStatus).markEdited();\n    control.aspect(InSubmit)\n        .submit(request => apiSubmit(this._commentService.addComment(article.slug, request.text)))\n        .then(added => {\n          control.it = { text: '' };\n          control.aspect(InStatus).markTouched(false);\n          control.aspect(InSubmit).reset();\n          this._context.dispatchEvent(new CommentEvent(\n              'conduit:comment',\n              {\n                bubbles: true,\n                detail: { added },\n              },\n          ));\n        })\n        .catch(e => {\n          if (e instanceof InSubmitError) {\n            console.error('Failed to comment', ...e.errors);\n          } else {\n            console.error('Failed to comment', e);\n          }\n        });\n  }\n\n}\n","import { HandleNavLinks, HierarchyContext, Navigation, PageHashURLParam } from '@wesib/generic';\nimport {\n  BootstrapWindow,\n  Component,\n  ComponentContext,\n  ElementRenderer,\n  Render,\n  StateProperty,\n  statePropertyPathTo,\n} from '@wesib/wesib';\nimport { trackValue } from 'fun-events';\nimport { Conduit__NS } from '../../core';\nimport { ApiResponse } from '../../core/api';\nimport { Article, ArticleService, ArticlesSupport } from '../../core/articles';\nimport { RenderLoader } from '../../core/loader';\nimport { CurrentUserProfile, currentUserProfileBy, noUserProfile } from '../profile/current-user-profile';\nimport { FollowAuthorComponent } from '../profile/follow-author.component';\nimport { ArticleCommentsComponent } from './article-comments.component';\nimport { ArticleContentComponent } from './article-content.component';\nimport { ArticleMetaComponentsSupport } from './article-meta-components-support.feature';\nimport { CurrentArticle, CurrentArticleTracker, noArticle } from './current-article';\nimport { NewArticleCommentComponent } from './new-article-comment.component';\n\n@Component(\n    ['article', Conduit__NS],\n    {\n      feature: {\n        needs: [\n          ArticleCommentsComponent,\n          ArticleContentComponent,\n          ArticleMetaComponentsSupport,\n          ArticlesSupport,\n          FollowAuthorComponent,\n          NewArticleCommentComponent,\n        ],\n      },\n    },\n    HandleNavLinks(),\n)\nexport class ArticleComponent {\n\n  private readonly _response = trackValue<ApiResponse<Article>>();\n\n  constructor(private readonly _context: ComponentContext) {\n\n    const articleService = _context.get(ArticleService);\n    const navigation = _context.get(Navigation);\n    const hierarchy = this._context.get(HierarchyContext);\n    const article = new CurrentArticleTracker().byArticles(\n        this._response.read.keep.thru_(\n            response => response && response.ok ? response.body : noArticle,\n        ),\n    );\n    const author = currentUserProfileBy(\n        this._response.read.keep.thru_(\n            response => response && response.ok ? response.body.author : noUserProfile,\n        ),\n    );\n\n    hierarchy.provide({ a: CurrentArticle, is: article });\n    hierarchy.provide({ a: CurrentUserProfile, is: author });\n    _context.whenOn(supply => {\n      navigation.read.tillOff(supply).consume(page => {\n\n        const slug = decodeURIComponent(page.get(PageHashURLParam).pathname.substring(1));\n\n        return articleService.article(slug)(response => this.response = response);\n      });\n    });\n  }\n\n  get response(): ApiResponse<Article> | undefined {\n    return this._response.it;\n  }\n\n  @StateProperty()\n  @RenderLoader()\n  set response(value: ApiResponse<Article> | undefined) {\n    this._response.it = value;\n  }\n\n  @Render({ path: statePropertyPathTo('response') })\n  render(): ElementRenderer {\n\n    const { document } = this._context.get(BootstrapWindow);\n\n    return () => {\n\n      const { response } = this;\n\n      if (response && response.ok) {\n        document.getElementById('article:title')!.innerText = response.body.title;\n      }\n    };\n  }\n\n}\n","import { conduitContext } from '../../core/main';\nimport { ArticleComponent } from './article.component';\n\nconduitContext.load(ArticleComponent);\n"],"names":["CommentEvent","CustomEvent","ArticleCommentComponent","[object Object]","_context","this","noArticle","notAuthenticated","authService","get","AuthService","hierarchy","HierarchyContext","whenOn","supply","user","tillOff","whenOff","CurrentArticle","article","InputFromControl","form","comment","articleComment","commentService","CommentService","document","BootstrapWindow","author","authorLink","encodeURIComponent","username","authorImage","image","date","formatDate","Date","createdAt","fragment","createDocumentFragment","cardBody","appendChild","createElement","className","cardText","innerText","body","cardFooter","innerHTML","escapeHtml","control","slug","options","deleteBtn","type","inSubmitButton","DomEventDispatcher","on","just","aspect","InSubmit","submit","apiSubmit","deleteComment","id","then","dispatchEvent","bubbles","detail","removed","catch","e","InSubmitError","console","error","errors","__decorate","DomProperty","StateProperty","RenderHTML","Component","Conduit__NS","ArticleCommentsComponent","added","comments","filter","thru_","nextOnEvent","articleComments","nextSkip","response","ok","group","inGroup","eventSupplyOf","needs","inputFromControl","contentRoot","range","createRange","setStartAfter","createComment","setEndBefore","deleteContents","length","forEach","insertNode","RenderLoader","Render","feature","CommentsSupport","ConduitInputSupport","ArticleContentComponent","articleService","ArticleService","content","undefined","htmlContents","connected","ArticleCommentTextComponent","UseConduitInput","select","makeControl","node","aspects","inText","element","setup","InValidation","validation","by","requirePresent","SetInputName","NewArticleCommentComponent","_commentService","querySelector","email","setAttribute","removeAttribute","InStatus","markEdited","request","addComment","text","it","markTouched","reset","OnSubmit","FillConduitForm","emptyModel","ArticleComponent","trackValue","navigation","Navigation","CurrentArticleTracker","byArticles","_response","read","keep","currentUserProfileBy","noUserProfile","provide","a","is","CurrentUserProfile","consume","page","decodeURIComponent","PageHashURLParam","pathname","substring","value","getElementById","title","path","statePropertyPathTo","ArticleMetaComponentsSupport","ArticlesSupport","FollowAuthorComponent","HandleNavLinks","conduitContext","load"],"mappings":"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"}