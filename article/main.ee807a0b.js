import{t as e}from"../js/lib/fun-events.a21352be.js";import{C as t,p as s,R as o,B as r,s as n}from"../js/wesib/wesib.b48306cb.js";import{_ as a}from"../js/helpers.920c7f83.js";import{b as i,a as c,N as p,c as l}from"../js/wesib/generic.e7ebea81.js";import{C as m}from"../js/core.f6946162.js";import{R as d,a as h}from"../js/core/loader.4f7c7fa2.js";import{c as f}from"../js/core/main.dad15503.js";import{A as j,a as u}from"../js/core/articles.af52d4d1.js";import{F as b,c as g,n as _,C as w}from"../js/follow-author.component.0ea6ebca.js";import{C as y,A as v,a as C,n as x}from"../js/article-meta-components-support.feature.1c44b9de.js";let k=class{constructor(e){this._context=e;const t=e.get(j),s=this._context.get(i);e.whenOn(o=>{o.whenOff(()=>this.content=void 0),s.get(y).tillOff(o)(s=>{s.slug?t.htmlContents(s).then(t=>{e.connected&&(this.content=t)}).catch(t=>{e.connected&&(this.content=void 0,console.error("Failed to parse article",t))}):this.content=void 0})})}};a([d({comment:"ARTICLE(content)",offline:!0})],k.prototype,"content",void 0),k=a([t(["article-content",m])],k);let O=class{constructor(t){this._context=t,this._response=e();const s=t.get(j),o=t.get(p),r=this._context.get(i),n=(new C).byArticles(this._response.read.keep.thru_(e=>e&&e.ok?e.body:x)),a=g(this._response.read.keep.thru_(e=>e&&e.ok?e.body.author:_));r.provide({a:y,is:n}),r.provide({a:w,is:a}),t.whenOn(e=>{o.read.tillOff(e).consume(e=>{const t=decodeURIComponent(e.get(l).pathname.substring(1));return s.article(t)(e=>this.response=e)})})}get response(){return this._response.it}set response(e){this._response.it=e}render(){const{document:e}=this._context.get(r);return()=>{const{response:t}=this;t&&t.ok&&(e.getElementById("article:title").innerText=t.body.title)}}};a([s(),h()],O.prototype,"response",null),a([o({path:n("response")})],O.prototype,"render",null),O=a([t(["article",m],{feature:{needs:[k,v,u,b]}},c())],O),f.load(O);//# sourceMappingURL=main.ee807a0b.js.map
