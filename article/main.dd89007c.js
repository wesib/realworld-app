import{t as e}from"../js/lib/fun-events.a21352be.js";import{c as t}from"../js/lib/namespace-aliaser.535f16ce.js";import{o as s,R as o,C as n,c as r,B as i,s as a}from"../js/wesib/wesib.c03111fd.js";import{_ as c}from"../js/helpers.920c7f83.js";import{a as p,N as m,b as d,f as l}from"../js/wesib/generic.7ab3ed7c.js";import{C as h}from"../js/common.74dd5bad.js";import{L as f}from"../js/generic/loader.38ea2368.js";import{c as u}from"../js/common/main.83398623.js";import{A as j,a as b}from"../js/common/articles.71f8decf.js";import{A as _}from"../js/common/input.0c0819f3.js";import{F as g,c as v,n as y,C}from"../js/follow-author.component.749d5572.js";import{A as x,C as k}from"../js/article-meta-components-support.feature.20003085.js";let w=class{constructor(t){this._context=t,this._response=e();const s=t.get(b),o=t.get(m),n=this._context.get(d),r=v(this._response.read.keep.thru_(e=>e&&e.ok?e.body.author:y));n.provide({a:k,is:this._response.read.keep.thru_(e=>e&&e.ok?e.body:{})}),n.provide({a:C,is:r}),t.whenOn(e=>{e.whenOff(()=>this.content=void 0),this._response.read.tillOff(e)(e=>{e&&e.ok?s.htmlContents(e.body).then(e=>{t.connected&&(this.content=e)}).catch(e=>{t.connected&&(this.content=void 0,this.response={ok:!1,errors:{article:[`can not be parser ${String(e)}`]}})}):this.content=void 0})}),t.whenOn(e=>{o.read.tillOff(e).consume(e=>{const t=e.get(l).pathname.substring(0);return s.article(t)(e=>this.response=e)})})}get response(){return this._response.it}set response(e){this._response.it=e}render(){const e=t.name(["visible",h],this._context.get(r)),s=this._context.get(_),{element:o,contentRoot:n}=this._context,{document:a}=this._context.get(i);let c;return()=>{const{response:e}=this;e?e.ok?function({body:e}){p(),m(!0),a.getElementById("article:title").innerText=e.title}(e):function({errors:e}){p(),m(!1),c=s(e),c&&n.appendChild(c)}(e):(m(!1),c||(c=n.appendChild(a.createElement("conduit-loader"))))};function p(){c&&(c.remove(),c=void 0)}function m(t){t?o.classList.add(e):o.classList.remove(e)}}renderContent(){const{document:e}=this._context.get(i);return()=>{const t=e.getElementById("article:content");if(t){t.innerHTML="";const e=this.content;e&&t.appendChild(e)}}}};c([s()],w.prototype,"content",void 0),c([s()],w.prototype,"response",null),c([o({path:a("response")})],w.prototype,"render",null),c([o({path:a("content")})],w.prototype,"renderContent",null),w=c([n(["article",h],{feature:{needs:[x,j,g,f]}},p())],w),u.load(w);//# sourceMappingURL=main.dd89007c.js.map
