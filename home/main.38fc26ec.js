import{c as e}from"../js/core/main.34ec5e59.js";import{_ as t}from"../js/helpers.e1623395.js";import{g as s,N as r,A as o,n as a}from"../js/wesib/generic.daf122de.js";import{S as n,R as i,C as c,B as p}from"../js/wesib/wesib.c496f508.js";import{C as d}from"../js/core.10059585.js";import{F as m,a as f}from"../js/core/feed.d56f0914.js";import{L as j}from"../js/core/loader.b1c22415.js";import{s as h,I as l,j as u}from"../js/proc7ts/fun-events.3257bf57.js";import{P as g,R as b}from"../js/render-feed.decorator.02ef0b9f.js";import{n as v}from"../js/proc7ts/primitives.38e5298b.js";import{b as C}from"../js/core/auth.3f3b4c69.js";import"../js/core/layout.43733f82.js";import"../js/frontmeans/namespace-aliaser.9467f14d.js";import"../js/frontmeans/dom-events.1d1a7091.js";import"../js/proc7ts/supply.9762ee6d.js";import"../js/frontmeans/input-aspects.f8acf040.js";import"../js/frontmeans/render-scheduler.6f331202.js";import"../js/proc7ts/push-iterator.c8328864.js";import"../js/proc7ts/call-thru.f4f68410.js";import"../js/proc7ts/delta-set.d5d9e832.js";import"../js/proc7ts/context-values.24d38e04.js";import"../js/hatsy/http-header-value.851567fb.js";import"../js/proc7ts/workbench.31425b55.js";import"../js/frontmeans/httongue.6b868a5b.js";import"../js/core/api.51544e65.js";import"../js/article-buttons-support.feature.8a881d48.js";import"../js/core/articles.101ad419.js";import"../js/lib/dompurify.f5eadf9f.js";import"../js/lib/marked.9d494571.js";let x=class{constructor(e){this._context=e,this.tags=[];const t=this._context.get(m),s=this._context.get(r);e.whenConnected((()=>{s.read.do(h(e))((e=>this.page=e)),t.tags.do(l(e))(((...e)=>this.tags=e))}))}render(){const{document:e}=this._context.get(p),t=e.createRange(),{contentRoot:s}=this._context;return t.selectNodeContents(s),t.setStartAfter(s.childNodes[s.childNodes.length-1]),()=>{if(t.deleteContents(),!this.page)return;const s=this._context.get(r),o=e.createDocumentFragment(),a=this.page.get(g);this.tags.forEach((t=>{const r=s.with(g,{...a,tag:t,feed:void 0,offset:0}).pretend();if(r){const s=o.appendChild(e.createElement("a"));s.href=r.url.href,s.innerText=t}})),t.insertNode(o)}}};t([n()],x.prototype,"tags",void 0),t([n()],x.prototype,"page",void 0),t([i()],x.prototype,"render",null),x=t([c(["feed-tags",d],s())],x);let w=class{constructor(e){this._context=e,this.request={};const{document:t}=e.get(p),s=e.get(r),o=e.get(C);e.whenConnected((()=>{u({auth:o.authentication,page:s}).do(h(e))((({auth:[{token:e}],page:[r]})=>{const{url:o}=r,a=new URL(t.baseURI);if(o.pathname!==a.pathname)return;const n=this.request=r.get(g),{feed:i}=n;"/personal-feed"===i&&(e||s.with(g,{}).replace().catch(v))}))}))}render(){const e=this._context.get(r),{document:t}=this._context.get(p),{element:s}=this._context,o=s.querySelector("ul"),a=t.createRange();return a.setStartAfter(o.appendChild(t.createComment("[TAG["))),a.setEndBefore(o.appendChild(t.createComment("]TAG]"))),()=>{a.deleteContents();const{tag:s}=this.request;if(!s)return;const r=e.with(g,{tag:s}).pretend();if(!r)return;const o=t.createElement("li");o.className="nav-item";const n=o.appendChild(t.createElement("a"));n.className="nav-link",n.innerText=`#${s}`,n.setAttribute("href",r.url.hash),a.insertNode(o)}}};t([n()],w.prototype,"request",void 0),t([i()],w.prototype,"render",null),w=t([c(["feed-toggle",d],o({active:"active"}),s())],w);let y=class{constructor(e){this.request={};const t=e.get(r);e.whenConnected((()=>{t.read.do(h(e))((e=>{this.request=e.get(g)}))}))}};t([b()],y.prototype,"request",void 0),y=t([c(["feed",d])],y);let _=class{};_=t([c(["home",d],{feature:{needs:[f,y,x,w,j,a]}})],_),e.load(_);//# sourceMappingURL=main.38fc26ec.js.map
