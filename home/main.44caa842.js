import{n as e}from"../js/lib/call-thru.00f7427a.js";import{e as t}from"../js/lib/fun-events.a21352be.js";import{o as s,R as o,C as a,B as r}from"../js/wesib/wesib.c03111fd.js";import{_ as n}from"../js/helpers.920c7f83.js";import{a as c}from"../js/common/auth.a2e83e51.js";import{a as i,N as f,A as m,g as d}from"../js/wesib/generic.7ab3ed7c.js";import{C as l}from"../js/common.74dd5bad.js";import{L as h}from"../js/generic/loader.38ea2368.js";import{c as g}from"../js/common/main.83398623.js";import{a as p,F as j}from"../js/common/feed.b1b78f2a.js";import{P as u,R as b}from"../js/render-feed.decorator.da23c86b.js";let w=class{constructor(e){this._context=e,this.tags=[];const t=this._context.get(p),s=this._context.get(f);e.whenOn(e=>{s.read.tillOff(e)(e=>this.page=e),t.tags().tillOff(e)((...e)=>this.tags=e)})}render(){const{document:e}=this._context.get(r),t=e.createRange(),{contentRoot:s}=this._context;return t.selectNodeContents(s),t.setStartAfter(s.childNodes[s.childNodes.length-1]),()=>{if(t.deleteContents(),!this.page)return;const s=this._context.get(f),o=e.createDocumentFragment(),a=this.page.get(u);this.tags.forEach(t=>{const r=s.with(u,Object.assign(Object.assign({},a),{tag:t,offset:0})).pretend();if(r){const s=o.appendChild(e.createElement("a"));s.href=r.url.href,s.innerText=t}}),t.insertNode(o)}}};n([s()],w.prototype,"tags",void 0),n([s()],w.prototype,"page",void 0),n([o()],w.prototype,"render",null),w=n([a(["feed-tags",l],i())],w);let O=class{constructor(s){const{document:o}=s.get(r),a=s.get(f),n=s.get(c);s.whenOn(s=>{t({auth:n.authentication,page:a}).tillOff(s)(({auth:[{token:t}],page:[s]})=>{const{url:r}=s,n=new URL(o.baseURI);if(r.pathname!==n.pathname)return;const{feed:c}=s.get(u);"/personal-feed"===c&&(t||a.with(u,{}).replace().catch(e))})})}};O=n([a(["feed-toggle",l],m({active:"active"}),i())],O);let x=class{constructor(e){this.request={};const t=e.get(f);e.whenOn(e=>{t.read.tillOff(e)(e=>{this.request=e.get(u)})})}};n([b()],x.prototype,"request",void 0),x=n([a(["feed",l])],x);let _=class{};_=n([a(["home",l],{feature:{needs:[j,x,w,O,h,d]}})],_),g.load(_);//# sourceMappingURL=main.44caa842.js.map
