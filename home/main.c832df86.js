import{c as e}from"../js/core/main.9847b445.js";import{_ as t}from"../js/helpers.e1623395.js";import{H as s,N as r,A as o,m as a}from"../js/wesib/generic.36801613.js";import{S as n,R as c,C as i,B as p}from"../js/wesib/wesib.1ebc214d.js";import{C as d}from"../js/core.10059585.js";import{F as m,a as j}from"../js/core/feed.ff2da7aa.js";import{L as f}from"../js/core/loader.430f4736.js";import{s as h,y as l,i as u}from"../js/proc7ts/fun-events.0c993baf.js";import{P as g,R as b}from"../js/render-feed.decorator.7cc257b7.js";import{n as v}from"../js/proc7ts/primitives.7b24aae7.js";import{b as C}from"../js/core/auth.d58e7713.js";import"../js/core/layout.f26065db.js";import"../js/frontmeans/namespace-aliaser.9467f14d.js";import"../js/frontmeans/dom-events.ba8d072f.js";import"../js/proc7ts/supply.9762ee6d.js";import"../js/frontmeans/input-aspects.552a677b.js";import"../js/frontmeans/render-scheduler.6f331202.js";import"../js/proc7ts/push-iterator.ccd51d52.js";import"../js/proc7ts/call-thru.f4f68410.js";import"../js/proc7ts/delta-set.d5d9e832.js";import"../js/proc7ts/context-values.5140e67e.js";import"../js/hatsy/http-header-value.851567fb.js";import"../js/proc7ts/workbench.dbc8e30b.js";import"../js/frontmeans/httongue.6b868a5b.js";import"../js/core/api.e687a690.js";import"../js/core/util.509be545.js";import"../js/article-buttons-support.feature.68c57cb6.js";import"../js/current-article.228ecf92.js";import"../js/core/articles.1a8d5347.js";import"../js/lib/dompurify.f5eadf9f.js";import"../js/lib/marked.9d494571.js";let x=class{constructor(e){this._context=e,this.tags=[];const t=this._context.get(m),s=this._context.get(r);e.whenConnected((()=>{s.read.do(h(e))((e=>this.page=e)),t.tags.do(l(e))(((...e)=>this.tags=e))}))}render(){const{document:e}=this._context.get(p),t=e.createRange(),{contentRoot:s}=this._context;return t.selectNodeContents(s),t.setStartAfter(s.childNodes[s.childNodes.length-1]),()=>{if(t.deleteContents(),!this.page)return;const s=this._context.get(r),o=e.createDocumentFragment(),a=this.page.get(g);this.tags.forEach((t=>{const r=s.with(g,{...a,tag:t,feed:void 0,offset:0}).pretend();if(r){const s=o.appendChild(e.createElement("a"));s.href=r.url.href,s.innerText=t}})),t.insertNode(o)}}};t([n()],x.prototype,"tags",void 0),t([n()],x.prototype,"page",void 0),t([c()],x.prototype,"render",null),x=t([i(["feed-tags",d],s())],x);let y=class{constructor(e){this._context=e,this.request={};const{document:t}=e.get(p),s=e.get(r),o=e.get(C);e.whenConnected((()=>{u({auth:o.authentication,page:s}).do(h(e))((({auth:[{token:e}],page:[r]})=>{const{url:o}=r,a=new URL(t.baseURI);if(o.pathname!==a.pathname)return;const n=this.request=r.get(g),{feed:c}=n;"/personal-feed"===c&&(e||s.with(g,{}).replace().catch(v))}))}))}render(){const e=this._context.get(r),{document:t}=this._context.get(p),{element:s}=this._context,o=s.querySelector("ul"),a=t.createRange();return a.setStartAfter(o.appendChild(t.createComment("[TAG["))),a.setEndBefore(o.appendChild(t.createComment("]TAG]"))),()=>{a.deleteContents();const{tag:s}=this.request;if(!s)return;const r=e.with(g,{tag:s}).pretend();if(!r)return;const o=t.createElement("li");o.className="nav-item";const n=o.appendChild(t.createElement("a"));n.className="nav-link",n.innerText=`#${s}`,n.setAttribute("href",r.url.hash),a.insertNode(o)}}};t([n()],y.prototype,"request",void 0),t([c()],y.prototype,"render",null),y=t([i(["feed-toggle",d],o({active:"active"}),s())],y);let w=class{constructor(e){this.request={};const t=e.get(r);e.whenConnected((()=>{t.read.do(h(e))((e=>{this.request=e.get(g)}))}))}};t([b()],w.prototype,"request",void 0),w=t([i(["feed",d])],w);let _=class{};_=t([i(["home",d],{feature:{needs:[j,w,x,y,f,a]}})],_),e.load(_);//# sourceMappingURL=main.c832df86.js.map
