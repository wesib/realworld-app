{"version":3,"file":"main.b1c119e1.js","sources":["../../src/pages/home/page-feed-param.ts","../../src/pages/home/feed-tags.component.ts","../../src/pages/home/feed-toggle.component.ts","../../src/pages/home/article-preview.component.ts","../../src/pages/home/feed-article-list.ts","../../src/pages/home/article-list.component.ts","../../src/pages/home/feed-pager.component.ts","../../src/pages/home/feed.component.ts","../../src/pages/home/home.component.ts","../../src/pages/home/index.ts"],"sourcesContent":["import { Page, PageHashURLParam, PageParam } from '@wesib/generic';\nimport { FeedRequest, feedRequestSearchParams } from '../../common/articles/feed-request';\n\nclass PageFeedParam$ extends PageParam<FeedRequest, FeedRequest> {\n\n  create(page: Page, input: FeedRequest): PageParam.Handle<FeedRequest, FeedRequest> {\n\n    const handle = this.byDefault(page);\n\n    handle.put(input);\n\n    return handle;\n  }\n\n  byDefault(page: Page): PageParam.Handle<FeedRequest, FeedRequest> {\n    return {\n      get() {\n\n        const { searchParams: params, pathname } = page.get(PageHashURLParam);\n\n        return {\n          feed: pathname === '/personal-feed' ? pathname : undefined,\n          tag: params.get('tag') || undefined,\n          author: params.get('author') || undefined,\n          favorited: params.get('favorited') || undefined,\n          limit: parseInt(params.get('limit') || '', 10) || undefined,\n          offset: parseInt(params.get('offset') || '', 10) || undefined,\n        };\n      },\n      put(value) {\n\n        const { feed } = value;\n        const url = new URL(page.get(PageHashURLParam).href);\n\n        url.pathname = feed === '/personal-feed' ? feed : '';\n\n        const searchParams = feedRequestSearchParams(value).toString();\n\n        url.search = searchParams ? '?' + searchParams : '';\n\n        page.put(PageHashURLParam, url);\n      },\n    };\n  }\n\n}\n\nexport const PageFeedParam: PageParam.WithDefaults<FeedRequest, FeedRequest> = new PageFeedParam$();\n","import { HandleNavLinks, Navigation, Page } from '@wesib/generic';\nimport { BootstrapWindow, Component, ComponentContext, ElementRender, Render, StateProperty } from '@wesib/wesib';\nimport { Conduit__NS } from '../../common';\nimport { FeedService } from '../../common/articles';\nimport { PageFeedParam } from './page-feed-param';\n\n@Component(\n    ['feed-tags', Conduit__NS],\n    HandleNavLinks(),\n)\nexport class FeedTagsComponent {\n\n  @StateProperty()\n  private tags: string[] = [];\n\n  @StateProperty()\n  private page?: Page;\n\n  constructor(private readonly _context: ComponentContext) {\n\n    const feedService = this._context.get(FeedService);\n    const navigation = this._context.get(Navigation);\n\n    _context.whenOn(supply => {\n      navigation.read.tillOff(supply)(page => this.page = page);\n      feedService.tags().tillOff(supply)((...tags) => this.tags = tags);\n    });\n  }\n\n  @Render()\n  render(): ElementRender {\n\n    const { document } = this._context.get(BootstrapWindow);\n    const range = document.createRange();\n    const { contentRoot }: { contentRoot: Element } = this._context;\n\n    range.selectNodeContents(contentRoot);\n    range.setStartAfter(contentRoot.childNodes[contentRoot.childNodes.length - 1]);\n\n    return () => {\n      range.deleteContents();\n      if (!this.page) {\n        return;\n      }\n\n      const navigation = this._context.get(Navigation);\n      const fragment = document.createDocumentFragment();\n      const request = this.page.get(PageFeedParam);\n\n      this.tags.forEach(tag => {\n\n        const target = navigation.with(PageFeedParam, { ...request, tag, offset: 0 }).pretend();\n\n        if (target) {\n\n          const a = fragment.appendChild(document.createElement('a'));\n\n          a.href = target.url.href;\n          a.innerText = tag;\n        }\n      });\n\n      range.insertNode(fragment);\n    };\n  }\n\n}\n","import { ActivateNavLink, HandleNavLinks, Navigation } from '@wesib/generic';\nimport { BootstrapWindow, Component, ComponentContext } from '@wesib/wesib';\nimport { noop } from 'call-thru';\nimport { afterAll } from 'fun-events';\nimport { Conduit__NS } from '../../common';\nimport { AuthService } from '../../common/auth';\nimport { PageFeedParam } from './page-feed-param';\n\n@Component(\n    ['feed-toggle', Conduit__NS],\n    ActivateNavLink({ active: 'active' }),\n    HandleNavLinks(),\n)\nexport class FeedToggleComponent {\n\n  constructor(context: ComponentContext) {\n\n    const { document } = context.get(BootstrapWindow);\n    const navigation = context.get(Navigation);\n    const authService = context.get(AuthService);\n\n    context.whenOn(supply => {\n      afterAll({\n        auth: authService.authentication,\n        page: navigation,\n      }).tillOff(supply)(\n          ({\n            auth: [{ token }],\n            page: [page],\n          }) => {\n\n            const { url } = page;\n            const baseURL = new URL(document.baseURI);\n\n            if (url.pathname !== baseURL.pathname) {\n              return; // Not a home page\n            }\n\n            const { feed } = page.get(PageFeedParam);\n\n            if (feed !== '/personal-feed') {\n              return; // Global feed\n            }\n            if (!token /* not authenticated */) {\n              // Redirect to global feed\n              navigation.with(PageFeedParam, {}).replace().catch(noop);\n            }\n          },\n      );\n    });\n  }\n\n}\n","import { HandleNavLinks, HierarchyContext } from '@wesib/generic';\nimport { Component, ComponentContext, DomProperty, ElementRender, Render } from '@wesib/wesib';\nimport { trackValue } from 'fun-events';\nimport { Conduit__NS } from '../../common';\nimport { escapeHtml } from '../../common/util';\nimport { ArticleMetaSupport } from '../article/article-meta-support.feature';\nimport { CurrentArticle } from '../article/current-article';\n\n@Component(\n    ['article-preview', Conduit__NS],\n    {\n      feature: {\n        needs: [\n          ArticleMetaSupport,\n        ],\n      },\n    },\n    HandleNavLinks({\n      href(event) {\n\n        let target = event.target as Element;\n\n        for (;;) {\n\n          const href = target.getAttribute('href');\n\n          if (href != null) {\n            return href;\n          }\n\n          const { parentNode } = target;\n\n          if (!parentNode) {\n            return;\n          }\n          target = parentNode as Element;\n        }\n      },\n    }),\n)\nexport class ArticlePreviewComponent {\n\n  private readonly _article = trackValue<CurrentArticle>({});\n\n  constructor(private readonly _context: ComponentContext) {\n\n    const hierarchy = _context.get(HierarchyContext);\n\n    _context.whenOn(supply => {\n\n      const off = hierarchy.provide({ a: CurrentArticle, is: this._article.read });\n\n      supply.whenOff(off);\n    });\n  }\n\n  get article(): CurrentArticle {\n    return this._article.it;\n  }\n\n  @DomProperty({ propertyKey: 'feedArticle' })\n  set article(value: CurrentArticle) {\n    this._article.it = value;\n  }\n\n  @Render({ offline: true })\n  render(): ElementRender | void {\n    if (!this.article.slug) {\n      return;\n    }\n\n    const content = this._context.contentRoot as Element;\n    const postURL = `article/#/${encodeURIComponent(this.article.slug)}`;\n\n    content.innerHTML = `\n<div class=\"post-meta\">\n<conduit-article-author></conduit-article-author>\n<conduit-favorite-post></conduit-favorite-post>\n</div>\n<a href=\"${postURL}\" class=\"preview-link\">\n<h1>${escapeHtml(this.article.title)}</h1>\n<p class=\"post-content\">${escapeHtml(this.article.description)}</p>\n<span>Read more...</span>\n</a>\n`;\n  }\n\n}\n","import { SingleContextUpKey, SingleContextUpRef } from 'context-values/updatable';\nimport { ArticleList } from '../../common/articles';\n\nexport type FeedArticleList = ArticleList;\n\nexport const FeedArticleList: SingleContextUpRef<FeedArticleList> = (\n    new SingleContextUpKey<FeedArticleList>(\n        'feed-article-list',\n        {\n          byDefault: () => ({ articles: [], articlesCount: 0 }),\n        },\n    )\n);\n","import { HierarchyContext } from '@wesib/generic';\nimport { BootstrapWindow, Component, ComponentContext, ElementRender, Render, StateProperty } from '@wesib/wesib';\nimport { Conduit__NS } from '../../common';\nimport { ArticlePreviewComponent } from './article-preview.component';\nimport { FeedArticleList } from './feed-article-list';\n\n@Component(\n    ['article-list', Conduit__NS],\n    {\n      feature: {\n        needs: ArticlePreviewComponent,\n      },\n    },\n)\nexport class ArticleListComponent {\n\n  @StateProperty()\n  articles: FeedArticleList = { articles: [], articlesCount: 0 };\n\n  constructor(private readonly _context: ComponentContext) {\n\n    const hierarchy = _context.get(HierarchyContext);\n\n    _context.whenOn(supply => {\n      hierarchy.get(FeedArticleList).tillOff(supply)(list => this.articles = list);\n    });\n  }\n\n  @Render()\n  render(): ElementRender {\n\n    const document = this._context.get(BootstrapWindow).document;\n    const range = document.createRange();\n\n    range.selectNodeContents(this._context.contentRoot);\n\n    return () => {\n      range.deleteContents();\n      if (!this.articles.articlesCount) {\n        return;\n      }\n\n      const fragment = document.createDocumentFragment();\n\n      this.articles.articles.forEach(article => {\n\n        const element: any = fragment.appendChild(document.createElement('conduit-article-preview'));\n\n        element.feedArticle = article;\n      });\n\n      range.insertNode(fragment);\n    };\n  }\n\n}\n","import { HierarchyContext, Navigation } from '@wesib/generic';\nimport { Component, ComponentContext } from '@wesib/wesib';\nimport { afterAll } from 'fun-events';\nimport { Conduit__NS } from '../../common';\nimport { PagingInfo, RenderPager } from '../../generic/pager';\nimport { FeedArticleList } from './feed-article-list';\nimport { PageFeedParam } from './page-feed-param';\n\n@Component(['feed-pager', Conduit__NS])\nexport class FeedPagerComponent {\n\n  private _feedPaging: PagingInfo = {};\n\n  constructor(context: ComponentContext) {\n\n    const hierarchy = context.get(HierarchyContext);\n    const navigation = context.get(Navigation);\n\n    context.whenOn(supply => {\n      afterAll({\n        param: navigation.read.keep.thru_(page => page.get(PageFeedParam)),\n        list: hierarchy.get(FeedArticleList),\n      }).tillOff(supply)(\n          ({\n            param: [param],\n            list: [{ articlesCount }],\n          }) => {\n\n            const { limit = 20, offset = 0 } = param;\n\n            this.feedPaging = {\n              totalPages: Math.ceil(articlesCount / limit),\n              currentPage: Math.floor(offset / limit),\n              pageHref(page: number): string {\n                return navigation.with(\n                    PageFeedParam,\n                    { ...param, offset: limit * page },\n                ).pretend()?.url.href || '';\n              },\n            };\n          },\n      );\n    });\n  }\n\n  @RenderPager()\n  get feedPaging(): PagingInfo {\n    return this._feedPaging;\n  }\n\n  set feedPaging(value: PagingInfo) {\n    this._feedPaging = value;\n  }\n\n}\n","import { HierarchyContext, Navigation } from '@wesib/generic';\nimport { BootstrapWindow, Component, ComponentContext, ElementRender, Render } from '@wesib/wesib';\nimport { nextOnEvent, trackValue } from 'fun-events';\nimport { Conduit__NS } from '../../common';\nimport { ApiResponse } from '../../common/api';\nimport { ArticleList, FeedRequest, feedRequestsEqual, FeedService } from '../../common/articles';\nimport { ApiErrorGenerator } from '../../common/input';\nimport { ArticleListComponent } from './article-list.component';\nimport { FeedArticleList } from './feed-article-list';\nimport { FeedPagerComponent } from './feed-pager.component';\nimport { PageFeedParam } from './page-feed-param';\n\n@Component(\n    ['feed', Conduit__NS],\n    {\n      feature: {\n        needs: [\n          ArticleListComponent,\n          FeedPagerComponent,\n        ],\n      },\n    },\n)\nexport class FeedComponent {\n\n  private readonly _request = trackValue<FeedRequest>({});\n  private _response = trackValue<ApiResponse<ArticleList>>();\n\n  constructor(private readonly _context: ComponentContext) {\n\n    const navigation = _context.get(Navigation);\n    const feedService = _context.get(FeedService);\n\n    this._response.on(\n        (newResponse, oldResponse) => _context.updateState('response', newResponse, oldResponse),\n    );\n    this._context.get(HierarchyContext).provide({\n      a: FeedArticleList,\n      is: this._response.read.keep.thru_(\n          response => response?.ok\n              ? response.body\n              : { articles: [], articlesCount: 0 },\n      ),\n    });\n    _context.whenOn(supply => {\n      navigation.read.tillOff(supply)(page => {\n\n        const request = page.get(PageFeedParam);\n        const prevRequest = this._request.it;\n\n        if (!feedRequestsEqual(request, prevRequest)) {\n          this._request.it = request;\n        }\n      });\n      this._request.read\n          .tillOff(supply)\n          .thru_(\n              request => {\n                this._response.it = undefined;\n                return nextOnEvent(feedService.articles(request));\n              },\n          )(response => this._response.it = response);\n    });\n  }\n\n  @Render()\n  render(): ElementRender {\n\n    const { contentRoot }: { contentRoot: Node } = this._context;\n    const document = this._context.get(BootstrapWindow).document;\n    const errorGen = this._context.get(ApiErrorGenerator);\n    const list = contentRoot.appendChild(document.createElement('conduit-article-list'));\n    const pager = contentRoot.appendChild(document.createElement('conduit-feed-pager'));\n    const range = document.createRange();\n\n    range.setStartAfter(list);\n    range.setEndBefore(pager);\n\n    return () => {\n      range.deleteContents();\n\n      const response = this._response.it;\n\n      if (!response) {\n        range.insertNode(displayProgress());\n      } else if (!response.ok) {\n        range.insertNode(displayError(response.errors));\n      }\n    };\n\n    function displayProgress(): Element {\n      return document.createElement('conduit-loader');\n    }\n\n    function displayError(errors: ApiResponse.Errors): Element {\n\n      const errorList = errorGen(errors);\n\n      if (errorList) {\n        return errorList;\n      }\n\n      const loader = document.createElement('conduit-loader');\n\n      loader.setAttribute('load-error', 'Failed to load articles');\n\n      return loader;\n    }\n\n  }\n\n}\n","import { PageHashURLSupport } from '@wesib/generic';\nimport { Component } from '@wesib/wesib';\nimport { Conduit__NS } from '../../common';\nimport { FeedSupport } from '../../common/articles';\nimport { LoaderComponent } from '../../generic/loader';\nimport { FeedTagsComponent } from './feed-tags.component';\nimport { FeedToggleComponent } from './feed-toggle.component';\nimport { FeedComponent } from './feed.component';\n\n@Component(\n    ['home', Conduit__NS],\n    {\n      feature: {\n        needs: [\n          FeedSupport,\n          FeedComponent,\n          FeedTagsComponent,\n          FeedToggleComponent,\n          LoaderComponent,\n          PageHashURLSupport,\n        ],\n      },\n    },\n)\nexport class HomeComponent {\n}\n","import { conduitContext } from '../../common/main';\nimport { HomeComponent } from './home.component';\n\nconduitContext.load(HomeComponent);\n"],"names":["PageFeedParam","PageParam","[object Object]","page","input","handle","this","byDefault","put","searchParams","params","pathname","get","PageHashURLParam","feed","undefined","tag","author","favorited","limit","parseInt","offset","value","url","URL","href","feedRequestSearchParams","toString","search","FeedTagsComponent","_context","feedService","FeedService","navigation","Navigation","whenOn","supply","read","tillOff","tags","document","BootstrapWindow","range","createRange","contentRoot","selectNodeContents","setStartAfter","childNodes","length","deleteContents","fragment","createDocumentFragment","request","forEach","target","with","pretend","a","appendChild","createElement","innerText","insertNode","__decorate","StateProperty","Render","Component","Conduit__NS","HandleNavLinks","FeedToggleComponent","context","authService","AuthService","afterAll","auth","authentication","token","baseURL","baseURI","replace","catch","noop","ActivateNavLink","active","ArticlePreviewComponent","trackValue","hierarchy","HierarchyContext","off","provide","CurrentArticle","is","_article","whenOff","article","it","slug","content","postURL","encodeURIComponent","innerHTML","escapeHtml","title","description","DomProperty","propertyKey","offline","feature","needs","ArticleMetaSupport","event","getAttribute","parentNode","FeedArticleList","SingleContextUpKey","articles","articlesCount","ArticleListComponent","list","feedArticle","FeedPagerComponent","param","keep","thru_","feedPaging","totalPages","Math","ceil","currentPage","floor","_feedPaging","RenderPager","FeedComponent","_response","on","newResponse","oldResponse","updateState","response","ok","body","prevRequest","_request","feedRequestsEqual","nextOnEvent","errorGen","ApiErrorGenerator","pager","setEndBefore","errors","errorList","loader","setAttribute","displayError","HomeComponent","FeedSupport","LoaderComponent","PageHashURLSupport","conduitContext","load"],"mappings":"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"}