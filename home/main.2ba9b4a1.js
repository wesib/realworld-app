import{c as e}from"../js/core/main.65d7bafb.js";import{_ as t}from"../js/helpers.e1623395.js";import{d as s,N as r,A as o,g as a}from"../js/wesib/generic.2dcf3479.js";import{S as n,R as c,C as i,B as d}from"../js/wesib/wesib.8c9ee002.js";import{C as p}from"../js/core.10059585.js";import{a as m,F as f}from"../js/core/feed.aabbc2ee.js";import{L as j}from"../js/core/loader.9029aa45.js";import{s as h,F as l,i as u}from"../js/proc7ts/fun-events.2a5b87d8.js";import{P as g,R as b}from"../js/render-feed.decorator.17ebd0cc.js";import{n as v}from"../js/proc7ts/primitives.d6f0dd1c.js";import{b as C}from"../js/core/auth.97776b50.js";import"../js/core/layout.52c96865.js";import"../js/frontmeans/namespace-aliaser.9467f14d.js";import"../js/frontmeans/dom-events.fbc8d9ac.js";import"../js/frontmeans/input-aspects.453491d0.js";import"../js/frontmeans/render-scheduler.6f331202.js";import"../js/proc7ts/push-iterator.8feb4ef8.js";import"../js/proc7ts/call-thru.f4f68410.js";import"../js/proc7ts/delta-set.d5d9e832.js";import"../js/proc7ts/context-values.20584faa.js";import"../js/hatsy/http-header-value.851567fb.js";import"../js/proc7ts/workbench.03f3f31a.js";import"../js/frontmeans/httongue.6b868a5b.js";import"../js/core/api.e1bac610.js";import"../js/core/util.ed5e3b67.js";import"../js/article-buttons-support.feature.24f619fe.js";import"../js/current-article.5d42c2d4.js";import"../js/core/articles.dcb8de86.js";import"../js/lib/dompurify.f5eadf9f.js";import"../js/lib/marked.2adf5b72.js";let x=class{constructor(e){this._context=e,this.tags=[];const t=this._context.get(m),s=this._context.get(r);e.whenConnected((()=>{s.read.do(h(e))((e=>this.page=e)),t.tags.do(l(e))(((...e)=>this.tags=e))}))}render(){const{document:e}=this._context.get(d),t=e.createRange(),{contentRoot:s}=this._context;return t.selectNodeContents(s),t.setStartAfter(s.childNodes[s.childNodes.length-1]),()=>{if(t.deleteContents(),!this.page)return;const s=this._context.get(r),o=e.createDocumentFragment(),a=this.page.get(g);this.tags.forEach((t=>{const r=s.with(g,{...a,tag:t,feed:void 0,offset:0}).pretend();if(r){const s=o.appendChild(e.createElement("a"));s.href=r.url.href,s.innerText=t}})),t.insertNode(o)}}};t([n()],x.prototype,"tags",void 0),t([n()],x.prototype,"page",void 0),t([c()],x.prototype,"render",null),x=t([i(["feed-tags",p],s())],x);let w=class{constructor(e){this._context=e,this.request={};const{document:t}=e.get(d),s=e.get(r),o=e.get(C);e.whenConnected((()=>{u({auth:o.authentication,page:s}).do(h(e))((({auth:[{token:e}],page:[r]})=>{const{url:o}=r,a=new URL(t.baseURI);if(o.pathname!==a.pathname)return;const n=this.request=r.get(g),{feed:c}=n;"/personal-feed"===c&&(e||s.with(g,{}).replace().catch(v))}))}))}render(){const e=this._context.get(r),{document:t}=this._context.get(d),{element:s}=this._context,o=s.querySelector("ul"),a=t.createRange();return a.setStartAfter(o.appendChild(t.createComment("[TAG["))),a.setEndBefore(o.appendChild(t.createComment("]TAG]"))),()=>{a.deleteContents();const{tag:s}=this.request;if(!s)return;const r=e.with(g,{tag:s}).pretend();if(!r)return;const o=t.createElement("li");o.className="nav-item";const n=o.appendChild(t.createElement("a"));n.className="nav-link",n.innerText=`#${s}`,n.setAttribute("href",r.url.hash),a.insertNode(o)}}};t([n()],w.prototype,"request",void 0),t([c()],w.prototype,"render",null),w=t([i(["feed-toggle",p],o({active:"active"}),s())],w);let _=class{constructor(e){this.request={};const t=e.get(r);e.whenConnected((()=>{t.read.do(h(e))((e=>{this.request=e.get(g)}))}))}};t([b()],_.prototype,"request",void 0),_=t([i(["feed",p])],_);let y=class{};y=t([i(["home",p],{feature:{needs:[f,_,x,w,j,a]}})],y),e.load(y);//# sourceMappingURL=main.2ba9b4a1.js.map
