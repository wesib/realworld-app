import{n as e}from"../js/lib/call-thru.00f7427a.js";import{e as t}from"../js/lib/fun-events.a21352be.js";import{p as s,R as o,C as r,B as a}from"../js/wesib/wesib.cad21c89.js";import{_ as n}from"../js/helpers.920c7f83.js";import{a as c}from"../js/core/auth.85b976b9.js";import{a as i,N as f,A as l,d}from"../js/wesib/generic.8e8f15be.js";import{C as h}from"../js/core.f6946162.js";import{L as p}from"../js/core/loader.d8c7b04b.js";import{c as g}from"../js/core/main.8dd7027f.js";import{a as m,F as j}from"../js/core/feed.e229f29c.js";import{P as u,R as b}from"../js/render-feed.decorator.635cf2e5.js";let w=class{constructor(e){this._context=e,this.tags=[];const t=this._context.get(m),s=this._context.get(f);e.whenOn(e=>{s.read.tillOff(e)(e=>this.page=e),t.tags().tillOff(e)((...e)=>this.tags=e)})}render(){const{document:e}=this._context.get(a),t=e.createRange(),{contentRoot:s}=this._context;return t.selectNodeContents(s),t.setStartAfter(s.childNodes[s.childNodes.length-1]),()=>{if(t.deleteContents(),!this.page)return;const s=this._context.get(f),o=e.createDocumentFragment(),r=this.page.get(u);this.tags.forEach(t=>{const a=s.with(u,Object.assign(Object.assign({},r),{tag:t,offset:0})).pretend();if(a){const s=o.appendChild(e.createElement("a"));s.href=a.url.href,s.innerText=t}}),t.insertNode(o)}}};n([s()],w.prototype,"tags",void 0),n([s()],w.prototype,"page",void 0),n([o()],w.prototype,"render",null),w=n([r(["feed-tags",h],i())],w);let O=class{constructor(s){const{document:o}=s.get(a),r=s.get(f),n=s.get(c);s.whenOn(s=>{t({auth:n.authentication,page:r}).tillOff(s)(({auth:[{token:t}],page:[s]})=>{const{url:a}=s,n=new URL(o.baseURI);if(a.pathname!==n.pathname)return;const{feed:c}=s.get(u);"/personal-feed"===c&&(t||r.with(u,{}).replace().catch(e))})})}};O=n([r(["feed-toggle",h],l({active:"active"}),i())],O);let x=class{constructor(e){this.request={};const t=e.get(f);e.whenOn(e=>{t.read.tillOff(e)(e=>{this.request=e.get(u)})})}};n([b()],x.prototype,"request",void 0),x=n([r(["feed",h])],x);let _=class{};_=n([r(["home",h],{feature:{needs:[j,x,w,O,p,d]}})],_),g.load(_);//# sourceMappingURL=main.0b615716.js.map
