import{c as e}from"../js/core/main.0c31cba3.js";import{_ as t}from"../js/helpers.e1623395.js";import{g as s,N as r,A as o,m as a}from"../js/wesib/generic.e05bd5a6.js";import{S as n,R as c,C as i,B as p}from"../js/wesib/wesib.289eabae.js";import{C as d}from"../js/core.10059585.js";import{F as m,a as j}from"../js/core/feed.6cf2400c.js";import{L as f}from"../js/core/loader.6a8fc6bd.js";import{s as h,H as l,i as u}from"../js/proc7ts/fun-events.8f536596.js";import{P as g,R as b}from"../js/render-feed.decorator.ce8ac001.js";import{n as v}from"../js/proc7ts/primitives.38e5298b.js";import{b as C}from"../js/core/auth.98c2c25d.js";import"../js/core/layout.53939d89.js";import"../js/frontmeans/namespace-aliaser.9467f14d.js";import"../js/frontmeans/dom-events.bc847677.js";import"../js/proc7ts/supply.9762ee6d.js";import"../js/frontmeans/input-aspects.e72f213f.js";import"../js/frontmeans/render-scheduler.6f331202.js";import"../js/proc7ts/push-iterator.039597c5.js";import"../js/proc7ts/call-thru.f4f68410.js";import"../js/proc7ts/delta-set.d5d9e832.js";import"../js/proc7ts/context-values.cc32b8c5.js";import"../js/hatsy/http-header-value.851567fb.js";import"../js/proc7ts/workbench.31425b55.js";import"../js/frontmeans/httongue.6b868a5b.js";import"../js/core/api.48f5edea.js";import"../js/core/util.946913f9.js";import"../js/article-buttons-support.feature.4c75d087.js";import"../js/current-article.e2211b9a.js";import"../js/core/articles.bc0dc78d.js";import"../js/lib/dompurify.f5eadf9f.js";import"../js/lib/marked.9d494571.js";let x=class{constructor(e){this._context=e,this.tags=[];const t=this._context.get(m),s=this._context.get(r);e.whenConnected((()=>{s.read.do(h(e))((e=>this.page=e)),t.tags.do(l(e))(((...e)=>this.tags=e))}))}render(){const{document:e}=this._context.get(p),t=e.createRange(),{contentRoot:s}=this._context;return t.selectNodeContents(s),t.setStartAfter(s.childNodes[s.childNodes.length-1]),()=>{if(t.deleteContents(),!this.page)return;const s=this._context.get(r),o=e.createDocumentFragment(),a=this.page.get(g);this.tags.forEach((t=>{const r=s.with(g,{...a,tag:t,feed:void 0,offset:0}).pretend();if(r){const s=o.appendChild(e.createElement("a"));s.href=r.url.href,s.innerText=t}})),t.insertNode(o)}}};t([n()],x.prototype,"tags",void 0),t([n()],x.prototype,"page",void 0),t([c()],x.prototype,"render",null),x=t([i(["feed-tags",d],s())],x);let w=class{constructor(e){this._context=e,this.request={};const{document:t}=e.get(p),s=e.get(r),o=e.get(C);e.whenConnected((()=>{u({auth:o.authentication,page:s}).do(h(e))((({auth:[{token:e}],page:[r]})=>{const{url:o}=r,a=new URL(t.baseURI);if(o.pathname!==a.pathname)return;const n=this.request=r.get(g),{feed:c}=n;"/personal-feed"===c&&(e||s.with(g,{}).replace().catch(v))}))}))}render(){const e=this._context.get(r),{document:t}=this._context.get(p),{element:s}=this._context,o=s.querySelector("ul"),a=t.createRange();return a.setStartAfter(o.appendChild(t.createComment("[TAG["))),a.setEndBefore(o.appendChild(t.createComment("]TAG]"))),()=>{a.deleteContents();const{tag:s}=this.request;if(!s)return;const r=e.with(g,{tag:s}).pretend();if(!r)return;const o=t.createElement("li");o.className="nav-item";const n=o.appendChild(t.createElement("a"));n.className="nav-link",n.innerText=`#${s}`,n.setAttribute("href",r.url.hash),a.insertNode(o)}}};t([n()],w.prototype,"request",void 0),t([c()],w.prototype,"render",null),w=t([i(["feed-toggle",d],o({active:"active"}),s())],w);let y=class{constructor(e){this.request={};const t=e.get(r);e.whenConnected((()=>{t.read.do(h(e))((e=>{this.request=e.get(g)}))}))}};t([b()],y.prototype,"request",void 0),y=t([i(["feed",d])],y);let _=class{};_=t([i(["home",d],{feature:{needs:[j,y,x,w,f,a]}})],_),e.load(_);//# sourceMappingURL=main.9c0c87e1.js.map
