function t({$:t="raw",n:e,t:n,v:i,x:r=[],p:s={},pl:u=[]}){return e&&(s[e]={$:t,n:e,v:i,x:[],p:{},pl:[]}),{$:t,n:e,t:n,v:i,x:r,p:s,pl:u}}function e({p:t,pl:e},n){const i=n.n||n.v,r=t[i];(!r||!r.n&&n.n)&&(t[i]=n),e.push(n)}const n=()=>!1,i=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun), \d\d (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) \d\d\d\d \d\d:\d\d:\d\d GMT/;function r({dateTime:t}){return t?s:n}function s(t,e){return t.s=t.s.substring(t.i),t.i=0,!!i.test(t.s)&&(e(t.s.substring(t.i,t.i+=29)),!0)}function u({delimiterOf:t}){return e=>{const n=e.s[e.i];return e.d=t(n),n}}function d(e,{named:i=!0,tagged:s=!0,extra:o=!0,next:f=u(e)}={}){const l=function({delimiterOf:t}){return(e,n)=>{if(!(262144&t(e.s[e.i])))return!1;let i="";for(++e.i;e.i<e.s.length;){const n=e.s[e.i++];if(524288&t(n))break;i+=n}return n(i),!0}}(e),c=r(e),a=function({delimiterOf:t}){return(e,n)=>{let i="";for(++e.i;e.i<e.s.length;++e.i){const r=e.s[e.i];if("\\"===r){i+=e.s[++e.i]||r}else{if(65536&t(r))return++e.i,void n(i);i+=r}}n(i)}}(e),g=o?d(e,{next:f,tagged:!1,named:!1,extra:!1}):n;return(e,n)=>{let r,u,d,o="",m="raw";for(;e.i<e.s.length;){const t=f(e);if(e.d){if(12&e.d)break;if(null==u){if(16&e.d){u=o?"":t,++e.i;continue}if(65536&e.d){!s&&o||a(e,(t=>{o?(m="tagged-string",r=o):m="quoted-string",o="",u=t}));break}if(!o&&l(e,(t=>{m="angle-bracketed-string",u=t})))break;u=o,o=""}else{if(65536&e.d){!s&&u||a(e,(t=>{u?(m="tagged-string",r=u):m="quoted-string",u=t}));break}if(!u&&l(e,(t=>{m="angle-bracketed-string",u=t})))break}}if(null==u){if(!o&&c(e,(t=>u=t))){m="date-time";break}i?o+=t:u=t}else{if(!u&&c(e,(t=>u=t))){m="date-time";break}u+=t}++e.i}if(null==u){if(!o)return!1;d=t({$:m,v:o})}else d=t({$:m,n:o||void 0,t:r,v:u});for(;g(e,(t=>d.x.push(t))););return n(d),!0}}function o({delimiterOf:t}){return e=>{let n=e.s[e.i];return"\\"!==n?(e.d=t(n),n):(++e.i,e.i<e.s.length?(n=e.s[e.i],e.d=t(n)?1:0):e.d=1,n)}}function f({delimiterOf:t}){return e=>{const n=e.i;do{const n=e.s[e.i];if(!(2&t(n)))break;e.i++}while(e.i<e.s.length);return e.i!==n}}function l(t,e={}){const{delimiterOf:n}=t,i=f(t),r=d(t,{...e,tagged:!1});return(t,e)=>!!(8&n(t.s[t.i]))&&(++t.i,i(t),r(t,e))}const c={" ":7,"\t":7,",":5,";":9,'"':65569,"\\":33,"<":262145,">":524289,"=":17,"(":1,")":1,"/":1,":":1,"?":1,"@":1,"[":1,"]":1,"{":1,"}":1};function a({delimit:t,dateTime:e}={}){const n=t?{...c,...t}:c;return{dateTime:e,delimiterOf:t=>n[t]||(t>="\0"&&t<=" "||"\x7f"===t?1:0)}}const g=a(),m=a({delimit:{":":17,"(":131105,")":37," ":3,"\t":3,"=":1,",":1}});function h(i){const r=i?a(i):g,s=function(t){const{delimiterOf:e}=t,n=f(t);return t=>!!(4&e(t.s[t.i]))&&(t.i++,n(t),!0)}(r),u=l(r),c=d(r),h=(null==i?void 0:i.comments)?function(n){const{delimiterOf:i}=n,r=f(n),s={next:o(n)},u=d(n,s),c=l(n,s);return(n,s)=>{if(!(131072&i(n.s[n.i])))return!1;let d;for(++n.i;r(n)||c(n,(n=>{d||(d=t({$:"raw",v:""})),e(d,n)}))||u(n,(t=>d=t)););return++n.i,s(d||t({$:"raw",v:""})),!0}}(m):n;return n=>{const i=[],r={i:0,s:n};for(;r.i<r.s.length&&(s(r)||u(r,(n=>{i.length||i.push(t({$:"raw",v:""})),e(i[i.length-1],n)}))||h(r,(t=>i.push(t)))||c(r,(t=>i.push(t)))););return i}}const p=h();function b(t){if(!t)return'""';const{delimiterOf:e}=g;let n,i=!1;for(let r=0;r<t.length;++r){const s=t[r],u=e(s);u?(32&u&&(n||(n=t.substring(0,r)),n+="\\"+s),i=!0):n&&(n+=s)}return i?`"${n||t}"`:t}export{p as a,b as h};//# sourceMappingURL=http-header-value.0845e903.js.map
