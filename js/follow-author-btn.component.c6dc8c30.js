import{_ as o}from"./helpers.e1623395.js";import{e as t}from"./frontmeans/httongue.6b868a5b.js";import{a as e}from"./wesib/generic.2dcf3479.js";import{S as r,R as s,C as a}from"./wesib/wesib.8c9ee002.js";import{C as n}from"./core.10059585.js";import{U as u,a as i}from"./core/users.8f3cdaa1.js";import{S as c}from"./proc7ts/context-values.20584faa.js";import{e as l,m}from"./proc7ts/fun-events.2a5b87d8.js";const f={},h=new c("current-user-profile",{byDefault:()=>f});function p(o){const t=l(o.do(m((o=>{if(null==o.username)return o;const e=o=>{t.it={...o,update:e}};return{...o,update:e}}))));return t}let d=class{constructor(o){this._context=o,this.author=f;const t=o.get(e),r=o.get(u);t.get(h)((o=>{this.author=o})),o.on("click")((()=>{const{author:o}=this;if(o.username){const t=!o.following;o.update({...o,following:t}),r.followUser(o.username,t)((t=>{this.author.username&&(t.ok?this.author.update(t.body):(this.author.update(o),console.error(`Failed to follow user ${o.username}`,t.errors)))}))}}))}render(){const{contentRoot:o,element:e}=this._context;return()=>{this.author.username?(e.className=this.author.following?"btn-secondary":"btn-outline-secondary",o.innerHTML=`<i class="ion-plus-round"></i> Follow ${t(this.author.username)}`):o.innerHTML=""}}};o([r()],d.prototype,"author",void 0),o([s()],d.prototype,"render",null),d=o([a(["follow-author-btn",n],{feature:{needs:i}})],d);export{h as C,d as F,p as c,f as n};//# sourceMappingURL=follow-author-btn.component.c6dc8c30.js.map
