import{S as o}from"./proc7ts/context-values.69c73302.js";import{g as t,h as e,m as r}from"./proc7ts/fun-events.f7c44dc9.js";import{S as s,R as n,C as a}from"./wesib/wesib.acbfb4f5.js";import{_ as u}from"./helpers.e1623395.js";import{a as i}from"./wesib/generic.5b4ac940.js";import{C as c}from"./core.c152f8fe.js";import{e as l}from"./frontmeans/httongue.193345e9.js";import{U as f,a as m}from"./core/users.ea939982.js";const h={},p=new o("current-user-profile",{byDefault:()=>h});function d(o){const s=t(e(o).do(r((o=>{if(null==o.username)return o;const t=o=>{s.it={...o,update:t}};return{...o,update:t}}))));return s}let b=class{constructor(o){this._context=o,this.author=h;const t=o.get(i),e=o.get(f);t.get(p)((o=>{this.author=o})),o.on("click")((()=>{const{author:o}=this;if(o.username){const t=!o.following;o.update({...o,following:t}),e.followUser(o.username,t)((t=>{this.author.username&&(t.ok?this.author.update(t.body):(this.author.update(o),console.error(`Failed to follow user ${o.username}`,t.errors)))}))}}))}render(){const{contentRoot:o,element:t}=this._context;return()=>{this.author.username?(t.className=this.author.following?"btn-secondary":"btn-outline-secondary",o.innerHTML=`<i class="ion-plus-round"></i> Follow ${l(this.author.username)}`):o.innerHTML=""}}};u([s()],b.prototype,"author",void 0),u([n()],b.prototype,"render",null),b=u([a(["follow-author-btn",c],{feature:{needs:m}})],b);export{p as C,b as F,d as c,h as n};//# sourceMappingURL=follow-author-btn.component.f7e7bfe7.js.map
