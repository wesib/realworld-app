import{d as e}from"./lib/context-values.d686e0c8.js";import{o as t,R as o,C as n,B as s,F as r}from"./wesib/wesib.84ff8eb8.js";import{_ as a}from"./helpers.920c7f83.js";import{a as i,b as c}from"./wesib/generic.643f46dc.js";import{C as l}from"./common.74dd5bad.js";const m=new e("current-article",{byDefault:()=>({})});let d=class{constructor(e){this._context=e,this.article={};const t=e.get(c);e.whenOn(e=>{t.get(m).tillOff(e)(e=>this.article=e)})}render(){const{document:e}=this._context.get(s),{contentRoot:t}=this._context,o=e.createDocumentFragment(),n=o.appendChild(e.createElement("a")),r=o.appendChild(e.createElement("div"));r.className="info";const a=r.appendChild(e.createElement("a"));a.className="author";const i=r.appendChild(e.createElement("time"));return i.className="date",t.appendChild(o),()=>{const e=this.article;let t="",o="",s="",r="",c="";if(e.slug){const{author:n}=e;t=`profile/#/${encodeURIComponent(n.username)}`,o=n.image?`<img src="${encodeURI(n.image)}"/>`:"",s=n.username,r=e.createdAt,l=new Date(e.createdAt),c=((new Date).getFullYear()===l.getFullYear()?p:h).format(l)}var l;n.href=t,n.innerHTML=o,a.href=t,a.innerText=s,i.innerText=c,r?i.setAttribute("datetime",r):i.removeAttribute("datetime")}}};a([t()],d.prototype,"article",void 0),a([o()],d.prototype,"render",null),d=a([n(["article-author",l],i())],d);const p=new Intl.DateTimeFormat("en-US",{month:"long",day:"numeric"}),h=new Intl.DateTimeFormat("en-US",{year:"numeric",month:"long",day:"numeric"});let u=class{constructor(e){this._context=e;const t=e.get(c);e.whenOn(e=>{t.get(m).tillOff(e)(e=>{this._post=e.slug?{favorited:e.favorited,favoritesCount:e.favoritesCount}:void 0})})}render(){const{contentRoot:e}=this._context,{document:t}=this._context.get(s),o=t.createElement("i");e.insertBefore(o,e.childNodes[0]);const n=e.appendChild(t.createElement("span"));return n.className="counter",()=>{o.className=this._post&&this._post.favorited?"ion-heart":"ion-ios-heart-outline",n.innerText=this._post&&this._post.favoritesCount?String(this._post.favoritesCount):"",e.className=this._post&&this._post.favorited?"btn-outline-primary":"btn-outline-secondary"}}};a([t()],u.prototype,"_post",void 0),a([o()],u.prototype,"render",null),u=a([n(["favorite-post",l])],u);let f=class{};f=a([r({needs:[d,u]})],f);export{f as A,m as C};//# sourceMappingURL=article-meta-support.feature.bcf3ee96.js.map
