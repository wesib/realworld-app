const e={by(e={}){let t;return{get node(){return e.node},get window(){return t||(t=e.window||e.node&&((s=e.node).ownerDocument||s).defaultView||window);var s},error(...t){e&&e.error?e.error(...t):console.error(...t)}}}};const t={by({schedule:e,replace:s=(()=>{})}){const r=[];return{schedule:e,add(e){r.push(e)},pull:()=>r.shift(),reset(){const r=t.by({schedule:e,replace:s});return s(r),r}}}},s=Symbol("scheduled-render-q");class r{constructor(e,t){this.q=e,this.schedule=this.doSchedule,this.ref=t||[this]}static by(e,t){return e[s]||(e[s]=new r(e,t))}add(e){this.q.add(e)}doSchedule(e){this.schedule=()=>{};const t={get config(){return e},postpone:e=>this.add(e)};this.q.schedule(()=>{const e=this.reset();e.suspend(),this.exec(t),e.resume()})}exec(e){for(;;){const t=this.q.pull();if(!t)break;t(e)}}reset(){return this.ref[0]=r.by(this.q.reset(),this.ref)}suspend(){this.schedule=e=>{this.scheduled=e,this.schedule=()=>{}}}resume(){this.scheduled?this.doSchedule(this.scheduled):this.schedule=this.doSchedule}}function n(t){return s=>{const n=e.by(s),o=r.by(t.newQueue(n)).ref;let u=[];return e=>{const[t]=u,[s]=o;if(t===s)u[1]=e;else{const t=u=[s,e];s.add(e=>{try{t[1]({get config(){return n},postpone(t){e.postpone(t)}})}catch(e){n.error(e)}})}s.schedule(n)}}}const o=new WeakMap;let u=n({newQueue({window:e}){const s=o.get(e);if(s)return s;const r=t.by({schedule:t=>e.requestAnimationFrame(t),replace:t=>o.set(e,t)});return o.set(e,r),r}});function c(e){return u(e)}export{c as n};//# sourceMappingURL=render-scheduler.4269239f.js.map
