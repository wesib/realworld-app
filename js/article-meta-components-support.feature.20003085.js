import{d as t}from"./lib/context-values.956fc686.js";import{o as e,R as o,C as n,B as s,F as a}from"./wesib/wesib.c03111fd.js";import{_ as r}from"./helpers.920c7f83.js";import{P as i,f as c,a as l,g as d,b as m,N as u}from"./wesib/generic.7ab3ed7c.js";import{C as p}from"./common.74dd5bad.js";import{f}from"./common/feed.b1b78f2a.js";const h=new class extends i{create(t,e){const o=this.byDefault(t);return o.put(e),o}byDefault(t){return{get(){const{searchParams:e,pathname:o}=t.get(c),n=o.indexOf("/",1),s=n<0?o.substring(1):o.substring(1,n);let a,r;return n>0&&"favorite"===o.substring(n+1)?r=s:a=s,{tag:e.get("tag")||void 0,author:a,favorited:r,limit:parseInt(e.get("limit")||"",10)||void 0,offset:parseInt(e.get("offset")||"",10)||void 0}},put(e){const{favorited:o,author:n=""}=e,s=new URL(t.get(c).href);s.pathname=o?`/${encodeURIComponent(o)}/favorite`:`/${encodeURIComponent(n)}`;const a=f(Object.assign(Object.assign({},e),{favorited:void 0,author:void 0})).toString();s.search=a?"?"+a:"",t.put(c,s)}}}},g=new t("current-article",{byDefault:()=>({})});let v=class{constructor(t){this._context=t,this.article={};const e=t.get(m);t.whenOn(t=>{e.get(g).tillOff(t)(t=>this.article=t)})}render(){const t=this._context.get(u),{document:e}=this._context.get(s),{contentRoot:o}=this._context,n=e.createDocumentFragment(),a=n.appendChild(e.createElement("a")),r=n.appendChild(e.createElement("div"));r.className="info";const i=r.appendChild(e.createElement("a"));i.className="author";const c=r.appendChild(e.createElement("time"));return c.className="date",o.appendChild(n),()=>{var e,o;const n=this.article;let s="",r="",l="",d="",m="";if(n.slug){const{author:a}=n;s=(null===(o=null===(e=t.with(h,{author:a.username}).pretend("profile/"))||void 0===e?void 0:e.url)||void 0===o?void 0:o.href)||"",r=a.image?`<img src="${encodeURI(a.image)}"/>`:"",l=a.username,d=n.createdAt,u=new Date(n.createdAt),m=((new Date).getFullYear()===u.getFullYear()?b:_).format(u)}var u;a.href=s,a.innerHTML=r,i.href=s,i.innerText=l,c.innerText=m,d?c.setAttribute("datetime",d):c.removeAttribute("datetime")}}};r([e()],v.prototype,"article",void 0),r([o()],v.prototype,"render",null),v=r([n(["article-author",p],{feature:{needs:d}},l())],v);const b=new Intl.DateTimeFormat("en-US",{month:"long",day:"numeric"}),_=new Intl.DateTimeFormat("en-US",{year:"numeric",month:"long",day:"numeric"});let C=class{constructor(t){this._context=t;const e=t.get(m);t.whenOn(t=>{e.get(g).tillOff(t)(t=>{this._post=t.slug?{favorited:t.favorited,favoritesCount:t.favoritesCount}:void 0})})}render(){const{contentRoot:t}=this._context,{document:e}=this._context.get(s),o=e.createElement("i");t.insertBefore(o,t.childNodes[0]);const n=t.appendChild(e.createElement("span"));return n.className="counter",()=>{o.className=this._post&&this._post.favorited?"ion-heart":"ion-ios-heart-outline",n.innerText=this._post&&this._post.favoritesCount?String(this._post.favoritesCount):"",t.className=this._post&&this._post.favorited?"btn-secondary":"btn-outline-secondary"}}};r([e()],C.prototype,"_post",void 0),r([o()],C.prototype,"render",null),C=r([n(["favorite-post",p])],C);let x=class{};x=r([a({needs:[v,C]})],x);export{x as A,g as C,h as P};//# sourceMappingURL=article-meta-components-support.feature.20003085.js.map
