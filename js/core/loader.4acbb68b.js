import"../proc7ts/fun-events.6756e60e.js";import{c as t}from"../proc7ts/namespace-aliaser.1d67b636.js";import{f as e,R as o,C as n,B as s,g as r,h as a,i as c,j as i}from"../wesib/wesib.21207b5a.js";import{_ as d}from"../helpers.920c7f83.js";import{C as m}from"../core.c852ba8c.js";import{A as l}from"./input.777c40d3.js";let p=class{constructor(t){this._context=t}render(){const{document:t}=this._context.get(s),e=t.createRange();return e.selectNodeContents(this._context.contentRoot),()=>{e.deleteContents(),null!=this.loadError&&e.insertNode(t.createTextNode(this.loadError))}}};function f(t={}){return r(({get:e,key:n})=>{const{comment:r=String(n),path:c}=t;return{componentDef:o({path:c}).As((function(){const t=a.of(this),{document:o}=t.get(s),{contentRoot:n}=t,c=n.appendChild(o.createComment(`[${r}[`)),i=n.appendChild(o.createComment(`]${r}]`)),d=o.createRange();return d.setStartAfter(c),d.setEndBefore(i),()=>{d.deleteContents();const t=e(this).call(this);if(t)if("string"==typeof t){const e=o.createElement("template");e.innerHTML=t,d.insertNode(e.content)}else d.insertNode(t)}}),n)}})}d([e("load-error")],p.prototype,"loadError",void 0),d([o()],p.prototype,"render",null),p=d([n(["loader",m])],p);const u=Symbol("load-status"),h=["loaded",m];function g(e={}){return r(({get:n,set:s,key:r})=>{const{path:d=[u,r],loaded:m=h,comment:g=String(r)}=e;let R;return{componentDef:c.all({feature:{needs:p},define(e){R=t.name(m,e.get(i))}},o({path:d}).As((function(){const{element:t}=a.of(this);return e=>{const o=n(this);o&&o.ok?e.postpone(()=>{t.classList.add(R)}):t.classList.remove(R)}}),r),f({path:d,comment:`LOADER(${g})`}).As((function(){return n(this)?void 0:document.createElement("conduit-loader")}),r),f({path:d,comment:`ERRORS(${g})`}).As((function(){const t=n(this);return t&&!t.ok?a.of(this).get(l)(t.errors):void 0}),r)),get:n,set(t,e){const o=n(t);s(t,e),a.of(t).updateState(d,e,o)}}})}export{p as L,f as R,g as a};//# sourceMappingURL=loader.4acbb68b.js.map
