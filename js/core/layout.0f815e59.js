import{D as e}from"../lib/fun-events.5ba1262f.js";import{c as t}from"../lib/namespace-aliaser.535f16ce.js";import{C as s,B as n,s as o,R as r,c as a,F as i}from"../wesib/wesib.1043e62e.js";import{_ as c}from"../helpers.920c7f83.js";import{n as l,a as m}from"./auth.d50771f1.js";import{I as d,A as u,a as p}from"../wesib/generic.8eaae636.js";import{C as f}from"../core.f6946162.js";import{L as h}from"./loader.ff943207.js";let g=class{};g=c([s(["main",f],{feature:{needs:h}},d({onResponse({context:e,response:t,range:s}){if(!t.ok){s.deleteContents();const{document:o}=e.get(n),r=o.createElement("conduit-loader");null!=t.ok&&r.setAttribute("load-error",`Error. ${String(t.error)}`),s.insertNode(r)}}}))],g);let C=class{constructor(e){this._context=e,this.user=l;const t=e.get(m);e.whenOn(e=>{t.user.tillOff(e)(e=>this.user=e).whenOff(()=>this.user=l)})}render(){const t=this._context.get(m),{document:s}=this._context.get(n),{element:o}=this._context,r=o.querySelector("ul"),a=s.createRange();return a.setStartAfter(r.appendChild(s.createComment("[USER-NAV["))),a.setEndBefore(r.appendChild(s.createComment("]USER-NAV]"))),()=>{a.deleteContents();const{username:s}=this.user;if(s){const n=i("","ion-log-out","");new e(n).on("click")(()=>{t.logout()}),a.insertNode(n),a.insertNode(i(s,"ion-person",`profile/#/${encodeURIComponent(s)}`))}};function i(e,t,n){const o=s.createElement("li");o.className="nav-item";const r=o.appendChild(s.createElement("a"));return r.className="nav-link",r.setAttribute("href",n),r.appendChild(s.createElement("i")).className=t,r.append(" ",e),o}}};c([o()],C.prototype,"user",void 0),c([r()],C.prototype,"render",null),C=c([s(["navbar",f],p(),u({active:"active"}))],C);const v=["authenticated",f],b=["not-authenticated",f];let x=class{constructor(e){this._context=e,this.auth={},e.whenOn(t=>{e.get(m).authentication.tillOff(t)(e=>{this.auth=e})})}render(){const e=this._context.get(a),s=t.name(v,e),n=t.name(b,e),{classList:o}=this._context.element;return()=>{this.auth.token?(o.remove(n),o.add(s)):(o.remove(s),o.add(n))}}};c([o()],x.prototype,"auth",void 0),c([r()],x.prototype,"render",null),x=c([s({name:["container",f],feature:{needs:[g,C]}})],x);let j=class{};j=c([s(["footer",f],p())],j);let E=class{};E=c([i({needs:[x,j]})],E);export{E as C};//# sourceMappingURL=layout.0f815e59.js.map
