import{S as e}from"../lib/context-values.956fc686.js";import{B as t,F as s}from"../wesib/wesib.b48306cb.js";import{_ as i}from"../helpers.920c7f83.js";import{A as a}from"./api.4cbb7920.js";import{m as o}from"../lib/marked.8e5d3ae9.js";import{D as r}from"../lib/dompurify.780c3c3d.js";const c=new e("article-service");class n{constructor(e){this._apiFetch=e.get(a);const s=e.get(t);this._purify=r(s),s.requestIdleCallback?this._schedule=e=>s.requestIdleCallback(e,{timeout:750}):this._schedule=e=>s.setTimeout(e)}article(e){const t={path:`articles/${encodeURIComponent(e)}`,init:{method:"GET",headers:{Accept:"application/json"}},respondAs:"article"};return this._apiFetch(t)}async htmlContents(e){const t=await new Promise((t,s)=>{this._schedule(()=>{o(e.body,(e,i)=>{null!=e?s(e):t(i)})})});return this._purify.sanitize(t,{RETURN_DOM_FRAGMENT:!0,RETURN_DOM_IMPORT:!0})}likeArticle(e,t=!0){const s={path:`articles/${encodeURIComponent(e)}/favorite`,init:{method:t?"POST":"DELETE",headers:{Accept:"application/json"}},respondAs:"article",auth:!0};return this._apiFetch(s)}}let l=class{};l=i([s({setup(e){e.provide({a:c,as:n})}})],l);export{c as A,l as a};//# sourceMappingURL=articles.af52d4d1.js.map
