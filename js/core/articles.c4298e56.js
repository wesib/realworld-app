import{a as e}from"../lib/call-thru.00f7427a.js";import{S as t}from"../lib/context-values.eef19512.js";import{B as i,F as s}from"../wesib/wesib.c27beefd.js";import{_ as a}from"../helpers.920c7f83.js";import{A as o}from"./api.a23e84e5.js";import{m as r}from"../lib/marked.8e5d3ae9.js";import{D as c}from"../lib/dompurify.780c3c3d.js";const n=new t("article-service");class p{constructor(e){this._apiFetch=e.get(o);const t=e.get(i);this._purify=c(t),t.requestIdleCallback?this._schedule=e=>t.requestIdleCallback(e,{timeout:750}):this._schedule=e=>t.setTimeout(e)}article(e){const t={path:`articles/${encodeURIComponent(e)}`,init:{method:"GET",headers:{Accept:"application/json"}},respondAs:"article"};return this._apiFetch(t)}async htmlContents(e){const t=await new Promise((t,i)=>{this._schedule(()=>{r(e.body,(e,s)=>{null!=e?i(e):t(s)})})});return this._purify.sanitize(t,{RETURN_DOM_FRAGMENT:!0,RETURN_DOM_IMPORT:!0})}likeArticle(e,t=!0){const i={path:`articles/${encodeURIComponent(e)}/favorite`,init:{method:t?"POST":"DELETE",headers:{Accept:"application/json"}},respondAs:"article",auth:!0};return this._apiFetch(i)}createArticle(e){const t={path:"articles",init:{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({article:e})},respondAs:"article",auth:!0};return this._apiFetch(t)}updateArticle(e,t){const i={path:`articles/${encodeURIComponent(e)}`,init:{method:"PUT",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({article:t})},respondAs:"article",auth:!0};return this._apiFetch(i)}deleteArticle(t){const i={path:`articles/${encodeURIComponent(t)}`,init:{method:"DELETE",headers:{Accept:"application/json"}},respondAs:e,auth:!0};return this._apiFetch(i)}}let l=class{};l=a([s({setup(e){e.provide({a:n,as:p})}})],l);export{n as A,l as a};//# sourceMappingURL=articles.c4298e56.js.map
