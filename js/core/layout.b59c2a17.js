import{D as e}from"../proc7ts/fun-events.f641f321.js";import{c as t}from"../proc7ts/namespace-aliaser.b34c0889.js";import{C as r,B as s,S as n,R as o,k as a,F as i}from"../wesib/wesib.3e2b94f7.js";import{_ as c}from"../helpers.e1623395.js";import{n as l,b as d}from"./auth.a2d65d3a.js";import{d as m,A as u,e as p}from"../wesib/generic.a8985d00.js";import{C as h}from"../core.714cbb7b.js";import{L as f}from"./loader.a2b38bd6.js";import"./input.b9e80c52.js";let b=(()=>{let e=class{};return e=c([r(["main",h],{feature:{needs:f}},m({onResponse({context:e,response:t,range:r}){if(!t.ok){r.deleteContents();const{document:n}=e.get(s),o=n.createElement("conduit-loader");null!=t.ok&&o.setAttribute("load-error","Error. "+String(t.error)),r.insertNode(o)}}}))],e),e})(),g=(()=>{let t=class{constructor(e){this._context=e,this.user=l;e.get(d).user().tillOff(e).to(e=>this.user=e).whenOff(()=>this.user=l)}render(){const t=this._context.get(d),{document:r}=this._context.get(s),{element:n}=this._context,o=n.querySelector("ul"),a=r.createRange();return a.setStartAfter(o.appendChild(r.createComment("[USER-NAV["))),a.setEndBefore(o.appendChild(r.createComment("]USER-NAV]"))),()=>{a.deleteContents();const{username:r}=this.user;if(r){const s=i("","ion-log-out","");new e(s).on("click").to(()=>{t.logout()}),a.insertNode(s),a.insertNode(i(r,"ion-person","profile/#/"+encodeURIComponent(r)))}};function i(e,t,s){const n=r.createElement("li");n.className="nav-item";const o=n.appendChild(r.createElement("a"));o.className="nav-link",o.setAttribute("href",s);return o.appendChild(r.createElement("i")).className=t,o.append(" ",e),n}}};return c([n()],t.prototype,"user",void 0),c([o()],t.prototype,"render",null),t=c([r(["navbar",h],p(),u({active:"active"}))],t),t})();const C=["authenticated",h],v=["not-authenticated",h];let j=(()=>{let e=class{constructor(e){this._context=e,this.auth={},e.get(d).authentication().tillOff(e).to(e=>{this.auth=e})}render(){const e=this._context.get(a),r=t.name(C,e),s=t.name(v,e),{classList:n}=this._context.element;return()=>{this.auth.token?(n.remove(s),n.add(r)):(n.remove(r),n.add(s))}}};return c([n()],e.prototype,"auth",void 0),c([o()],e.prototype,"render",null),e=c([r({name:["container",h],feature:{needs:[b,g]}})],e),e})(),x=(()=>{let e=class{};return e=c([r(["footer",h],p())],e),e})(),E=(()=>{let e=class{};return e=c([i({needs:[j,x]})],e),e})();export{E as C};//# sourceMappingURL=layout.b59c2a17.js.map
