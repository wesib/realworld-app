import{_ as e}from"../helpers.e1623395.js";import{C as t,B as s,S as o,R as n,k as r,F as a}from"../wesib/wesib.1ebc214d.js";import{c as i}from"../frontmeans/namespace-aliaser.9467f14d.js";import{s as c}from"../proc7ts/fun-events.0c993baf.js";import{n as m,b as l}from"./auth.d58e7713.js";import{C as d}from"../core.10059585.js";import{I as p,A as u,H as h}from"../wesib/generic.36801613.js";import{L as f}from"./loader.430f4736.js";import{D as g}from"../frontmeans/dom-events.ba8d072f.js";let C=class{};C=e([t(["main",d],{feature:{needs:f}},p({onResponse({context:e,response:t,range:o}){if(!t.ok){o.deleteContents();const{document:n}=e.get(s),r=n.createElement("conduit-loader");null!=t.ok&&r.setAttribute("load-error",`Error. ${String(t.error)}`),o.insertNode(r)}}}))],C);let v=class{constructor(e){this._context=e,this.user=m;e.get(l).user.do(c(e))((e=>this.user=e)).whenOff((()=>this.user=m))}render(){const e=this._context.get(l),{document:t}=this._context.get(s),{element:o}=this._context,n=o.querySelector("ul"),r=t.createRange();return r.setStartAfter(n.appendChild(t.createComment("[USER-NAV["))),r.setEndBefore(n.appendChild(t.createComment("]USER-NAV]"))),()=>{r.deleteContents();const{username:t}=this.user;if(t){const s=a("","ion-log-out","");new g(s).on("click")((()=>{e.logout()})),r.insertNode(s),r.insertNode(a(t,"ion-person",`profile/#/${encodeURIComponent(t)}`))}};function a(e,s,o){const n=t.createElement("li");n.className="nav-item";const r=n.appendChild(t.createElement("a"));r.className="nav-link",r.setAttribute("href",o);return r.appendChild(t.createElement("i")).className=s,r.append(" ",e),n}}};e([o()],v.prototype,"user",void 0),e([n()],v.prototype,"render",null),v=e([t(["navbar",d],h(),u({active:"active"}))],v);const b=["authenticated",d],j=["not-authenticated",d];let x=class{constructor(e){this._context=e,this.auth={},e.get(l).authentication.do(c(e))((e=>this.auth=e))}render(){const e=this._context.get(r),t=i.name(b,e),s=i.name(j,e),{classList:o}=this._context.element;return()=>{this.auth.token?(o.remove(s),o.add(t)):(o.remove(t),o.add(s))}}};e([o()],x.prototype,"auth",void 0),e([n()],x.prototype,"render",null),x=e([t({name:["container",d],feature:{needs:[C,v]}})],x);let E=class{};E=e([t(["footer",d],h())],E);let N=class{};N=e([a({needs:[x,E]})],N);export{N as C};//# sourceMappingURL=layout.f26065db.js.map
