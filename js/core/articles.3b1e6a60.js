import{S as e}from"../lib/context-values.956fc686.js";import{B as s,F as t}from"../wesib/wesib.e063c4fa.js";import{_ as i}from"../helpers.920c7f83.js";import{A as a}from"./api.494f1eea.js";import{m as r}from"../lib/marked.8e5d3ae9.js";import{D as o}from"../lib/dompurify.780c3c3d.js";const c=new e("article-service");class l{constructor(e){this._apiFetch=e.get(a);const t=e.get(s);this._purify=o(t),t.requestIdleCallback?this._schedule=e=>t.requestIdleCallback(e,{timeout:750}):this._schedule=e=>t.setTimeout(e)}article(e){const s={path:`articles/${encodeURIComponent(e)}`,init:{method:"GET",headers:{Accept:"application/json"}},respondAs:"article"};return this._apiFetch(s)}async htmlContents(e){const s=await new Promise((s,t)=>{this._schedule(()=>{r(e.body,(e,i)=>{null!=e?t(e):s(i)})})});return this._purify.sanitize(s,{RETURN_DOM_FRAGMENT:!0,RETURN_DOM_IMPORT:!0})}}let n=class{};n=i([t({setup(e){e.provide({a:c,as:l})}})],n);export{c as A,n as a};//# sourceMappingURL=articles.3b1e6a60.js.map
