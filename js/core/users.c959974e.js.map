{"version":3,"file":"users.c959974e.js","sources":["../../../src/core/users/user-service.ts","../../../src/core/users/user-service.impl.ts","../../../src/core/users/user-support.feature.ts"],"sourcesContent":["import { ContextRef, SingleContextKey } from 'context-values';\nimport { OnEvent } from 'fun-events';\nimport { ApiResponse } from '../api';\nimport { UserProfile } from './user-profile';\n\nexport interface UserService {\n\n  userProfile(username: string): OnEvent<[ApiResponse<UserProfile>]>;\n\n  followUser(username: string, follow?: boolean): OnEvent<[ApiResponse<UserProfile>]>;\n\n}\n\nexport const UserService: ContextRef<UserService> = (\n    /*#__PURE__*/ new SingleContextKey<UserService>('user-service')\n);\n","import { BootstrapContext } from '@wesib/wesib';\nimport { OnEvent } from 'fun-events';\nimport { ApiFetch, ApiRequest, ApiResponse } from '../api';\nimport { UserProfile } from './user-profile';\nimport { UserService } from './user-service';\n\nexport class UserService$ implements UserService {\n\n  private readonly _fetch: ApiFetch;\n\n  constructor(context: BootstrapContext) {\n    this._fetch = context.get(ApiFetch);\n  }\n\n  userProfile(username: string): OnEvent<[ApiResponse<UserProfile>]> {\n\n    const apiRequest: ApiRequest<UserProfile> = {\n      path: 'profiles/' + encodeURIComponent(username),\n      init: {\n        method: 'GET',\n        headers: {\n          Accept: 'application/json',\n        },\n      },\n      respondAs: 'profile',\n    };\n\n    return this._fetch(apiRequest);\n  }\n\n  followUser(username: string, follow?: boolean): OnEvent<[ApiResponse<UserProfile>]> {\n\n    const apiRequest: ApiRequest<UserProfile> = {\n      path: 'profiles/' + encodeURIComponent(username) + '/follow',\n      init: {\n        method: follow ? 'POST' : 'DELETE',\n        headers: {\n          Accept: 'application/json',\n        },\n      },\n      respondAs: 'profile',\n      auth: true,\n    };\n\n    return this._fetch(apiRequest);\n  }\n\n}\n","import { Feature } from '@wesib/wesib';\nimport { UserService } from './user-service';\nimport { UserService$ } from './user-service.impl';\n\n@Feature({\n  setup(setup) {\n    setup.provide({ a: UserService, as: UserService$ });\n  },\n})\nexport class UserSupport {\n}\n"],"names":["UserService","SingleContextKey","UserService$","[object Object]","context","this","_fetch","get","ApiFetch","username","apiRequest","path","encodeURIComponent","init","method","headers","Accept","respondAs","follow","auth","UserSupport","Feature","setup","provide","a","as"],"mappings":"4LAaaA,MACSC,EAA8B,sBCRvCC,EAIXC,YAAYC,GACVC,KAAKC,OAASF,EAAQG,IAAIC,GAG5BL,YAAYM,GAEV,MAAMC,EAAsC,CAC1CC,KAAM,YAAcC,mBAAmBH,GACvCI,KAAM,CACJC,OAAQ,MACRC,QAAS,CACPC,OAAQ,qBAGZC,UAAW,WAGb,OAAOZ,KAAKC,OAAOI,GAGrBP,WAAWM,EAAkBS,GAE3B,MAAMR,EAAsC,CAC1CC,KAAM,YAAcC,mBAAmBH,GAAY,UACnDI,KAAM,CACJC,OAAQI,EAAS,OAAS,SAC1BH,QAAS,CACPC,OAAQ,qBAGZC,UAAW,UACXE,MAAM,GAGR,OAAOd,KAAKC,OAAOI,IAGtB,ICtCYU,EAAb,QAAaA,KALZC,EAAQ,CACPlB,MAAMmB,GACJA,EAAMC,QAAQ,CAAEC,EAAGxB,EAAayB,GAAIvB,QAG3BkB"}