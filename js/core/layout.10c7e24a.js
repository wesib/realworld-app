import{D as e}from"../proc7ts/fun-events.6756e60e.js";import{c as t}from"../proc7ts/namespace-aliaser.1d67b636.js";import{C as s,B as o,S as n,R as r,k as a,j as i,F as c}from"../wesib/wesib.21207b5a.js";import{_ as l}from"../helpers.920c7f83.js";import{n as m,b as d}from"./auth.116b650f.js";import{e as p,A as u,f as h}from"../wesib/generic.83001515.js";import{C as f}from"../core.c852ba8c.js";import{L as b}from"./loader.4acbb68b.js";import"./input.777c40d3.js";let g=class{};g=l([s(["main",f],{feature:{needs:b}},p({onResponse({context:e,response:t,range:s}){if(!t.ok){s.deleteContents();const{document:n}=e.get(o),r=n.createElement("conduit-loader");null!=t.ok&&r.setAttribute("load-error","Error. "+String(t.error)),s.insertNode(r)}}}))],g);let C=class{constructor(e){this._context=e,this.user=m,e.get(d).user().tillOff(e).to(e=>this.user=e).whenOff(()=>this.user=m)}render(){const t=this._context.get(d),{document:s}=this._context.get(o),{element:n}=this._context,r=n.querySelector("ul"),a=s.createRange();return a.setStartAfter(r.appendChild(s.createComment("[USER-NAV["))),a.setEndBefore(r.appendChild(s.createComment("]USER-NAV]"))),()=>{a.deleteContents();const{username:s}=this.user;if(s){const o=i("","ion-log-out","");new e(o).on("click").to(()=>{t.logout()}),a.insertNode(o),a.insertNode(i(s,"ion-person","profile/#/"+encodeURIComponent(s)))}};function i(e,t,o){const n=s.createElement("li");n.className="nav-item";const r=n.appendChild(s.createElement("a"));return r.className="nav-link",r.setAttribute("href",o),r.appendChild(s.createElement("i")).className=t,r.append(" ",e),n}}};l([n()],C.prototype,"user",void 0),l([r({path:a})],C.prototype,"render",null),C=l([s(["navbar",f],h(),u({active:"active"}))],C);const j=["authenticated",f],v=["not-authenticated",f];let x=class{constructor(e){this._context=e,this.auth={},e.get(d).authentication().tillOff(e).to(e=>{this.auth=e})}render(){const e=this._context.get(i),s=t.name(j,e),o=t.name(v,e),{classList:n}=this._context.element;return()=>{this.auth.token?(n.remove(o),n.add(s)):(n.remove(s),n.add(o))}}};l([n()],x.prototype,"auth",void 0),l([r()],x.prototype,"render",null),x=l([s({name:["container",f],feature:{needs:[g,C]}})],x);let E=class{};E=l([s(["footer",f],h())],E);let N=class{};N=l([c({needs:[x,E]})],N);export{N as C};//# sourceMappingURL=layout.10c7e24a.js.map
