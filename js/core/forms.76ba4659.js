import{a as s,b as t,c as e,i as o,d as r,e as a,f as c,g as n}from"../frontmeans/input-aspects.e72f213f.js";import{i,c as d,b as p,t as l,j as u,m,k as h,l as f,n as b}from"../proc7ts/fun-events.8f536596.js";import{S as j,a as v,F as w,b as _,c as g,d as x,e as y,f as F}from"../wesib/generic.e05bd5a6.js";import{_ as k}from"../helpers.e1623395.js";import{A as C,C as S,S as A,R,F as q}from"../wesib/wesib.289eabae.js";import{C as z}from"../core.10059585.js";import{A as B}from"./loader.6a8fc6bd.js";import"../proc7ts/workbench.31425b55.js";function D({mark:r="is-invalid",when:a}={}){return c=>{const n=c.aspect(s);return i({status:c.aspect(t),validity:c.aspect(e)}).do(d((({status:[{touched:s,hasFocus:t}],validity:[e]})=>{const c=e.has("incomplete")||e.has("missing");return!s||t&&c?p():n.specs(o({mark:r,when:a}))})))}}let E=class{constructor(t){this._code=l();const e=this._code.read.do(u(((s,t)=>t?s(...t.trim().split(/\s+/)):s())));this.indicator=v((o=>e.do(m(((...e)=>({control:o.adjusted.control.convert(r.to(t.element)).setup(s,(s=>s.add(a()))).setup(s,(s=>s.add(D({when:e}))))}))))))}get code(){return this._code.it}set code(s){this._code.it=s}};k([j({share:{share:class extends w{constructor(){super("field-error")}},local:!0},name:""})],E.prototype,"indicator",void 0),k([C({updateState:!1})],E.prototype,"code",null),E=k([S(["field-error",z])],E);const G={};let H=class{constructor(s){this._context=s,this.errors=G,g[x].valueFor(s,{local:"too"}).do(h(((s,t)=>s||p())),h((s=>s?s.control.aspect(e).read.do(m((s=>s.messages("api").reduce(((s,t)=>({...s,...t.api})),G)))):p(G))))((s=>this.errors=s))}render(){const{contentRoot:s}=this._context;let t;return()=>{t&&(t.remove(),t=void 0),t=this._context.get(B)(this.errors),t&&s.append(t)}}};k([A()],H.prototype,"errors",void 0),k([R()],H.prototype,"render",null),H=k([S(["submit-errors",z])],H);let I=class{};function J(s,t){return F((t=>f(s).do(b((s=>s&&{control:t.control.build((e=>s&&n(s,{...e,form:t.adjusted.control}).setup(c,(s=>s.add("submit-button")))))})))),t)}I=k([q({needs:[E,class extends _{constructor(){super({error:!1})}setupField(t){super.setupField(t),t.control.setup(c,(t=>t.when("default",(t=>t.aspect(s).add(D())))))}},y,H]})],I);export{I as C,J as s};//# sourceMappingURL=forms.76ba4659.js.map
