import{A as e,j as t}from"../lib/a-iterable.a3fddd20.js";import{F as n}from"../lib/context-values.956fc686.js";import{c as o}from"../lib/namespace-aliaser.535f16ce.js";import{n as a,R as r,C as s,B as c,b as i,l,d,o as m,c as f}from"../wesib/wesib.b48306cb.js";import{_ as p}from"../helpers.920c7f83.js";import{a as u}from"../wesib/generic.e7ebea81.js";import{C as g}from"../core.f6946162.js";let h=class{constructor(e){this._context=e}render(){const{document:e}=this._context.get(c),t=e.createRange();return t.selectNodeContents(this._context.contentRoot),()=>{t.deleteContents(),null!=this.loadError&&t.insertNode(e.createTextNode(this.loadError))}}};p([a("load-error")],h.prototype,"loadError",void 0),p([r()],h.prototype,"render",null),h=p([s(["loader",g])],h);const b=new n("api-error-generator",{byDefault:i(n=>{const o=n.get(c).document;return n=>{let a;return e.from(t(n)).forEach(([e,t])=>{a||(a=o.createElement("ul"),a.classList.add("error-messages"));const n=a;t.forEach(t=>{const a=o.createElement("li");a.innerText=`${e} ${t}`,n.appendChild(a)})}),a}})}),E=Symbol("HTML-contents");function C(e={}){return l(({get:t,set:n,key:o})=>{const{comment:a=String(o),path:s=[E,o],offline:i}=e;return{componentDef:r({path:s,offline:i}).As((function(){const e=d.of(this),{document:n}=e.get(c),{contentRoot:o}=e,r=o.appendChild(n.createComment(`[${a}[`)),s=o.appendChild(n.createComment(`]${a}]`)),i=n.createRange();return i.setStartAfter(r),i.setEndBefore(s),()=>{i.deleteContents();const e=t(this);if(e)if("string"==typeof e){const t=n.createElement("template");t.innerHTML=e,i.insertNode(t.content)}else i.insertNode(e)}}),o),get:t,set(e,o){const a=t(e);o!==a&&(n(e,o),d.of(e).updateState(s,o,a))}}})}const y=Symbol("paging-info");function S(){return l(({get:e,set:t,key:n})=>{const o=[y,n];return{componentDef:m.all(C({path:o,comment:`PAGER(${String(n)})`}).By((function(t){const n=d.of(t),{document:o}=n.get(c),a=e(t);if(!a.totalPages||a.totalPages<=1)return;const r=a,{totalPages:s,visiblePages:i=5,currentPage:l=0}=r,m=Math.max(1,i),f=Math.max(0,l),p=o.createElement("ul");p.className="pagination";let u=Math.max(0,f-(m>>1)),g=u+m;g>s&&(u=Math.max(0,u-(g-s)),g=s);p.appendChild(h("<<",0,f>0)),p.appendChild(h("<",f-1,f>0));for(let e=u;e<g;++e)p.appendChild(h(String(e+1),e,!0,f===e));return p.appendChild(h(">",f+1,f+1<s)),p.appendChild(h(">>",s-1,f+1<s)),p;function h(e,t,n,a=!1){const s=o.createElement("li");let c;return s.className="page-item",n&&!a?(c=o.createElement("a"),c.setAttribute("href",r.pageHref(t))):(s.classList.add(a?"active":"disabled"),c=o.createElement("span")),c.className="page-link",c.innerHTML=e,s.appendChild(c),s}}),n),u()),get:e,set(n,a){const r=e(n);t(n,a),d.of(n).updateState(o,a,r)}}})}const x=Symbol("load-status"),R=["loaded",g];function L(e={}){return l(({get:t,set:n,key:a})=>{const{path:s=[x,a],offline:c,loaded:i=R,comment:l=String(a)}=e;let p;return{componentDef:m.all({feature:{needs:h},define(e){p=o.name(i,e.get(f))}},r({path:s,offline:c}).As((function(){const{element:e}=d.of(this);return n=>{const o=t(this);o&&o.ok?n.postpone(()=>{e.classList.add(p)}):e.classList.remove(p)}}),a),C({path:s,offline:c,comment:`LOADER(${l})`}).By((function(e){return t(e)?void 0:document.createElement("conduit-loader")}),a),C({path:s,offline:c,comment:`ERRORS(${l})`}).By((function(e){const n=t(e);return n&&!n.ok?d.of(e).get(b)(n.errors):void 0}),a)),get:t,set(e,o){const a=t(e);n(e,o),d.of(e).updateState(s,o,a)}}})}export{h as L,C as R,L as a,S as b};//# sourceMappingURL=loader.4f7c7fa2.js.map
