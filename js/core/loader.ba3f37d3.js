import{A as e,j as t}from"../lib/a-iterable.a3fddd20.js";import{F as n}from"../lib/context-values.eef19512.js";import{c as o}from"../lib/namespace-aliaser.535f16ce.js";import{n as a,R as r,C as s,B as i,b as c,l,d as m,o as d,c as f}from"../wesib/wesib.c27beefd.js";import{_ as p}from"../helpers.920c7f83.js";import{a as u}from"../wesib/generic.e7a7b809.js";import{C as h}from"../core.f6946162.js";let g=class{constructor(e){this._context=e}render(){const{document:e}=this._context.get(i),t=e.createRange();return t.selectNodeContents(this._context.contentRoot),()=>{t.deleteContents(),null!=this.loadError&&t.insertNode(e.createTextNode(this.loadError))}}};p([a("load-error")],g.prototype,"loadError",void 0),p([r()],g.prototype,"render",null),g=p([s(["loader",h])],g);const b=new n("api-error-generator",{byDefault:c(n=>{const o=n.get(i).document;return n=>{let a;return e.from(t(n)).forEach(([e,t])=>{a||(a=o.createElement("ul"),a.classList.add("error-messages"));const n=a;t.forEach(t=>{const a=o.createElement("li");a.innerText=`${e} ${t}`,n.appendChild(a)})}),a}})}),E=new Intl.DateTimeFormat("en-US",{month:"long",day:"numeric"}),C=new Intl.DateTimeFormat("en-US",{year:"numeric",month:"long",day:"numeric"});function y(e){return((new Date).getFullYear()===e.getFullYear()?E:C).format(e)}function S(e={}){return l(({get:t,key:n})=>{const{comment:o=String(n),path:a,offline:s}=e;return{componentDef:r({path:a,offline:s}).As((function(){const e=m.of(this),{document:n}=e.get(i),{contentRoot:a}=e,r=a.appendChild(n.createComment(`[${o}[`)),s=a.appendChild(n.createComment(`]${o}]`)),c=n.createRange();return c.setStartAfter(r),c.setEndBefore(s),()=>{c.deleteContents();const e=t(this).call(this);if(e)if("string"==typeof e){const t=n.createElement("template");t.innerHTML=e,c.insertNode(t.content)}else c.insertNode(e)}}),n)}})}const x=Symbol("paging-info");function R(){return l(({get:e,set:t,key:n})=>{const o=[x,n];return{componentDef:d.all(S({path:o,comment:`PAGER(${String(n)})`}).As((function(){const t=m.of(this),{document:n}=t.get(i),o=e(this);if(!o.totalPages||o.totalPages<=1)return;const a=o,{totalPages:r,visiblePages:s=5,currentPage:c=0}=a,l=Math.max(1,s),d=Math.max(0,c),f=n.createElement("ul");f.className="pagination";let p=Math.max(0,d-(l>>1)),u=p+l;u>r&&(p=Math.max(0,p-(u-r)),u=r);f.appendChild(h("<<",0,d>0)),f.appendChild(h("<",d-1,d>0));for(let e=p;e<u;++e)f.appendChild(h(String(e+1),e,!0,d===e));return f.appendChild(h(">",d+1,d+1<r)),f.appendChild(h(">>",r-1,d+1<r)),f;function h(e,t,o,r=!1){const s=n.createElement("li");let i;return s.className="page-item",o&&!r?(i=n.createElement("a"),i.setAttribute("href",a.pageHref(t))):(s.classList.add(r?"active":"disabled"),i=n.createElement("span")),i.className="page-link",i.innerHTML=e,s.appendChild(i),s}}),n),u()),get:e,set(n,a){const r=e(n);t(n,a),m.of(n).updateState(o,a,r)}}})}const A=Symbol("load-status"),j=["loaded",h];function D(e={}){return l(({get:t,set:n,key:a})=>{const{path:s=[A,a],offline:i,loaded:c=j,comment:l=String(a)}=e;let p;return{componentDef:d.all({feature:{needs:g},define(e){p=o.name(c,e.get(f))}},r({path:s,offline:i}).As((function(){const{element:e}=m.of(this);return n=>{const o=t(this);o&&o.ok?n.postpone(()=>{e.classList.add(p)}):e.classList.remove(p)}}),a),S({path:s,offline:i,comment:`LOADER(${l})`}).As((function(){return t(this)?void 0:document.createElement("conduit-loader")}),a),S({path:s,offline:i,comment:`ERRORS(${l})`}).As((function(){const e=t(this);return e&&!e.ok?m.of(this).get(b)(e.errors):void 0}),a)),get:t,set(e,o){const a=t(e);n(e,o),m.of(e).updateState(s,o,a)}}})}export{g as L,S as R,D as a,R as b,y as f};//# sourceMappingURL=loader.ba3f37d3.js.map
