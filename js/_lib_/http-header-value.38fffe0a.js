function t({$:t,n,t:e,v:i,x:r=[],p:s={},pl:u=[]}){return{$:t,n,t:e,v:i,x:r,p:s,pl:u}}function n({p:t,pl:n},e){const i=e.n||e.v,r=t[i];(!r||!r.n&&e.n)&&(t[i]=e),n.push(e)}function e(t){return n=>{const e=n.s[n.i];return n.d=t.delimiterOf(e),e}}const i=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun), \d\d (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) \d\d\d\d \d\d:\d\d:\d\d GMT/;function r(t,n){return t.s=t.s.substring(t.i),t.i=0,!!t.s.match(i)&&(n(t.s.substring(t.i,t.i+=29)),!0)}const s=()=>!1;function u(n,{named:i=!0,tagged:o=!0,extra:d=!0,next:f=e(n)}={}){const l=function(t){return(n,e)=>{let i="";for(++n.i;n.i<n.s.length;++n.i){const r=n.s[n.i];if("\\"===r){const t=n.s[++n.i];i+=t||r}else{if(65536&t.delimiterOf(r))return++n.i,void e(i);i+=r}}e(i)}}(n),c=function(t){return(n,e)=>{if(!(262144&t.delimiterOf(n.s[n.i])))return!1;let i="";for(++n.i;n.i<n.s.length;){const e=n.s[n.i++];if(524288&t.delimiterOf(e))break;i+=e}return e(i),!0}}(n),a=d?u(n,{next:f,tagged:!1,named:!1,extra:!1}):s;return(n,e)=>{let s,u,d,g="",m="raw";for(;n.i<n.s.length;){const t=f(n);if(n.d){if(12&n.d)break;if(null==u){if(16&n.d){u=g?"":t,++n.i;continue}if(65536&n.d){!o&&g||l(n,t=>{g?(m="tagged-string",s=g):m="quoted-string",g="",u=t});break}if(!g&&c(n,t=>{m="angle-bracketed-string",u=t}))break;u=g,g=""}else{if(65536&n.d){!o&&u||l(n,t=>{u?(m="tagged-string",s=u):m="quoted-string",u=t});break}if(!u&&c(n,t=>{m="angle-bracketed-string",u=t}))break}}if(null==u){if(!g&&r(n,t=>u=t)){m="date-time";break}i?g+=t:u=t}else{if(!u&&r(n,t=>u=t)){m="date-time";break}u+=t}++n.i}if(null==u){if(!g)return!1;d=t({$:m,v:g})}else d=t({$:m,n:g||void 0,t:s,v:u});for(;a(n,t=>d.x.push(t)););return e(d),!0}}function o(t){return n=>{let e=n.s[n.i];return"\\"!==e?(n.d=t.delimiterOf(e),e):(++n.i,n.i<n.s.length?(e=n.s[n.i],n.d=t.delimiterOf(e)?1:0):n.d=1,e)}}function d(t){return n=>{const e=n.i;do{const e=n.s[n.i];if(!(2&t.delimiterOf(e)))break;n.i++}while(n.i<n.s.length);return n.i!==e}}function f(t,n={}){const e=d(t),i=u(t,Object.assign(Object.assign({},n),{tagged:!1}));return(n,r)=>!!(8&t.delimiterOf(n.s[n.i]))&&(++n.i,e(n),i(n,r))}const l={" ":7,"\t":7,",":5,";":9,'"':65569,"\\":33,"<":262145,">":524289,"=":17,"(":1,")":1,"/":1,":":1,"?":1,"@":1,"[":1,"]":1,"{":1,"}":1};function c({delimit:t}={}){const n=t?Object.assign(Object.assign({},l),t):l;return{delimiterOf:t=>n[t]||(t>="\0"&&t<=" "||"\x7f"===t?1:0)}}const a=c(),g=c({delimit:{":":17,"(":131105,")":37," ":3,"\t":3,"=":1,",":1}});function m(e){var i;const r=e?c(e):a,l=function(t){const n=d(t);return e=>!!(4&t.delimiterOf(e.s[e.i]))&&(e.i++,n(e),!0)}(r),m=f(r),b=u(r),h=(null===(i=e)||void 0===i?void 0:i.comments)?function(e){const i=d(e),r={next:o(e)},s=u(e,r),l=f(e,r);return(r,u)=>{if(!(131072&e.delimiterOf(r.s[r.i])))return!1;let o;for(++r.i;i(r)||l(r,e=>{o||(o=t({$:"raw",v:""})),n(o,e)})||s(r,t=>o=t););return++r.i,u(o||t({$:"raw",v:""})),!0}}(g):s;return e=>{const i=[],r={i:0,s:e};for(;r.i<r.s.length&&(l(r)||m(r,e=>{i.length||i.push(t({$:"raw",v:""})),n(i[i.length-1],e)})||h(r,t=>i.push(t))||b(r,t=>i.push(t))););return i}}const b=m();function h(t){if(!t)return'""';let n,e=!1;for(let i=0;i<t.length;++i){const r=t[i],s=a.delimiterOf(r);s?(32&s&&(n||(n=t.substring(0,i)),n+="\\"+r),e=!0):n&&(n+=r)}return e?`"${n||t}"`:t}export{b as a,h};//# sourceMappingURL=http-header-value.38fffe0a.js.map
