{"version":3,"file":"article-buttons-support.feature.8a881d48.js","sources":["../../src/pages/profile/page-user-profile-param.ts","../../src/pages/article/current-article.share.ts","../../src/pages/article/buttons/article-author.component.ts","../../src/pages/article/buttons/article-tags.component.ts","../../src/pages/article/buttons/article-event.ts","../../src/pages/article/buttons/delete-post-btn.component.ts","../../src/pages/article/buttons/edit-post-btn.component.ts","../../src/pages/article/buttons/favorite-post-btn.component.ts","../../src/pages/article/buttons/article-buttons-support.feature.ts"],"sourcesContent":["import { Page, PageHashURLParam, PageParam } from '@wesib/generic';\nimport { FeedRequest, feedRequestSearchParams } from '../../core/feed';\n\nclass PageUserProfileParam$ extends PageParam<FeedRequest, FeedRequest> {\n\n  create(page: Page, input: FeedRequest): PageParam.Handle<FeedRequest, FeedRequest> {\n\n    const handle = this.byDefault(page);\n\n    handle.put(input);\n\n    return handle;\n  }\n\n  byDefault(page: Page): PageParam.Handle<FeedRequest, FeedRequest> {\n    return {\n      get() {\n\n        const { searchParams: params, pathname } = page.get(PageHashURLParam);\n        const slashIdx: number = pathname.indexOf('/', 1);\n        const user = decodeURIComponent(slashIdx < 0 ? pathname.substring(1) : pathname.substring(1, slashIdx));\n        let author: string | undefined;\n        let favorited: string | undefined;\n\n        if (slashIdx > 0 && pathname.substr(slashIdx + 1) === 'favorite') {\n          favorited = user;\n        } else {\n          author = user;\n        }\n\n        return {\n          tag: params.get('tag') || undefined,\n          author,\n          favorited,\n          limit: parseInt(params.get('limit') || '', 10) || undefined,\n          offset: parseInt(params.get('offset') || '', 10) || undefined,\n        };\n      },\n      put(value) {\n\n        const { favorited, author = '' } = value;\n        const url = new URL(page.get(PageHashURLParam).href);\n\n        url.pathname = favorited\n            ? `/${encodeURIComponent(favorited)}/favorite`\n            : `/${encodeURIComponent(author)}`;\n\n        const searchParams = feedRequestSearchParams({ ...value, favorited: undefined, author: undefined }).toString();\n\n        url.search = searchParams ? '?' + searchParams : '';\n\n        page.put(PageHashURLParam, url);\n      },\n    };\n  }\n\n}\n\nexport const PageUserProfileParam: PageParam.WithDefaults<FeedRequest, FeedRequest> = new PageUserProfileParam$();\n","import { ContextKey__symbol } from '@proc7ts/context-values';\nimport { AfterEvent, mapAfter_ } from '@proc7ts/fun-events';\nimport { Share, Share__symbol } from '@wesib/generic';\nimport { ComponentContext } from '@wesib/wesib';\nimport { CurrentArticle, noArticle } from './current-article';\n\nexport class CurrentArticleShare extends Share<CurrentArticle> {\n\n  private constructor() {\n    super('current-article');\n  }\n\n  static readonly [Share__symbol]: CurrentArticleShare = new CurrentArticleShare();\n\n  static get [ContextKey__symbol](): Share.Key<CurrentArticle> {\n    return this[Share__symbol][ContextKey__symbol];\n  }\n\n  static articleFor(consumer: ComponentContext): AfterEvent<[CurrentArticle]> {\n    return this[Share__symbol].articleFor(consumer);\n  }\n\n  articleFor(consumer: ComponentContext): AfterEvent<[CurrentArticle]> {\n    return this.valueFor(consumer).do(\n        mapAfter_((article?, _sharer?) => article || noArticle),\n    );\n  }\n\n}\n","import { HandleNavLinks, Navigation, PageHashURLSupport } from '@wesib/generic';\nimport { BootstrapWindow, Component, ComponentContext, ElementRenderer, Render, StateProperty } from '@wesib/wesib';\nimport { Conduit__NS } from '../../../core';\nimport { formatDate } from '../../../reusable';\nimport { PageUserProfileParam } from '../../profile/page-user-profile-param';\nimport { CurrentArticle, noArticle } from '../current-article';\nimport { CurrentArticleShare } from '../current-article.share';\n\n@Component(\n    ['article-author', Conduit__NS],\n    {\n      feature: {\n        needs: PageHashURLSupport,\n      },\n    },\n    HandleNavLinks(),\n)\nexport class ArticleAuthorComponent {\n\n  @StateProperty()\n  private article: CurrentArticle = noArticle;\n\n  constructor(private readonly _context: ComponentContext) {\n    CurrentArticleShare.articleFor(_context)(article => {\n      this.article = article;\n    }).whenOff(() => {\n      this.article = noArticle;\n    });\n  }\n\n  @Render()\n  render(): ElementRenderer {\n\n    const navigation = this._context.get(Navigation);\n    const { document } = this._context.get(BootstrapWindow);\n    const { contentRoot }: { contentRoot: Node } = this._context;\n    const fragment = document.createDocumentFragment();\n    const authorImgLink = fragment.appendChild(document.createElement('a'));\n    const info = fragment.appendChild(document.createElement('div'));\n\n    info.className = 'info';\n\n    const authorLink = info.appendChild(document.createElement('a'));\n\n    authorLink.className = 'author';\n\n    const time = info.appendChild(document.createElement('time'));\n\n    time.className = 'date';\n\n    contentRoot.appendChild(fragment);\n\n    return () => {\n\n      const article = this.article;\n      let profileURL = '';\n      let profileImage = '';\n      let username = '';\n      let timestamp = '';\n      let postDate = '';\n\n      if (article.slug) {\n\n        const { author } = article;\n\n        profileURL = navigation.with(\n            PageUserProfileParam,\n            { author: author.username },\n        ).pretend('profile/')?.url?.href || '';\n        profileImage = author.image ? `<img src=\"${encodeURI(author.image)}\"/>` : '';\n        username = author.username;\n        timestamp = article.createdAt;\n        postDate = formatDate(new Date(article.createdAt));\n      }\n\n      authorImgLink.href = profileURL;\n      authorImgLink.innerHTML = profileImage;\n      authorLink.href = profileURL;\n      authorLink.innerText = username;\n      time.innerText = postDate;\n      if (timestamp) {\n        time.setAttribute('datetime', timestamp);\n      } else {\n        time.removeAttribute('datetime');\n      }\n    };\n  }\n\n}\n","import { HandleNavLinks } from '@wesib/generic';\nimport { BootstrapWindow, Component, ComponentContext, StateProperty } from '@wesib/wesib';\nimport { Conduit__NS } from '../../../core';\nimport { RenderHTML } from '../../../reusable';\nimport { CurrentArticleShare } from '../current-article.share';\n\nconst noTags: readonly string[] = [];\n\n@Component(\n    ['article-tags', Conduit__NS],\n    HandleNavLinks(),\n)\nexport class ArticleTagsComponent {\n\n  @StateProperty()\n  tags: readonly string[] = noTags;\n\n  constructor(private readonly _context: ComponentContext) {\n    CurrentArticleShare.articleFor(_context)(article => {\n      this.tags = article.slug ? article.tagList : noTags;\n    }).whenOff(() => {\n      this.tags = noTags;\n    });\n  }\n\n  @RenderHTML()\n  render(): Node | undefined {\n    if (!this.tags.length) {\n      return;\n    }\n\n    const { document } = this._context.get(BootstrapWindow);\n    const ul = document.createElement('ul');\n\n    this.tags.forEach(tag => {\n\n      const li = ul.appendChild(document.createElement('li'));\n      const a = li.appendChild(document.createElement('a'));\n\n      a.href = `#/?tag=${encodeURIComponent(tag)}`;\n      a.innerText = tag;\n    });\n\n    return ul;\n  }\n\n}\n","export class ArticleEvent extends CustomEvent<{ removed: string }> {\n}\n","import { stopDomEvents } from '@frontmeans/dom-events';\nimport { onceOn } from '@proc7ts/fun-events';\nimport { BootstrapWindow, Component, ComponentContext, StateProperty } from '@wesib/wesib';\nimport { Conduit__NS } from '../../../core';\nimport { ArticleService, ArticlesSupport } from '../../../core/articles';\nimport { RenderHTML } from '../../../reusable';\nimport { CurrentArticle, noArticle } from '../current-article';\nimport { CurrentArticleShare } from '../current-article.share';\nimport { ArticleEvent } from './article-event';\n\n@Component(\n    ['delete-post-btn', Conduit__NS],\n    {\n      feature: {\n        needs: ArticlesSupport,\n      },\n    },\n)\nexport class DeletePostBtnComponent {\n\n  @StateProperty()\n  article: CurrentArticle = noArticle;\n\n  constructor(private readonly _context: ComponentContext) {\n\n    const articleService = _context.get(ArticleService);\n\n    CurrentArticleShare.articleFor(_context)(article => {\n      this.article = article;\n    }).whenOff(() => {\n      this.article = noArticle;\n    });\n    _context.on('click').do(stopDomEvents)(() => {\n      if (this.article.slug) {\n        deleteArticle(this.article.slug);\n      }\n    });\n\n    function deleteArticle(slug: string): void {\n      if (!confirm('Are you sure you want to delete this article?')) {\n        return;\n      }\n      articleService.deleteArticle(slug).do(onceOn)(response => {\n        if (response.ok) {\n          _context.dispatchEvent(new ArticleEvent(\n              'conduit:article',\n              {\n                bubbles: true,\n                detail: { removed: slug },\n              },\n          ));\n        } else {\n          console.error('Failed to remove article', response.errors);\n        }\n      });\n    }\n  }\n\n  @RenderHTML()\n  render(): Node | undefined {\n\n    const { article } = this;\n\n    if (!article.slug) {\n      return;\n    }\n\n    const { document } = this._context.get(BootstrapWindow);\n    const fragment = document.createDocumentFragment();\n\n    const i = fragment.appendChild(document.createElement('i'));\n\n    i.className = 'ion-trash-a';\n    fragment.append(' Delete Article');\n\n    return fragment;\n\n\n  }\n\n}\n","import { Navigation, PageHashURLParam, PageHashURLSupport } from '@wesib/generic';\nimport { BootstrapWindow, Component, ComponentContext, StateProperty } from '@wesib/wesib';\nimport { Conduit__NS } from '../../../core';\nimport { RenderHTML } from '../../../reusable';\nimport { CurrentArticle, noArticle } from '../current-article';\nimport { CurrentArticleShare } from '../current-article.share';\n\n@Component(\n    ['edit-post-btn', Conduit__NS],\n    {\n      feature: {\n        needs: PageHashURLSupport,\n      },\n    },\n)\nexport class EditPostBtnComponent {\n\n  @StateProperty()\n  article: CurrentArticle = noArticle;\n\n  constructor(private readonly _context: ComponentContext) {\n\n    const navigation = _context.get(Navigation);\n\n    CurrentArticleShare.articleFor(_context)(article => {\n      this.article = article;\n    }).whenOff(() => {\n      this.article = noArticle;\n    });\n    this._context.on('click')(() => {\n      if (this.article.slug) {\n        editArticle(this.article.slug);\n      }\n    });\n\n    function editArticle(slug: string): void {\n      navigation.with(PageHashURLParam, encodeURIComponent(slug))\n          .open('editor/')\n          .catch(error => console.error('Failed to edit article', error));\n    }\n  }\n\n  @RenderHTML()\n  render(): Node | undefined {\n\n    const { article } = this;\n\n    if (!article.slug) {\n      return;\n    }\n\n    const { document } = this._context.get(BootstrapWindow);\n    const fragment = document.createDocumentFragment();\n    const i = fragment.appendChild(document.createElement('i'));\n\n    i.className = 'ion-edit';\n    fragment.append(' Edit Article');\n\n    return fragment;\n  }\n\n}\n","import {\n  BootstrapWindow,\n  Component,\n  ComponentContext,\n  ContentRoot,\n  ElementRenderer,\n  Render,\n  StateProperty,\n} from '@wesib/wesib';\nimport { Conduit__NS } from '../../../core';\nimport { ArticleService, ArticlesSupport } from '../../../core/articles';\nimport { CurrentArticle, noArticle } from '../current-article';\nimport { CurrentArticleShare } from '../current-article.share';\n\n@Component(\n    ['favorite-post-btn', Conduit__NS],\n    {\n      feature: {\n        needs: ArticlesSupport,\n      },\n    },\n)\nexport class FavoritePostBtnComponent {\n\n  @StateProperty()\n  article: CurrentArticle = noArticle;\n\n  constructor(private readonly _context: ComponentContext) {\n\n    const articleService = _context.get(ArticleService);\n\n    CurrentArticleShare.articleFor(_context)(article => {\n      this.article = article;\n    }).whenOff(() => {\n      this.article = noArticle;\n    });\n    _context.on('click')(() => {\n\n      const { article } = this;\n\n      if (article.slug) {\n\n        const like = !article.favorited;\n\n        article.update({\n          ...article,\n          favorited: like,\n        });\n        articleService.likeArticle(article.slug, like)(\n            response => {\n              if (this.article.slug) {\n                if (response.ok) {\n                  this.article.update(response.body);\n                } else {\n                  this.article.update(article);\n                  console.error(`Failed to like article ${article.slug}`, response.errors);\n                }\n              }\n            },\n        );\n      }\n    });\n  }\n\n  @Render()\n  render(): ElementRenderer {\n\n    const { contentRoot, element } = this._context as { contentRoot: ContentRoot; element: Element };\n    const { document } = this._context.get(BootstrapWindow);\n    const icon = document.createElement('i');\n\n    contentRoot.insertBefore(icon, contentRoot.childNodes[0]);\n\n    const counter = contentRoot.appendChild(document.createElement('span'));\n\n    counter.className = 'counter';\n\n    return () => {\n      icon.className = this.article.slug && this.article.favorited ? 'ion-heart' : 'ion-ios-heart-outline';\n      counter.innerText = this.article.slug && this.article.favoritesCount ? String(this.article.favoritesCount) : '';\n      element.className = this.article.slug && this.article.favorited ? 'btn-success' : 'btn-outline-success';\n    };\n  }\n\n}\n","import { Feature } from '@wesib/wesib';\nimport { ArticleAuthorComponent } from './article-author.component';\nimport { ArticleTagsComponent } from './article-tags.component';\nimport { DeletePostBtnComponent } from './delete-post-btn.component';\nimport { EditPostBtnComponent } from './edit-post-btn.component';\nimport { FavoritePostBtnComponent } from './favorite-post-btn.component';\n\n@Feature({\n  needs: [\n    ArticleAuthorComponent,\n    ArticleTagsComponent,\n    DeletePostBtnComponent,\n    EditPostBtnComponent,\n    FavoritePostBtnComponent,\n  ],\n})\nexport class ArticleButtonsSupport {\n}\n"],"names":["PageUserProfileParam","PageParam","[object Object]","page","input","handle","this","byDefault","put","searchParams","params","pathname","get","PageHashURLParam","slashIdx","indexOf","user","decodeURIComponent","substring","author","favorited","substr","tag","undefined","limit","parseInt","offset","value","url","URL","href","encodeURIComponent","feedRequestSearchParams","toString","search","CurrentArticleShare","Share","super","static","Share__symbol","ContextKey__symbol","consumer","articleFor","valueFor","do","mapAfter_","article","_sharer","noArticle","ArticleAuthorComponent","_context","whenOff","navigation","Navigation","document","BootstrapWindow","contentRoot","fragment","createDocumentFragment","authorImgLink","appendChild","createElement","info","className","authorLink","time","profileURL","profileImage","username","timestamp","postDate","slug","with","pretend","image","encodeURI","createdAt","formatDate","Date","innerHTML","innerText","setAttribute","removeAttribute","__decorate","StateProperty","Render","Component","Conduit__NS","feature","needs","PageHashURLSupport","HandleNavLinks","noTags","ArticleTagsComponent","tags","tagList","length","ul","forEach","a","RenderHTML","ArticleEvent","CustomEvent","DeletePostBtnComponent","articleService","ArticleService","on","stopDomEvents","confirm","deleteArticle","onceOn","response","ok","dispatchEvent","bubbles","detail","removed","console","error","errors","append","ArticlesSupport","EditPostBtnComponent","open","catch","FavoritePostBtnComponent","like","update","likeArticle","body","element","icon","insertBefore","childNodes","counter","favoritesCount","String","ArticleButtonsSupport","Feature"],"mappings":"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"}