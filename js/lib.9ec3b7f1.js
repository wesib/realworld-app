function e(e){return e}function t(){}function s(e){return null!=e}function n(e){return()=>e}function r(...e){return()=>e}const i=Symbol("next-call");function o(e){const t=()=>t;return t[i]=(t,s)=>e(t,s),t}function a(e){return"function"==typeof e&&i in e}function c(e){return o((t,s)=>t.pass(s,e))}function u(...e){return o((t,s)=>t.call(s,e))}function l(e){return o((t,s)=>{for(const n of e)t.pass(s,n)})}const h=o(e=>e.skip());function p(e){return"length"in e}function d(e){return"reverse"in e}function f(e){return e[Symbol.iterator]()}function g(e){return function*(){yield*e}()}function _(e,t){const s={[Symbol.iterator]:e};if(!t)return s;const n=s;return n.reverse=t,n}function m(e){if(p(e))return y(e);if(d(e)){const t=e.reverse();return _(()=>f(t))}return y(Array.from(e))}function y(e){return _((function*(){for(let t=e.length-1;t>=0;--t)yield e[t]}))}function b(e,t){for(const s of e)t(s)}function k(e,t){for(const s of e)if(!t(s))return!1;return!0}function w(e){return f(e).next().value}function x(e,t,s){let n=s;for(const s of e)n=t(n,s);return n}function v(e,t){return _((function*(){for(const s of e)t(s)&&(yield s)}))}function O(t,s=e){return _((function*(){for(const e of t)yield*s(e)}))}function A(e,t){return _((function*(){for(const s of e)yield t(s)}))}function S(s,...n){let r=[];const o=e=>{const s=e>=n.length,c=++e<n.length?n[e]:t,u=(t,n)=>{a(t)?t[i](o(e),c):s?r.push([n]):o(e).pass(c,t)};return{call(e,t){u(e(...t),t)},pass(e,t){u(e(t),t)},skip(){},iterate(e,t){r.push({*[Symbol.iterator](){for(const s of t){const t=r,n=[];try{r=n,u(e(s),s)}finally{r=t}for(const e of n)yield*e}}})}}};return o(0).iterate(n[0],s),O(r,e)}const $=["every","filter","flatMap","forEach","map","reduce","reverse","some"];class j{static none(){return E}static is(e){return $.every(t=>t in e)}static of(e){return j.is(e)?e:j.from(e)}static from(e){return R(()=>e,()=>m(e))}every(e){return k(this,e)}filter(e){return R(()=>v(this,e),()=>v(this.reverse(),e))}flatMap(e){return R(()=>O(this,e),()=>O(this.reverse(),t=>m(e(t))))}forEach(e){b(this,e)}map(e){return R(()=>A(this,e),()=>A(this.reverse(),e))}reduce(e,t){return x(this,e,t)}reverse(){return R(()=>y(Array.from(this)),()=>this)}some(e){return function(e,t){for(const s of e)if(t(s))return!0;return!1}(this,e)}thru(...e){const t=S;return R(()=>t(this,...e))}}class z extends j{*[Symbol.iterator](){}reverse(){return this}}const E=new z;function R(e,t){return new class extends j{[Symbol.iterator](){return f(e())}reverse(){return t?j.from(_(()=>f(t()),()=>this)):super.reverse()}}}function T(e){return _((function*(){for(let t=0;t<e.length;++t)yield e[t]}),()=>y(e))}const D={*[Symbol.iterator](){},reverse(){return this}};function C(e){const t=function(e){return T(Reflect.ownKeys(e))}(e);function s(t){return A(t,t=>[t,e[t]])}return _(()=>f(s(t)),()=>s(t.reverse()))}const q=Symbol("context-key");class L{constructor(e){this.name=e}get[q](){return this}toString(){return`ContextKey(${this.name})`}}class M extends L{constructor(e){super(`${e.name}:seed`)}get seedKey(){return this}grow(e){const{seeder:t,seed:s}=e;return t.isEmpty(s)?e.byDefault(()=>s):s}}class Z extends Error{constructor(e,t=`There is no value with key ${e}`){super(t),this.key=e}}function P(e){if(function(e){return"by"in e}(e)){if(!K(e))return e;const{a:t,by:s,with:n}=e;return{a:t,by:e=>s(...n.map(t=>e.get(t)))}}if(function(e){return"is"in e}(e)){const{a:t,is:s}=e;return{a:t,by:n(s)}}if(function(e){return"via"in e}(e)){const{a:t,via:s}=e;return{a:t,by:e=>e.get(s)}}if(function(e){return"as"in e}(e)){if(function(e){return!("a"in e)}(e)&&(e=function(e){return Object.assign(Object.assign({},e),{a:e.as})}(e)),!K(e)){const{as:t}=e;return{a:e.a,by:e=>new t(e)}}const{as:t,with:s}=e;return{a:e.a,by:e=>new t(...s.map(t=>e.get(t)))}}throw new TypeError(`Malformed context value specifier: ${e}`)}function K(e){return"with"in e}class F{}class U{constructor(e){this._seeds=new Map,this._initial=null==e?t:"function"==typeof e?e:t=>e.get(t)}provide(e){const{a:{[q]:{seedKey:t}},by:s}=P(e),[n]=this._seeding(t);return n.provide(s)}_seeding(e){const t=this._seeds.get(e);if(t)return t;const s=e.seeder(),n=[s,t=>s.seed(t,this._initial(e,t))];return this._seeds.set(e,n),n}seed(e,t){const[,s]=this._seeding(t);return s(e)}seedIn(e,t){return this.newValues(t).get.bind(e)}newValues(e=!0){if(!e&&this._nonCachedValues)return this._nonCachedValues;const t=new Map,s=this;class n extends F{get({[q]:n},r){const i=t.get(n);if(null!=i)return i;const[o,a]=function(e,t,n){const[r,i]=function(e,t){const{seedKey:n}=t,[r,i]=s._seeding(n);if(n!==t)return[r,e.get(n)];return[r,i(e)]}(e,t);let o=!1;const a={context:e,seeder:r,seed:i,byDefault:n&&"or"in n?()=>(o=!0,n.or):e=>{const s=e();if(null==s)throw new Z(t);return s}};n&&"or"in n&&(a.or=n.or);return[t.grow(a),o]}(this,n,r);return e&&!a&&t.set(n,o),o}}return e?new n:this._nonCachedValues=new n}append(e){return new U((t,s)=>{const[n,r]=this._seeding(t);return n.combine(r(s),e.seed(s,t),s)})}}class I{constructor(){this._providers=[]}provide(e){return this._providers.push(e),()=>{const t=this._providers.indexOf(e);t>=0&&this._providers.splice(t,1)}}seed(t,s=j.from(D)){return j.from([s,G(t,this._providers)]).flatMap(e)}isEmpty(e){return!!f(e).next().done}combine(t,s){return j.from([t,s]).flatMap(e)}}class B extends M{seeder(){return new I}}class N extends L{constructor(e,t){super(e),this.seedKey=t||new B(this)}}class V extends N{constructor(e,{seedKey:s,byDefault:n=t}={}){super(e,s),this.byDefault=n}grow(e){const t=function(e){if(p(e))return e[e.length-1];if(d(e))return w(e.reverse());let t;for(const s of e)t=s;return t}(e.seed);return null!=t?t:e.byDefault(()=>this.byDefault(e.context,this))}}class J extends N{constructor(e,{seedKey:t,byDefault:s=r()}={}){super(e,t),this.byDefault=s}grow(e){const t=Array.from(e.seed);return t.length?t:e.byDefault(()=>{const t=this.byDefault(e.context,this);if(t)return Array.from(t)})}}function G(e,t){return j.from(T(t.map(e=>[e]))).map(t=>{if(t.length>1)return t[1];const s=t[0](e);return t.push(s),s}).filter(s)}const Q=Symbol("after-event");function W(e){return Q in e}const X=Symbol("events-supply");class H{get[X](){return this}needs(e){return Y(e).whenOff(e=>this.off(e)),this}}function Y(e){return e[X]}function ee(e=t){let s,n=r=>{s=e=>e(r),n=t,e(r)};s=e=>{const t=n;n=s=>{t(s),e(s)}};return new class extends H{get isOff(){return n===t}off(e){return n(e),this}whenOff(e){return s(e),this}}}class te extends H{get isOff(){return!0}off(){return this}whenOff(e){return e(),this}}const se=new te;function ne(){return se}function re(e){let s;return s="function"==typeof e?{supply:ee(),receive(t,...s){e(...s)}}:{supply:e.supply||ee(),receive(t,...s){this.supply.isOff||e.receive(t,...s)}},s.supply.whenOff(()=>s.receive=t),s}const ie=Symbol("on-event");class oe{constructor(){this._rcvs=new Set,this.send=function(e){let t=function s(n){let r=e;const i=[];t=e=>i.push(e);try{for(;;){r=ae(r,n);const e=i.shift();if(!e)break;n=e}}finally{t=s}};return(...e)=>t(e)}(this._rcvs),this[X]=ee(e=>{this._rcvs.forEach(({supply:t})=>t.off(e))})}get size(){return this._rcvs.size}[ie](e){return this.on(e)}on(e){const t=re(e);return this._rcvs.add(t),t.supply.needs(this).whenOff(()=>this._rcvs.delete(t))}done(e){return Y(this).off(e),this}}function ae(e,t){const s=[];for(const n of e){const e=s.length;s.push(n);const r={onRecurrent(t){s[e]=re({supply:n.supply,receive(e,...s){t(...s)}})}};n.receive(r,...t)}return s}function ce(e){return t=>e({supply:t.supply,receive:(e,...s)=>{t.receive(e,...s),t.supply.off()}})}function ue(e){const t=new oe;let s,n;return r=>{if(t.size||(n=[],s=ee(()=>n=void 0),e({supply:s,receive(e,...s){n&&(t.size?n=void 0:n.push(s)),t.send(...s)}})),r.supply.needs(s),t.on(r).whenOff(e=>{t.size||s.off(e)}),n){const e=new oe;e.on(r),n.forEach(t=>e.send(...t))}}}function le(e,t,s){const n=Y(t);return t=>{if(s){const r=ee().needs(n);s.needs(r),e({supply:r,receive:t.receive.bind(t)})}else t.supply.needs(n),e(t)}}class he extends Function{get[ie](){return this}get once(){return pe(ce(this))}tillOff(e,t){return pe(le(this,e,t))}consume(e){let t=ne();const s=this((...s)=>{const n=t;try{t=Y(e(...s)||ne())}finally{t!==n&&n.off()}});return ee(e=>{t.off(e),s.off(e)}).needs(s)}share(){return pe(ue(this))}thru(...e){return pe(ue(this.thru_(...e)))}thru_(...e){return function(e,s,n,r){return s(s=>{const o=[];e({supply:s.supply,receive(e,...c){const u=(c,l)=>{const h=c>=r.length;++c;const p=o[c];if(p){const e=p.supply;return p.supply=l,[p.chain,e]}const d=c<r.length?r[c]:t,f={chain:{call(e,t){g(e(...t),t)},pass(e,t){g(e(t),[t])},skip(){f.supply.off()},onEvent(e,t){const s=ee().needs(f.supply);n(t)({supply:s,receive(t,...n){g(e(...n),n,s)}})}},supply:l};return o[c]=f,[f.chain,ne()];function g(t,n,r=f.supply){const[o,l]=u(c,ee().needs(r));try{a(t)?t[i](o,d):h?s.receive(e,...n):o.pass(d,t)}finally{l.off()}}},[l,h]=u(0,ee().needs(s.supply));try{l.call(r[0],c)}finally{h.off()}}})})}(this,pe,de,e)}}function pe(e){const t=t=>{const s=re(t),{supply:n}=s;return n.isOff||e(s),n};return Object.setPrototypeOf(t,he.prototype),t}function de(e){const t=ie in e?e[ie]:e[Q];return t instanceof he?t:pe(t.bind(e))}const fe=pe(({supply:e})=>e.off());class ge{constructor(e){this._keeper=e}thru(...e){return this.thru_(...e).share()}thru_(...e){return ye(this._keeper.thru_(...e))}}class _e extends he{get[Q](){return this}get keep(){return new ge(this)}get once(){return me(ce(this))}tillOff(e,t){return me(le(this,e,t))}share(){return me(ue(this))}}function me(e,s=ke){let n,r=0;const i=i=>{let o=t;const a=re(i);if(a.supply.isOff)return a.supply;const c=ee().needs(a.supply);let u=!1;return e({supply:c,receive(e,...t){u=!0,n=t,o(e,...t)}}),++r,c.isOff&&!u||(a.receive({onRecurrent(e){o=(t,...s)=>e(...s)}},...n||(n=s())),o=(e,...t)=>a.receive(e,...t)),c.whenOff(e=>{--r||(n=void 0),a.supply.off(e)}),c};return Object.setPrototypeOf(i,_e.prototype),i}function ye(e,t){if(!W(e))return function(e,t){return me(t=>e[ie](t),t)}(e,t);const s=e[Q];return s instanceof _e?s:me(s.bind(e))}function be(...e){return me(()=>ee(),n(e))}function ke(){throw new Error("No events to send")}function we(e){const s=Object.keys(e);return me((function(n){const r=new oe,i=r.on(n);let o=t;const a={};s.forEach(t=>{i.needs(e[t][Q]((...e)=>{a[t]=e,o()}).needs(i))}),i.isOff||(o=()=>r.send(a))}),(function(){const t={};return s.forEach(s=>ye(e[s]).once((...e)=>t[s]=e)),[t]})).share()}function xe(...e){return me((function(s){const n=new oe,r=n.on(s);let i=t;const o=[];e.forEach((e,t)=>{r.needs(e[Q]((...e)=>{o[t]=e,i()}).needs(r))}),r.isOff||(i=()=>n.send(...o))}),(function(){const t=[];return e.forEach(e=>ye(e).once((...e)=>t.push(e))),t})).share()}function ve(e){return o((t,s)=>t.onEvent(s,ye(e)))}function Oe(e){return o((t,s)=>t.onEvent(s,e))}var Ae;class Se extends oe{constructor(){super(...arguments),this.on=pe(e=>super.on(e)),this[Ae]=this.on}}function $e(...e){return e.length?pe(t=>{const{supply:s}=t;let n=e.length;const r=e=>{--n||s.off(e)},i=(e,...s)=>{t.receive(e,...s)};e.forEach(e=>de(e)({supply:ee(r).needs(s),receive:i}))}).share():fe}function je(e){return pe(t=>{const{supply:s}=t,n=new oe;n.on(t);const r=ee();let i=0;const o=de(e).tillOff(s,r).thru_(e=>(++i,e));let a=[],c=1,u=0;r.whenOff(e=>{i||t.supply.off(e)}),function(e){return pe(t=>{const{supply:s}=t,n=new oe;n.on(t);let r=0;e[ie]({supply:s,receive(e,t){const i=++r;Promise.resolve().then(()=>t).then(e=>n.send(e,i),e=>s.off(e))}})})}(o)({supply:s,receive(e,s,o){const l=o-c;if(a[l]=s,++u,u>l){let e;u===a.length?(e=a,a=[]):e=a.splice(0,l+1),c+=e.length,u-=e.length,i-=e.length,n.send(...e),!i&&r.isOff&&t.supply.needs(r)}}})})}function ze(e){return Array.isArray(e)?e:[e]}Ae=ie;class Ee{constructor(e){this._drop=e,this.emitter=new Se,this._nested=new Map,this.emitter.on((e,t,s)=>{const n=(e=ze(e))[0],r=this._nested.get(n);r&&r.emitter.send(e.slice(1),t,s)})}on(e){const t=this.emitter.on(e);return ee(e=>{t.off(e),this._dropIfEmpty()}).needs(t)}nest(e,t){const s=this._nested.get(e);if(s||t)return s;const n=new Ee(()=>this._remove(e));return this._nested.set(e,n),n}done(e){for(const t of this._nested.values())t.done(e);this.emitter.done(e)}_remove(e){this._nested.delete(e),this._dropIfEmpty()}_dropIfEmpty(){!this._nested.size&&this.emitter.size<=1&&this._drop()}}class Re{constructor(){this._root=new Ee(t)}on(e,t){return this._entry(e).on(t)}send(e,t,s){this._root.emitter.send(e,t,s)}done(e,t){const s=this._entry(e,!0);s&&s.done(t)}_entry(e,t){let s=this._root;for(const n of e){const e=s.nest(n,t);if(!e)return;s=e}return s}}class Te{constructor(e,t){this._trackers=e,this._path=t,this.update=(e,t,s)=>{this._trackers.send([...this._path,...ze(e)],t,s)},this.onUpdate=pe(e=>this._trackers.on(this._path,e))}get _tracker(){return this}get[ie](){return this.onUpdate}track(e){return(e=ze(e)).length?new Te(this._trackers,[...this._path,...e]):this}done(e){this._trackers.done(this._path,e)}}class De{constructor(){this._tracker=new Te(new Re,[])}get onUpdate(){return this._tracker.onUpdate}get[ie](){return this.onUpdate}get update(){return this._tracker.update}track(e){const t=this._tracker.track(e);return t===this._tracker?this:t}done(e){this._tracker.done(e)}}class Ce{constructor(){this._by=ne(),this.read=me(e=>{return this.on({supply:(t=e).supply,receive(e,s){t.receive({onRecurrent(t){e.onRecurrent(e=>t(e))}},s)}});var t},()=>[this.it])}get[ie](){return this.on}get[Q](){return this.read}by(e,t){const s=e=>(W(e)?e[Q]:e[ie])(e=>this.it=e);if(this.byNone(),t){const n=e;this._by=de(n).consume((...e)=>{const n=t(...e);if(n)return s(n)})}else{const t=e;this._by=s(t)}return this._by.whenOff(()=>this._by=ne()),this}byNone(e){return this._by.off(e),this}done(e){return Y(this).off(e),this}}class qe extends Ce{constructor(e){super(),this._it=e,this._on=new Se}get on(){return this._on.on}get[X](){return Y(this._on)}get it(){return this._it}set it(e){const t=this._it;t!==e&&(this._it=e,this._on.send(e,t))}}function Le(e){return new qe(e)}class Me{name(e,t){if("string"==typeof e)return e;const[s,n]=e;return n.name(t(n),s,this)}}class Ze extends Me{applyAlias(e,t){return`${t}-${e}`}}const Pe=new Ze,Ke=new Ze;class Fe extends Me{applyAlias(e,t){return`${e}@${t}`}}const Ue=new Fe;class Ie{constructor(e,...t){this.url=e,this.aliases=t}get alias(){return this.aliases[0]||"ns"}name(e,t,s=Pe){return s.applyAlias(t,e,this)}}function Be(e){return"string"==typeof e||function(e){return Array.isArray(e)&&2===e.length&&"string"==typeof e[0]&&e[1]instanceof Ie}(e)}function Ne(){const e=new Map,t=new Map;return function(s){const n=e.get(s.url);if(n)return n;const r=s.alias;let i=0;for(const n of[r,...s.aliases]){const r=t.get(n);if(!r)return e.set(s.url,n),t.set(n,1),n;i||(i=r)}const o=r+ ++i;return e.set(s.url,o),t.set(r,i),o}}class Ve{constructor(){this._providers=Le([])}provide(e){return this._providers.it=[...this._providers.it,e],()=>{const t=this._providers.it,s=t.indexOf(e);s>=0&&(this._providers.it=t.slice(0,s).concat(t.slice(s+1)))}}seed(e,t=be()){return this.combine(t,function(e,t){return t.read.keep.thru(t=>t.length?ve(xe(...A(A(T(t),t=>t(e)),Je))):u(),Ge)}(e,this._providers))}isEmpty(){return!1}combine(e,t){return xe(e,t).keep.thru(Ge)}}function Je(e){return null==e?be():function(e){return("object"==typeof e||"function"==typeof e)&&W(e)}(e)?ye(e):be(e)}function Ge(...e){return u(...O(e))}class Qe extends M{seeder(){return new Ve}}class We extends L{constructor(e,t){super(e.name+":up"),this._key=e,this.grow=t}get seedKey(){return this._key.seedKey}}class Xe extends L{constructor(e,t){super(e),this.seedKey=t||new Qe(this)}createUpKey(e){return new We(this,e)}}class He extends Xe{constructor(e,{seedKey:s,byDefault:n=t}={}){super(e,s),this.byDefault=n}get upKey(){return this}grow(e){return e.seed.keep.thru((...t)=>{if(t.length)return c(t[t.length-1]);const s=e.byDefault(()=>{const t=this.byDefault(e.context,this);return t&&be(t)});return ve(null!=s?s:me(()=>{throw new Z(this)}))})}}class Ye extends Xe{constructor(e,{seedKey:s,byDefault:n=t}={}){super(e,s),this.byDefault=(e,t)=>n(e,t)||(()=>{throw new Z(this)}),this.upKey=this.createUpKey(e=>e.seed.keep.thru((...t)=>{if(t.length)return t[t.length-1];const s=()=>be(this.byDefault(e.context,this));return ve(e.byDefault(s)||s())}))}grow(e){let t;return e.context.get(this.upKey,"or"in e?{or:null!=e.or?be(e.or):e.or}:void 0)(e=>t=e),(...e)=>t(...e)}}const et={by(e={}){let t;return{get node(){return e.node},get window(){return t||(t=e.window||e.node&&((s=e.node).ownerDocument||s).defaultView||window);var s},error(...t){e&&e.error?e.error(...t):console.error(...t)}}}};const tt={by({schedule:e,replace:t=(()=>{})}){const s=[];return{schedule:e,add(e){s.push(e)},pull:()=>s.shift(),reset(){const s=tt.by({schedule:e,replace:t});return t(s),s}}}},st=Symbol("scheduled-render-q");class nt{constructor(e,t){this.q=e,this.schedule=this.doSchedule,this.ref=t||[this]}static by(e,t){return e[st]||(e[st]=new nt(e,t))}add(e){this.q.add(e)}doSchedule(e){this.schedule=()=>{};const t={get config(){return e},postpone:e=>this.add(e)};this.q.schedule(()=>{const e=this.reset();e.suspend(),this.exec(t),e.resume()})}exec(e){for(;;){const t=this.q.pull();if(!t)break;t(e)}}reset(){return this.ref[0]=nt.by(this.q.reset(),this.ref)}suspend(){this.schedule=e=>{this.scheduled=e,this.schedule=()=>{}}}resume(){this.scheduled?this.doSchedule(this.scheduled):this.schedule=this.doSchedule}}function rt(e){return t=>{const s=et.by(t),n=nt.by(e.newQueue(s)).ref;let r=[];return e=>{const[t]=r,[i]=n;if(t===i)r[1]=e;else{const t=r=[i,e];i.add(e=>{try{t[1]({get config(){return s},postpone(t){e.postpone(t)}})}catch(e){s.error(e)}})}i.schedule(s)}}}const it=new WeakMap;let ot=rt({newQueue({window:e}){const t=it.get(e);if(t)return t;const s=tt.by({schedule:t=>e.requestAnimationFrame(t),replace:t=>it.set(e,t)});return it.set(e,s),s}});function at(e){return ot(e)}class ct extends he{get once(){return ut(ce(this))}tillOff(e,t){return ut(le(this,e,t))}get capture(){return ut((e,t)=>null==t?this(e,!0):"object"==typeof t&&null==t.capture?this(e,Object.assign(Object.assign({},t),{capture:!0})):this(e,t))}get instead(){return ut((e,t)=>{const s=re(e);return this({supply:s.supply,receive(e,t){t.preventDefault(),s.receive(e,t)}},t)})}get just(){return ut((e,t)=>{const s=re(e);return this({supply:s.supply,receive(e,t){t.stopPropagation(),s.receive(e,t)}},t)})}get last(){return ut((e,t)=>{const s=re(e);return this({supply:s.supply,receive(e,t){t.stopImmediatePropagation(),s.receive(e,t)}},t)})}get passive(){return ut((e,t)=>null==t?this(e,{passive:!0}):"boolean"==typeof t?this(e,{capture:t,passive:!0}):null==t.passive?this(e,Object.assign(Object.assign({},t),{passive:!0})):this(e,t))}}function ut(e){const t=(t,s)=>{const n=re(t);return e(n,s),n.supply};return Object.setPrototypeOf(t,ct.prototype),t}var lt;const ht={onRecurrent:t};class pt{constructor(e){this[lt]=ee(),this._target=e}on(e){return ut((t,s)=>{const{supply:n}=t;if(n.needs(Y(this)),!n.isOff){const n=e=>t.receive(ht,e);this._target.addEventListener(e,n,s),t.supply.whenOff(()=>this._target.removeEventListener(e,n))}})}dispatch(e){return!Y(this).isOff&&this._target.dispatchEvent(e)}done(e){return Y(this).off(e),this}}function dt(e,t,s,n){var r,i=arguments.length,o=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,s):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,s,n);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(o=(i<3?r(o):i>3?r(t,s,o):r(t,s))||o);return i>3&&o&&Object.defineProperty(t,s,o),o}lt=X;var ft=function(e,t){return e(t={exports:{}},t.exports),t.exports}((function(e){function t(){return{baseUrl:null,breaks:!1,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartLists:!1,smartypants:!1,xhtml:!1}}e.exports={defaults:{baseUrl:null,breaks:!1,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartLists:!1,smartypants:!1,xhtml:!1},getDefaults:t,changeDefaults:function(t){e.exports.defaults=t}}}));ft.defaults,ft.getDefaults,ft.changeDefaults;const gt=/[&<>"']/,_t=/[&<>"']/g,mt=/[<>"']|&(?!#?\w+;)/,yt=/[<>"']|&(?!#?\w+;)/g,bt={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},kt=e=>bt[e];const wt=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/gi;function xt(e){return e.replace(wt,(e,t)=>"colon"===(t=t.toLowerCase())?":":"#"===t.charAt(0)?"x"===t.charAt(1)?String.fromCharCode(parseInt(t.substring(2),16)):String.fromCharCode(+t.substring(1)):"")}const vt=/(^|[^\[])\^/g;const Ot=/[^\w:]/g,At=/^$|^[a-z][a-z0-9+.-]*:|^[?#]/i;const St={},$t=/^[^:]+:\/*[^/]*$/,jt=/^([^:]+:)[\s\S]*$/,zt=/^([^:]+:\/*[^/]*)[\s\S]*$/;function Et(e,t){St[" "+e]||($t.test(e)?St[" "+e]=e+"/":St[" "+e]=Rt(e,"/",!0));const s=-1===(e=St[" "+e]).indexOf(":");return"//"===t.substring(0,2)?s?t:e.replace(jt,"$1")+t:"/"===t.charAt(0)?s?t:e.replace(zt,"$1")+t:e+t}function Rt(e,t,s){const n=e.length;if(0===n)return"";let r=0;for(;r<n;){const i=e.charAt(n-r-1);if(i!==t||s){if(i===t||!s)break;r++}else r++}return e.substr(0,n-r)}var Tt={escape:function(e,t){if(t){if(gt.test(e))return e.replace(_t,kt)}else if(mt.test(e))return e.replace(yt,kt);return e},unescape:xt,edit:function(e,t){e=e.source||e,t=t||"";const s={replace:(t,n)=>(n=(n=n.source||n).replace(vt,"$1"),e=e.replace(t,n),s),getRegex:()=>new RegExp(e,t)};return s},cleanUrl:function(e,t,s){if(e){let e;try{e=decodeURIComponent(xt(s)).replace(Ot,"").toLowerCase()}catch(e){return null}if(0===e.indexOf("javascript:")||0===e.indexOf("vbscript:")||0===e.indexOf("data:"))return null}t&&!At.test(s)&&(s=Et(t,s));try{s=encodeURI(s).replace(/%25/g,"%")}catch(e){return null}return s},resolveUrl:Et,noopTest:{exec:function(){}},merge:function(e){let t,s,n=1;for(;n<arguments.length;n++)for(s in t=arguments[n],t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e},splitCells:function(e,t){const s=e.replace(/\|/g,(e,t,s)=>{let n=!1,r=t;for(;--r>=0&&"\\"===s[r];)n=!n;return n?"|":" |"}).split(/ \|/);let n=0;if(s.length>t)s.splice(t);else for(;s.length<t;)s.push("");for(;n<s.length;n++)s[n]=s[n].trim().replace(/\\\|/g,"|");return s},rtrim:Rt,findClosingBracket:function(e,t){if(-1===e.indexOf(t[1]))return-1;const s=e.length;let n=0,r=0;for(;r<s;r++)if("\\"===e[r])r++;else if(e[r]===t[0])n++;else if(e[r]===t[1]&&(n--,n<0))return r;return-1},checkSanitizeDeprecation:function(e){e&&e.sanitize&&!e.silent&&console.warn("marked(): sanitize and sanitizer parameters are deprecated since version 0.7.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/#/USING_ADVANCED.md#options")}};const{noopTest:Dt,edit:Ct,merge:qt}=Tt,Lt={newline:/^\n+/,code:/^( {4}[^\n]+\n*)+/,fences:/^ {0,3}(`{3,}|~{3,})([^`~\n]*)\n(?:|([\s\S]*?)\n)(?: {0,3}\1[~`]* *(?:\n+|$)|$)/,hr:/^ {0,3}((?:- *){3,}|(?:_ *){3,}|(?:\* *){3,})(?:\n+|$)/,heading:/^ {0,3}(#{1,6}) +([^\n]*?)(?: +#+)? *(?:\n+|$)/,blockquote:/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/,list:/^( {0,3})(bull) [\s\S]+?(?:hr|def|\n{2,}(?! )(?!\1bull )\n*|\s*$)/,html:"^ {0,3}(?:<(script|pre|style)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?\\?>\\n*|<![A-Z][\\s\\S]*?>\\n*|<!\\[CDATA\\[[\\s\\S]*?\\]\\]>\\n*|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:\\n{2,}|$)|<(?!script|pre|style)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:\\n{2,}|$)|</(?!script|pre|style)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:\\n{2,}|$))",def:/^ {0,3}\[(label)\]: *\n? *<?([^\s>]+)>?(?:(?: +\n? *| *\n *)(title))? *(?:\n+|$)/,nptable:Dt,table:Dt,lheading:/^([^\n]+)\n {0,3}(=+|-+) *(?:\n+|$)/,_paragraph:/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html)[^\n]+)*)/,text:/^[^\n]+/,_label:/(?!\s*\])(?:\\[\[\]]|[^\[\]])+/,_title:/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/};Lt.def=Ct(Lt.def).replace("label",Lt._label).replace("title",Lt._title).getRegex(),Lt.bullet=/(?:[*+-]|\d{1,9}\.)/,Lt.item=/^( *)(bull) ?[^\n]*(?:\n(?!\1bull ?)[^\n]*)*/,Lt.item=Ct(Lt.item,"gm").replace(/bull/g,Lt.bullet).getRegex(),Lt.list=Ct(Lt.list).replace(/bull/g,Lt.bullet).replace("hr","\\n+(?=\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$))").replace("def","\\n+(?="+Lt.def.source+")").getRegex(),Lt._tag="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",Lt._comment=/<!--(?!-?>)[\s\S]*?-->/,Lt.html=Ct(Lt.html,"i").replace("comment",Lt._comment).replace("tag",Lt._tag).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),Lt.paragraph=Ct(Lt._paragraph).replace("hr",Lt.hr).replace("heading"," {0,3}#{1,6} +").replace("|lheading","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}|~{3,})[^`\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|!--)").replace("tag",Lt._tag).getRegex(),Lt.blockquote=Ct(Lt.blockquote).replace("paragraph",Lt.paragraph).getRegex(),Lt.normal=qt({},Lt),Lt.gfm=qt({},Lt.normal,{nptable:/^ *([^|\n ].*\|.*)\n *([-:]+ *\|[-| :]*)(?:\n((?:.*[^>\n ].*(?:\n|$))*)\n*|$)/,table:/^ *\|(.+)\n *\|?( *[-:]+[-| :]*)(?:\n((?: *[^>\n ].*(?:\n|$))*)\n*|$)/}),Lt.pedantic=qt({},Lt.normal,{html:Ct("^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:\"[^\"]*\"|'[^']*'|\\s[^'\"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))").replace("comment",Lt._comment).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^ *(#{1,6}) *([^\n]+?) *(?:#+ *)?(?:\n+|$)/,fences:Dt,paragraph:Ct(Lt.normal._paragraph).replace("hr",Lt.hr).replace("heading"," *#{1,6} *[^\n]").replace("lheading",Lt.lheading).replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").getRegex()});const Mt={escape:/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,autolink:/^<(scheme:[^\s\x00-\x1f<>]*|email)>/,url:Dt,tag:"^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",link:/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/,reflink:/^!?\[(label)\]\[(?!\s*\])((?:\\[\[\]]?|[^\[\]\\])+)\]/,nolink:/^!?\[(?!\s*\])((?:\[[^\[\]]*\]|\\[\[\]]|[^\[\]])*)\](?:\[\])?/,strong:/^__([^\s_])__(?!_)|^\*\*([^\s*])\*\*(?!\*)|^__([^\s][\s\S]*?[^\s])__(?!_)|^\*\*([^\s][\s\S]*?[^\s])\*\*(?!\*)/,em:/^_([^\s_])_(?!_)|^\*([^\s*<\[])\*(?!\*)|^_([^\s<][\s\S]*?[^\s_])_(?!_|[^\spunctuation])|^_([^\s_<][\s\S]*?[^\s])_(?!_|[^\spunctuation])|^\*([^\s<"][\s\S]*?[^\s\*])\*(?!\*|[^\spunctuation])|^\*([^\s*"<\[][\s\S]*?[^\s])\*(?!\*)/,code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,br:/^( {2,}|\\)\n(?!\s*$)/,del:Dt,text:/^(`+|[^`])(?:[\s\S]*?(?:(?=[\\<!\[`*]|\b_|$)|[^ ](?= {2,}\n))|(?= {2,}\n))/,_punctuation:"!\"#$%&'()*+,\\-./:;<=>?@\\[^_{|}~"};Mt.em=Ct(Mt.em).replace(/punctuation/g,Mt._punctuation).getRegex(),Mt._escapes=/\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/g,Mt._scheme=/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/,Mt._email=/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/,Mt.autolink=Ct(Mt.autolink).replace("scheme",Mt._scheme).replace("email",Mt._email).getRegex(),Mt._attribute=/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/,Mt.tag=Ct(Mt.tag).replace("comment",Lt._comment).replace("attribute",Mt._attribute).getRegex(),Mt._label=/(?:\[[^\[\]]*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,Mt._href=/<(?:\\[<>]?|[^\s<>\\])*>|[^\s\x00-\x1f]*/,Mt._title=/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/,Mt.link=Ct(Mt.link).replace("label",Mt._label).replace("href",Mt._href).replace("title",Mt._title).getRegex(),Mt.reflink=Ct(Mt.reflink).replace("label",Mt._label).getRegex(),Mt.normal=qt({},Mt),Mt.pedantic=qt({},Mt.normal,{strong:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,em:/^_(?=\S)([\s\S]*?\S)_(?!_)|^\*(?=\S)([\s\S]*?\S)\*(?!\*)/,link:Ct(/^!?\[(label)\]\((.*?)\)/).replace("label",Mt._label).getRegex(),reflink:Ct(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",Mt._label).getRegex()}),Mt.gfm=qt({},Mt.normal,{escape:Ct(Mt.escape).replace("])","~|])").getRegex(),_extended_email:/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,url:/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,_backpedal:/(?:[^?!.,:;*_~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_~)]+(?!$))+/,del:/^~+(?=\S)([\s\S]*?\S)~+/,text:/^(`+|[^`])(?:[\s\S]*?(?:(?=[\\<!\[`*~]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@))|(?= {2,}\n|[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@))/}),Mt.gfm.url=Ct(Mt.gfm.url,"i").replace("email",Mt.gfm._extended_email).getRegex(),Mt.breaks=qt({},Mt.gfm,{br:Ct(Mt.br).replace("{2,}","*").getRegex(),text:Ct(Mt.gfm.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()});var Zt={block:Lt,inline:Mt};const{defaults:Pt}=ft,{block:Kt}=Zt,{rtrim:Ft,splitCells:Ut,escape:It}=Tt;var Bt=class e{constructor(e){this.tokens=[],this.tokens.links=Object.create(null),this.options=e||Pt,this.rules=Kt.normal,this.options.pedantic?this.rules=Kt.pedantic:this.options.gfm&&(this.rules=Kt.gfm)}static get rules(){return Kt}static lex(t,s){return new e(s).lex(t)}lex(e){return e=e.replace(/\r\n|\r/g,"\n").replace(/\t/g,"    "),this.token(e,!0)}token(e,t){let s,n,r,i,o,a,c,u,l,h,p,d,f,g,_,m;for(e=e.replace(/^ +$/gm,"");e;)if((r=this.rules.newline.exec(e))&&(e=e.substring(r[0].length),r[0].length>1&&this.tokens.push({type:"space"})),r=this.rules.code.exec(e)){const t=this.tokens[this.tokens.length-1];e=e.substring(r[0].length),t&&"paragraph"===t.type?t.text+="\n"+r[0].trimRight():(r=r[0].replace(/^ {4}/gm,""),this.tokens.push({type:"code",codeBlockStyle:"indented",text:this.options.pedantic?r:Ft(r,"\n")}))}else if(r=this.rules.fences.exec(e))e=e.substring(r[0].length),this.tokens.push({type:"code",lang:r[2]?r[2].trim():r[2],text:r[3]||""});else if(r=this.rules.heading.exec(e))e=e.substring(r[0].length),this.tokens.push({type:"heading",depth:r[1].length,text:r[2]});else if((r=this.rules.nptable.exec(e))&&(a={type:"table",header:Ut(r[1].replace(/^ *| *\| *$/g,"")),align:r[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:r[3]?r[3].replace(/\n$/,"").split("\n"):[]},a.header.length===a.align.length)){for(e=e.substring(r[0].length),p=0;p<a.align.length;p++)/^ *-+: *$/.test(a.align[p])?a.align[p]="right":/^ *:-+: *$/.test(a.align[p])?a.align[p]="center":/^ *:-+ *$/.test(a.align[p])?a.align[p]="left":a.align[p]=null;for(p=0;p<a.cells.length;p++)a.cells[p]=Ut(a.cells[p],a.header.length);this.tokens.push(a)}else if(r=this.rules.hr.exec(e))e=e.substring(r[0].length),this.tokens.push({type:"hr"});else if(r=this.rules.blockquote.exec(e))e=e.substring(r[0].length),this.tokens.push({type:"blockquote_start"}),r=r[0].replace(/^ *> ?/gm,""),this.token(r,t),this.tokens.push({type:"blockquote_end"});else if(r=this.rules.list.exec(e)){for(e=e.substring(r[0].length),i=r[2],g=i.length>1,c={type:"list_start",ordered:g,start:g?+i:"",loose:!1},this.tokens.push(c),r=r[0].match(this.rules.item),u=[],s=!1,f=r.length,p=0;p<f;p++)a=r[p],h=a.length,a=a.replace(/^ *([*+-]|\d+\.) */,""),~a.indexOf("\n ")&&(h-=a.length,a=this.options.pedantic?a.replace(/^ {1,4}/gm,""):a.replace(new RegExp("^ {1,"+h+"}","gm"),"")),p!==f-1&&(o=Kt.bullet.exec(r[p+1])[0],(i.length>1?1===o.length:o.length>1||this.options.smartLists&&o!==i)&&(e=r.slice(p+1).join("\n")+e,p=f-1)),n=s||/\n\n(?!\s*$)/.test(a),p!==f-1&&(s="\n"===a.charAt(a.length-1),n||(n=s)),n&&(c.loose=!0),_=/^\[[ xX]\] /.test(a),m=void 0,_&&(m=" "!==a[1],a=a.replace(/^\[[ xX]\] +/,"")),l={type:"list_item_start",task:_,checked:m,loose:n},u.push(l),this.tokens.push(l),this.token(a,!1),this.tokens.push({type:"list_item_end"});if(c.loose)for(f=u.length,p=0;p<f;p++)u[p].loose=!0;this.tokens.push({type:"list_end"})}else if(r=this.rules.html.exec(e))e=e.substring(r[0].length),this.tokens.push({type:this.options.sanitize?"paragraph":"html",pre:!this.options.sanitizer&&("pre"===r[1]||"script"===r[1]||"style"===r[1]),text:this.options.sanitize?this.options.sanitizer?this.options.sanitizer(r[0]):It(r[0]):r[0]});else if(t&&(r=this.rules.def.exec(e)))e=e.substring(r[0].length),r[3]&&(r[3]=r[3].substring(1,r[3].length-1)),d=r[1].toLowerCase().replace(/\s+/g," "),this.tokens.links[d]||(this.tokens.links[d]={href:r[2],title:r[3]});else if((r=this.rules.table.exec(e))&&(a={type:"table",header:Ut(r[1].replace(/^ *| *\| *$/g,"")),align:r[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:r[3]?r[3].replace(/\n$/,"").split("\n"):[]},a.header.length===a.align.length)){for(e=e.substring(r[0].length),p=0;p<a.align.length;p++)/^ *-+: *$/.test(a.align[p])?a.align[p]="right":/^ *:-+: *$/.test(a.align[p])?a.align[p]="center":/^ *:-+ *$/.test(a.align[p])?a.align[p]="left":a.align[p]=null;for(p=0;p<a.cells.length;p++)a.cells[p]=Ut(a.cells[p].replace(/^ *\| *| *\| *$/g,""),a.header.length);this.tokens.push(a)}else if(r=this.rules.lheading.exec(e))e=e.substring(r[0].length),this.tokens.push({type:"heading",depth:"="===r[2].charAt(0)?1:2,text:r[1]});else if(t&&(r=this.rules.paragraph.exec(e)))e=e.substring(r[0].length),this.tokens.push({type:"paragraph",text:"\n"===r[1].charAt(r[1].length-1)?r[1].slice(0,-1):r[1]});else if(r=this.rules.text.exec(e))e=e.substring(r[0].length),this.tokens.push({type:"text",text:r[0]});else if(e)throw new Error("Infinite loop on byte: "+e.charCodeAt(0));return this.tokens}};const{defaults:Nt}=ft,{cleanUrl:Vt,escape:Jt}=Tt;var Gt=class{constructor(e){this.options=e||Nt}code(e,t,s){const n=(t||"").match(/\S*/)[0];if(this.options.highlight){const t=this.options.highlight(e,n);null!=t&&t!==e&&(s=!0,e=t)}return n?'<pre><code class="'+this.options.langPrefix+Jt(n,!0)+'">'+(s?e:Jt(e,!0))+"</code></pre>\n":"<pre><code>"+(s?e:Jt(e,!0))+"</code></pre>"}blockquote(e){return"<blockquote>\n"+e+"</blockquote>\n"}html(e){return e}heading(e,t,s,n){return this.options.headerIds?"<h"+t+' id="'+this.options.headerPrefix+n.slug(s)+'">'+e+"</h"+t+">\n":"<h"+t+">"+e+"</h"+t+">\n"}hr(){return this.options.xhtml?"<hr/>\n":"<hr>\n"}list(e,t,s){const n=t?"ol":"ul";return"<"+n+(t&&1!==s?' start="'+s+'"':"")+">\n"+e+"</"+n+">\n"}listitem(e){return"<li>"+e+"</li>\n"}checkbox(e){return"<input "+(e?'checked="" ':"")+'disabled="" type="checkbox"'+(this.options.xhtml?" /":"")+"> "}paragraph(e){return"<p>"+e+"</p>\n"}table(e,t){return t&&(t="<tbody>"+t+"</tbody>"),"<table>\n<thead>\n"+e+"</thead>\n"+t+"</table>\n"}tablerow(e){return"<tr>\n"+e+"</tr>\n"}tablecell(e,t){const s=t.header?"th":"td";return(t.align?"<"+s+' align="'+t.align+'">':"<"+s+">")+e+"</"+s+">\n"}strong(e){return"<strong>"+e+"</strong>"}em(e){return"<em>"+e+"</em>"}codespan(e){return"<code>"+e+"</code>"}br(){return this.options.xhtml?"<br/>":"<br>"}del(e){return"<del>"+e+"</del>"}link(e,t,s){if(null===(e=Vt(this.options.sanitize,this.options.baseUrl,e)))return s;let n='<a href="'+Jt(e)+'"';return t&&(n+=' title="'+t+'"'),n+=">"+s+"</a>",n}image(e,t,s){if(null===(e=Vt(this.options.sanitize,this.options.baseUrl,e)))return s;let n='<img src="'+e+'" alt="'+s+'"';return t&&(n+=' title="'+t+'"'),n+=this.options.xhtml?"/>":">",n}text(e){return e}},Qt=class{constructor(){this.seen={}}slug(e){let t=e.toLowerCase().trim().replace(/[\u2000-\u206F\u2E00-\u2E7F\\'!"#$%&()*+,./:;<=>?@[\]^`{|}~]/g,"").replace(/\s/g,"-");if(this.seen.hasOwnProperty(t)){const e=t;do{this.seen[e]++,t=e+"-"+this.seen[e]}while(this.seen.hasOwnProperty(t))}return this.seen[t]=0,t}};const{defaults:Wt}=ft,{inline:Xt}=Zt,{findClosingBracket:Ht,escape:Yt}=Tt;var es=class e{constructor(e,t){if(this.options=t||Wt,this.links=e,this.rules=Xt.normal,this.options.renderer=this.options.renderer||new Gt,this.renderer=this.options.renderer,this.renderer.options=this.options,!this.links)throw new Error("Tokens array requires a `links` property.");this.options.pedantic?this.rules=Xt.pedantic:this.options.gfm&&(this.options.breaks?this.rules=Xt.breaks:this.rules=Xt.gfm)}static get rules(){return Xt}static output(t,s,n){return new e(s,n).output(t)}output(t){let s,n,r,i,o,a,c="";for(;t;)if(o=this.rules.escape.exec(t))t=t.substring(o[0].length),c+=Yt(o[1]);else if(o=this.rules.tag.exec(t))!this.inLink&&/^<a /i.test(o[0])?this.inLink=!0:this.inLink&&/^<\/a>/i.test(o[0])&&(this.inLink=!1),!this.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(o[0])?this.inRawBlock=!0:this.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(o[0])&&(this.inRawBlock=!1),t=t.substring(o[0].length),c+=this.options.sanitize?this.options.sanitizer?this.options.sanitizer(o[0]):Yt(o[0]):o[0];else if(o=this.rules.link.exec(t)){const n=Ht(o[2],"()");if(n>-1){const e=(0===o[0].indexOf("!")?5:4)+o[1].length+n;o[2]=o[2].substring(0,n),o[0]=o[0].substring(0,e).trim(),o[3]=""}t=t.substring(o[0].length),this.inLink=!0,r=o[2],this.options.pedantic?(s=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(r),s?(r=s[1],i=s[3]):i=""):i=o[3]?o[3].slice(1,-1):"",r=r.trim().replace(/^<([\s\S]*)>$/,"$1"),c+=this.outputLink(o,{href:e.escapes(r),title:e.escapes(i)}),this.inLink=!1}else if((o=this.rules.reflink.exec(t))||(o=this.rules.nolink.exec(t))){if(t=t.substring(o[0].length),s=(o[2]||o[1]).replace(/\s+/g," "),s=this.links[s.toLowerCase()],!s||!s.href){c+=o[0].charAt(0),t=o[0].substring(1)+t;continue}this.inLink=!0,c+=this.outputLink(o,s),this.inLink=!1}else if(o=this.rules.strong.exec(t))t=t.substring(o[0].length),c+=this.renderer.strong(this.output(o[4]||o[3]||o[2]||o[1]));else if(o=this.rules.em.exec(t))t=t.substring(o[0].length),c+=this.renderer.em(this.output(o[6]||o[5]||o[4]||o[3]||o[2]||o[1]));else if(o=this.rules.code.exec(t))t=t.substring(o[0].length),c+=this.renderer.codespan(Yt(o[2].trim(),!0));else if(o=this.rules.br.exec(t))t=t.substring(o[0].length),c+=this.renderer.br();else if(o=this.rules.del.exec(t))t=t.substring(o[0].length),c+=this.renderer.del(this.output(o[1]));else if(o=this.rules.autolink.exec(t))t=t.substring(o[0].length),"@"===o[2]?(n=Yt(this.mangle(o[1])),r="mailto:"+n):(n=Yt(o[1]),r=n),c+=this.renderer.link(r,null,n);else if(this.inLink||!(o=this.rules.url.exec(t))){if(o=this.rules.text.exec(t))t=t.substring(o[0].length),this.inRawBlock?c+=this.renderer.text(this.options.sanitize?this.options.sanitizer?this.options.sanitizer(o[0]):Yt(o[0]):o[0]):c+=this.renderer.text(Yt(this.smartypants(o[0])));else if(t)throw new Error("Infinite loop on byte: "+t.charCodeAt(0))}else{if("@"===o[2])n=Yt(o[0]),r="mailto:"+n;else{do{a=o[0],o[0]=this.rules._backpedal.exec(o[0])[0]}while(a!==o[0]);n=Yt(o[0]),r="www."===o[1]?"http://"+n:n}t=t.substring(o[0].length),c+=this.renderer.link(r,null,n)}return c}static escapes(t){return t?t.replace(e.rules._escapes,"$1"):t}outputLink(e,t){const s=t.href,n=t.title?Yt(t.title):null;return"!"!==e[0].charAt(0)?this.renderer.link(s,n,this.output(e[1])):this.renderer.image(s,n,Yt(e[1]))}smartypants(e){return this.options.smartypants?e.replace(/---/g,"\u2014").replace(/--/g,"\u2013").replace(/(^|[-\u2014/(\[{"\s])'/g,"$1\u2018").replace(/'/g,"\u2019").replace(/(^|[-\u2014/(\[{\u2018\s])"/g,"$1\u201c").replace(/"/g,"\u201d").replace(/\.{3}/g,"\u2026"):e}mangle(e){if(!this.options.mangle)return e;const t=e.length;let s,n="",r=0;for(;r<t;r++)s=e.charCodeAt(r),Math.random()>.5&&(s="x"+s.toString(16)),n+="&#"+s+";";return n}},ts=class{strong(e){return e}em(e){return e}codespan(e){return e}del(e){return e}text(e){return e}link(e,t,s){return""+s}image(e,t,s){return""+s}br(){return""}};const{defaults:ss}=ft,{merge:ns,unescape:rs}=Tt;var is=class e{constructor(e){this.tokens=[],this.token=null,this.options=e||ss,this.options.renderer=this.options.renderer||new Gt,this.renderer=this.options.renderer,this.renderer.options=this.options,this.slugger=new Qt}static parse(t,s){return new e(s).parse(t)}parse(e){this.inline=new es(e.links,this.options),this.inlineText=new es(e.links,ns({},this.options,{renderer:new ts})),this.tokens=e.reverse();let t="";for(;this.next();)t+=this.tok();return t}next(){return this.token=this.tokens.pop(),this.token}peek(){return this.tokens[this.tokens.length-1]||0}parseText(){let e=this.token.text;for(;"text"===this.peek().type;)e+="\n"+this.next().text;return this.inline.output(e)}tok(){let e="";switch(this.token.type){case"space":return"";case"hr":return this.renderer.hr();case"heading":return this.renderer.heading(this.inline.output(this.token.text),this.token.depth,rs(this.inlineText.output(this.token.text)),this.slugger);case"code":return this.renderer.code(this.token.text,this.token.lang,this.token.escaped);case"table":{let t,s,n,r,i="";for(n="",t=0;t<this.token.header.length;t++)n+=this.renderer.tablecell(this.inline.output(this.token.header[t]),{header:!0,align:this.token.align[t]});for(i+=this.renderer.tablerow(n),t=0;t<this.token.cells.length;t++){for(s=this.token.cells[t],n="",r=0;r<s.length;r++)n+=this.renderer.tablecell(this.inline.output(s[r]),{header:!1,align:this.token.align[r]});e+=this.renderer.tablerow(n)}return this.renderer.table(i,e)}case"blockquote_start":for(e="";"blockquote_end"!==this.next().type;)e+=this.tok();return this.renderer.blockquote(e);case"list_start":{e="";const t=this.token.ordered,s=this.token.start;for(;"list_end"!==this.next().type;)e+=this.tok();return this.renderer.list(e,t,s)}case"list_item_start":{e="";const t=this.token.loose,s=this.token.checked,n=this.token.task;if(this.token.task)if(t)if("text"===this.peek().type){const e=this.peek();e.text=this.renderer.checkbox(s)+" "+e.text}else this.tokens.push({type:"text",text:this.renderer.checkbox(s)});else e+=this.renderer.checkbox(s);for(;"list_item_end"!==this.next().type;)e+=t||"text"!==this.token.type?this.tok():this.parseText();return this.renderer.listitem(e,n,s)}case"html":return this.renderer.html(this.token.text);case"paragraph":return this.renderer.paragraph(this.inline.output(this.token.text));case"text":return this.renderer.paragraph(this.parseText());default:{const e='Token with "'+this.token.type+'" type was not found.';if(!this.options.silent)throw new Error(e);console.log(e)}}}};const{merge:os,checkSanitizeDeprecation:as,escape:cs}=Tt,{getDefaults:us,changeDefaults:ls,defaults:hs}=ft;function ps(e,t,s){if(null==e)throw new Error("marked(): input parameter is undefined or null");if("string"!=typeof e)throw new Error("marked(): input parameter is of type "+Object.prototype.toString.call(e)+", string expected");if(s||"function"==typeof t){s||(s=t,t=null),t=os({},ps.defaults,t||{}),as(t);const n=t.highlight;let r,i,o=0;try{r=Bt.lex(e,t)}catch(e){return s(e)}i=r.length;const a=function(e){if(e)return t.highlight=n,s(e);let i;try{i=is.parse(r,t)}catch(t){e=t}return t.highlight=n,e?s(e):s(null,i)};if(!n||n.length<3)return a();if(delete t.highlight,!i)return a();for(;o<r.length;o++)!function(e){"code"!==e.type?--i||a():n(e.text,e.lang,(function(t,s){return t?a(t):null==s||s===e.text?--i||a():(e.text=s,e.escaped=!0,void(--i||a()))}))}(r[o])}else try{return t=os({},ps.defaults,t||{}),as(t),is.parse(Bt.lex(e,t),t)}catch(e){if(e.message+="\nPlease report this to https://github.com/markedjs/marked.",(t||ps.defaults).silent)return"<p>An error occurred:</p><pre>"+cs(e.message+"",!0)+"</pre>";throw e}}ps.options=ps.setOptions=function(e){return os(ps.defaults,e),ls(ps.defaults),ps},ps.getDefaults=us,ps.defaults=hs,ps.Parser=is,ps.parser=is.parse,ps.Renderer=Gt,ps.TextRenderer=ts,ps.Lexer=Bt,ps.lexer=Bt.lex,ps.InlineLexer=es,ps.inlineLexer=es.output,ps.Slugger=Qt,ps.parse=ps;var ds=ps;function fs({$:e,n:t,t:s,v:n,x:r=[],p:i={},pl:o=[]}){return{$:e,n:t,t:s,v:n,x:r,p:i,pl:o}}function gs({p:e,pl:t},s){const n=s.n||s.v,r=e[n];(!r||!r.n&&s.n)&&(e[n]=s),t.push(s)}function _s(e){return t=>{const s=t.s[t.i];return t.d=e.delimiterOf(s),s}}const ms=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun), \d\d (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) \d\d\d\d \d\d:\d\d:\d\d GMT/;function ys(e,t){return e.s=e.s.substring(e.i),e.i=0,!!e.s.match(ms)&&(t(e.s.substring(e.i,e.i+=29)),!0)}const bs=()=>!1;function ks(e,{named:t=!0,tagged:s=!0,extra:n=!0,next:r=_s(e)}={}){const i=function(e){return(t,s)=>{let n="";for(++t.i;t.i<t.s.length;++t.i){const r=t.s[t.i];if("\\"===r){const e=t.s[++t.i];n+=e||r}else{if(65536&e.delimiterOf(r))return++t.i,void s(n);n+=r}}s(n)}}(e),o=function(e){return(t,s)=>{if(!(262144&e.delimiterOf(t.s[t.i])))return!1;let n="";for(++t.i;t.i<t.s.length;){const s=t.s[t.i++];if(524288&e.delimiterOf(s))break;n+=s}return s(n),!0}}(e),a=n?ks(e,{next:r,tagged:!1,named:!1,extra:!1}):bs;return(e,n)=>{let c,u,l,h="",p="raw";for(;e.i<e.s.length;){const n=r(e);if(e.d){if(12&e.d)break;if(null==u){if(16&e.d){u=h?"":n,++e.i;continue}if(65536&e.d){!s&&h||i(e,e=>{h?(p="tagged-string",c=h):p="quoted-string",h="",u=e});break}if(!h&&o(e,e=>{p="angle-bracketed-string",u=e}))break;u=h,h=""}else{if(65536&e.d){!s&&u||i(e,e=>{u?(p="tagged-string",c=u):p="quoted-string",u=e});break}if(!u&&o(e,e=>{p="angle-bracketed-string",u=e}))break}}if(null==u){if(!h&&ys(e,e=>u=e)){p="date-time";break}t?h+=n:u=n}else{if(!u&&ys(e,e=>u=e)){p="date-time";break}u+=n}++e.i}if(null==u){if(!h)return!1;l=fs({$:p,v:h})}else l=fs({$:p,n:h||void 0,t:c,v:u});for(;a(e,e=>l.x.push(e)););return n(l),!0}}function ws(e){return t=>{let s=t.s[t.i];return"\\"!==s?(t.d=e.delimiterOf(s),s):(++t.i,t.i<t.s.length?(s=t.s[t.i],t.d=e.delimiterOf(s)?1:0):t.d=1,s)}}function xs(e){return t=>{const s=t.i;do{const s=t.s[t.i];if(!(2&e.delimiterOf(s)))break;t.i++}while(t.i<t.s.length);return t.i!==s}}function vs(e,t={}){const s=xs(e),n=ks(e,Object.assign(Object.assign({},t),{tagged:!1}));return(t,r)=>!!(8&e.delimiterOf(t.s[t.i]))&&(++t.i,s(t),n(t,r))}const Os={" ":7,"\t":7,",":5,";":9,'"':65569,"\\":33,"<":262145,">":524289,"=":17,"(":1,")":1,"/":1,":":1,"?":1,"@":1,"[":1,"]":1,"{":1,"}":1};function As({delimit:e}={}){const t=e?Object.assign(Object.assign({},Os),e):Os;return{delimiterOf:e=>t[e]||(e>="\0"&&e<=" "||"\x7f"===e?1:0)}}const Ss=As(),$s=As({delimit:{":":17,"(":131105,")":37," ":3,"\t":3,"=":1,",":1}});function js(e){var t;const s=e?As(e):Ss,n=function(e){const t=xs(e);return s=>!!(4&e.delimiterOf(s.s[s.i]))&&(s.i++,t(s),!0)}(s),r=vs(s),i=ks(s),o=(null===(t=e)||void 0===t?void 0:t.comments)?function(e){const t=xs(e),s={next:ws(e)},n=ks(e,s),r=vs(e,s);return(s,i)=>{if(!(131072&e.delimiterOf(s.s[s.i])))return!1;let o;for(++s.i;t(s)||r(s,e=>{o||(o=fs({$:"raw",v:""})),gs(o,e)})||n(s,e=>o=e););return++s.i,i(o||fs({$:"raw",v:""})),!0}}($s):bs;return e=>{const t=[],s={i:0,s:e};for(;s.i<s.s.length&&(n(s)||r(s,e=>{t.length||t.push(fs({$:"raw",v:""})),gs(t[t.length-1],e)})||o(s,e=>t.push(e))||i(s,e=>t.push(e))););return t}}const zs=js();function Es(e){if(!e)return'""';let t,s=!1;for(let n=0;n<e.length;++n){const r=e[n],i=Ss.delimiterOf(r);i?(32&i&&(t||(t=e.substring(0,n)),t+="\\"+r),s=!0):t&&(t+=r)}return s?`"${t||e}"`:e}class Rs extends Set{constructor(e){super(),this._added=new Set(e),this._removed=new Set,this._added.forEach(e=>this.add(e))}add(e){return this.has(e)||(this._added.add(e),this._removed.delete(e),super.add(e)),this}delete(e){return!!super.delete(e)&&(this._added.delete(e),this._removed.add(e),!0)}clear(){this._added.clear(),this.forEach(e=>this._removed.add(e)),super.clear()}delta(e,t=[]){return Ts(this)(e,t),this}redelta(e){return("function"==typeof e?e:Ts(e))([...this._added],[...this._removed]),this}undelta(){return this._added.clear(),this._removed.clear(),this}}function Ts(e){return(t,s)=>{for(const t of s)e.delete(t);for(const s of t)e.add(s)}}const Ds=Symbol("in-aspect"),Cs={instance:null,convertTo:t};function qs(e,t,s,n,r){return void 0===n&&(n=s(e,r)),{instance:n,convertTo:n=>qs(n,t,s,void 0,e),attachTo:n=>qs(n,t,s,e.aspect(t)||s(n))}}function Ls(e,t,s=null){return qs(e,t,n(null),s)}function Ms(e){return{instance:e,convertTo(){return this}}}const Zs=new Ie("https://surol.github.io/input-aspects/ns","inasp","input-aspects"),Ps={applyTo:()=>Ms(Ne())},Ks={get[Ds](){return Ps},to:e=>({applyAspect:t=>t===Ps?Ms(e):void 0})},Fs={applyTo:()=>Ms(at)},Us={get[Ds](){return Fs},to:e=>({applyAspect:t=>t===Fs?Ms(e):void 0})};function Is(e,...n){if(!e)return Vs;const r=Gs(e);if(!n.length)return r;const i=A(n,Gs);return(e,n)=>{const o=r(e,n),a=x(O([[o],v(A(i,t=>t(e,n)),s)]),(e,t)=>t.applyAspect?s=>e(s)||t.applyAspect(s):e,t);return Js(o)?{applyAspect:a}:{set:o.set.bind(o),get:o.get.bind(o),applyAspect:a}}}function Bs(e){return e?(t=e,Array.isArray(t)?Is(...e):Is(e)):Is();var t}const Ns={applyAspect(){}};function Vs(){return Ns}function Js(e){return!e.set}function Gs(e){return"function"==typeof e?e:n(e)}class Qs extends Ce{constructor(){super(...arguments),this._aspects=new Map}aspect(e){return this._aspect(e[Ds]).instance}setup(e,s=t){return Ds in e?s(this.aspect(e),this):e(this),this}convert(e,...t){return new Ws(this,Is(e,...t))}_aspect(e){const t=this._aspects.get(e);if(t)return t;const s=this._applyAspect(e)||e.applyTo(this);return this._aspects.set(e,s),s}_applyAspect(e){}}class Ws extends Qs{constructor(t,s){super(),this._supply=ee().needs(t);let n,r=0;const i=new Se;this.on=i.on;const o=s(t,this);let a,c,u;Js(o)?(a=e,c=e,u=e=>{const s=t._aspect(e);return s.attachTo?s.attachTo(this):s.convertTo(this)}):(a=o.set,c=o.get,u=e=>t._aspect(e).convertTo(this)),this._applyAspect=e=>{var t,s;return(null===(s=(t=o).applyAspect)||void 0===s?void 0:s.call(t,e))||u(e)},this._it=Le([a(t.it),0]),Y(this._it).needs(this._supply),this._it.on(([e],[t])=>{e!==t&&i.send(e,t)}).whenOff(e=>i.done(e)),t.on(e=>{e!==n&&(this._it.it=[a(e),++r])}).whenOff(e=>this.done(e)),this._it.on(([e,s])=>{if(s!==r){r=s,n=c(e);try{t.it=n}finally{n=void 0}}})}get[X](){return this._supply}get it(){return this._it.it[0]}set it(e){const[t,s]=this._it.it;e!==t&&(this._it.it=[e,s+1])}}class Xs extends Qs{constructor({aspects:e}){super(),this._aspectConversion=Bs(e)(function(e){let t;return new class extends Qs{get it(){return e.it}set it(t){e.it=t}get on(){return e.on}get[X](){return t||(t=ee().needs(e))}}}(this),this)}_applyAspect(e){return this._aspectConversion.applyAspect(e)||super._applyAspect(e)}}const Hs={applyTo:e=>Ls(e,Ys)};class Ys extends Xs{static get[Ds](){return Hs}_applyAspect(e){return e===Hs?Ls(this,Ys,this):super._applyAspect(e)}}const en={applyTo:e=>Ms(new sn(e))};class tn{static get[Ds](){return en}get[ie](){return this.on}get[Q](){return this.read}}class sn extends tn{constructor(e){super(),this._control=e,this._map=new Map,this._on=new Se;const t=this._map;function s(){return t.keys()}this.on=this._on.on.tillOff(e),this.read=me(this.on.thru(s),()=>[s()])}add(e){const t=this._map.get(e);if(t)return t;const s=ee(()=>{this._map.delete(e),this._on.send([],[e])});return this._map.set(e,s),this._on.send([e],[]),s.needs(this._control).needs(e.parent)}}const nn={applyTo:e=>Ls(e,rn)};class rn extends Xs{static get[Ds](){return nn}_applyAspect(e){return e===nn?Ls(this,rn,this):super._applyAspect(e)}}const on={applyTo:e=>qs(e,an,e=>new ln(e))};class an{static get[Ds](){return on}get[ie](){return this.on}get[Q](){return this.read}static hasData(e){return"off"!==e&&"-"!==e[0]}done(e){return this.own.done(e),this}}class cn extends Ce{constructor(e){super(),this._tracker=Le(e?function(e){return null!=e.getAttribute("disabled")?"off":null!=e.getAttribute("readonly")?"ro":"on"}(e.element):"on")}get on(){return this._tracker.on}get[X](){return Y(this._tracker)}get it(){return this._tracker.it}set it(e){switch(e){case"off":case"ro":case"-on":case"-ro":break;default:e="on"}this._tracker.it=e}}class un{constructor(){this._all=new Set,this._on=new Se;const e=me(this._on.on.thru(()=>this._all),r(this._all));this.read=e.keep.thru(e=>ve(xe(...e)),pn)}add(e){const t=ee(()=>{this._all.delete(e),this._on.send()});return this._all.add(e),this._on.send(),t}}class ln extends an{constructor(e){super(),this._control=e,this._derived=new un;const t=e.aspect(rn);this.own=new cn(t),Y(this.own).needs(e),this.derive(e.aspect(tn).read.keep.thru_(hn));let s="on";this.read=me(we({derived:this._derived.read,own:this.own}).thru(({derived:[e],own:[t]})=>{let n;if("off"===t||"off"===e)n="off";else{let s=!1;"-"===t[0]&&(s=!0,t=t.substring(1)),"-"===e[0]&&(s=!0,e=e.substring(1)),n="ro"===e?"ro":t,s&&(n="-"+n)}return s===n?h():u(s=n)}),r(s)).tillOff(e),t&&this.read(e=>function(e,t){switch(t){case"off":e.setAttribute("disabled","");break;case"ro":case"-ro":e.setAttribute("disabled",""),e.removeAttribute("disabled"),e.setAttribute("readonly","");break;default:e.setAttribute("disabled",""),e.removeAttribute("disabled"),e.setAttribute("readonly",""),e.removeAttribute("readonly")}}(t.element,e));let n="on";this.on=this.read.thru(e=>{const t=n;return t===e?h():u(n=e,t)})}derive(e){return this._derived.add(ye(W(e)?e:e(this._control)).tillOff(this._control)).needs(this._control)}}function hn(e){const t=Array.from(e);return t.length?ve(xe(...t.map(({parent:e})=>e.aspect(an))).keep.thru_(pn)):u("on")}function pn(...e){return dn(...O(e))}function dn(...e){let t=!1,s=!1;for(const n of e)switch(n){case"off":return"off";case"ro":t=!0;break;case"-on":s=!0;break;case"-ro":s=!0,t=!0}return s?t?"-ro":"-on":t?"ro":"on"}const fn={applyTo:e=>qs(e,gn,e=>we({value:e,mode:e.aspect(an)}).keep.thru(({value:[e],mode:[t]})=>an.hasData(t)?u(e):u()))},gn={get[Ds](){return fn}},_n={applyTo:e=>Ls(e,mn)};class mn extends Ys{static get[Ds](){return _n}_applyAspect(e){return e===_n?Ls(this,mn,this):super._applyAspect(e)}}const yn={};class bn{constructor(e){this._map=e}get(e){const t=this._map.get(e);return t&&t[0]}[Symbol.iterator](){return g(A(this._map.values(),([e])=>e))}entries(){return g(A(this._map.entries(),([e,[t]])=>[e,t]))}}class kn{constructor(e){this._controls=e,this._supply=ee(),this._map=new Map}set(e,t,s,n){const r=this._map.get(e);let i;if(t){i=ee();const o=this.newEntry(e,t,i);let a=!0;r&&(r[0]===t?a=!1:n.push([e,r])),a?(this.modify().set(e,o),s.push([e,o])):this._map.set(e,o)}else i=ne(),r&&(n.push([e,r]),this.modify().delete(e));return r&&r[1].off(yn),i}newEntry(e,t,s){return[t,ee(t=>{t!==yn&&this._controls.remove(e)}).needs(this._supply).needs(s).whenOff(e=>s.off(e===yn?void 0:e))]}modify(){if(this._shot){const e=new Map;b(this._map.entries(),([t,s])=>e.set(t,s)),this._shot=void 0,this._map=e}return this._map}snapshot(){return this._shot||(this._shot=new bn(this._map))}clear(){const e=[],t=[];return b(this._map.keys(),s=>this.set(s,void 0,e,t)),t}}class wn extends class extends class{get[ie](){return this.on}get[Q](){return this.read}}{remove(e){this.set(e,void 0)}}{constructor(e){super(),this._group=e,this._updates=new Se;const t=this;this._map=new kn(this),this.on=this._updates.on.thru((e,t)=>u(e.map(xn),t.map(xn))),this.read=me(this._updates.on.thru(()=>this._map.snapshot()),()=>[this._map.snapshot()]),this._map._supply.needs(e.read((function(e){t.read.once(t=>{const s=new Set;b(C(e),([e,n])=>{s.add(e);const r=t.get(e);r&&(r.it=n)}),b(t.entries(),([e,t])=>{s.has(e)||(t.it=void 0)})})})))}set(e,t){const s=this._group,n=[],r=[];let i;return"object"==typeof e?(i=ee(),b(C(e),([e,t])=>{this._map.set(e,t,n,r).needs(i)})):i=this._map.set(e,t,n,r),(n.length||r.length)&&(this._updates.send(n,r),n.length&&function(){let e;n.forEach(([t,[n,r]])=>{r.needs(n.aspect(tn).add({parent:s}).needs(r));const i=n.it;if(e)e[t]=i;else{const n=s.it;n[t]!==i&&(e=Object.assign(Object.assign({},n),{[t]:i}))}}),e&&(s.it=e);n.forEach(([e,[t,n]])=>{n.needs(t.read(t=>{s.it[e]!==t&&(s.it=Object.assign(Object.assign({},s.it),{[e]:t}))}).needs(n))})}()),i}clear(){const e=this._map.clear();e.length&&this._updates.send([],e)}}function xn([e,[t]]){return[e,t]}class vn extends mn{constructor(e,t){super(t),this._model=Le(e),this.controls=new wn(this),Y(this).whenOff(()=>this.controls.clear())}get on(){return this._model.on}get[X](){return Y(this._model)}get it(){return this._model.it}set it(e){this._model.it=e}_applyAspect(e){return e===gn[Ds]?{instance:(s=this,we({cs:s.controls,model:s,mode:s.aspect(an)}).keep.thru_(On)),convertTo:t}:super._applyAspect(e);var s}}function On({cs:[e],model:[t],mode:[s]}){if(!an.hasData(s))return u();const n={};return b(e.entries(),([e,t])=>{n[e]=t.aspect(gn)}),ve(we(n).keep.thru(e=>{const s=Object.assign({},t);return b(C(e),([e,[t]])=>{s[e]=t}),c(s)}))}function An(e,{aspects:t}={}){return new vn(e,{aspects:t})}const Sn=be();function $n(){return Sn}function jn(e){return W(e)?n(ye(e)):"function"==typeof e?t=>ye(e(t)):t=>t.read.keep.thru(function(e,t){return()=>{const s=t.validate(e);return null==s?u():Array.isArray(s)?u(...s):u(s)}}(t,e))}const zn={};class En{constructor(s){const n=new Se,i=new Map,o=new Map;let a=t,c=t;this[Q]=me(s=>{const u=ye(n,r())(s).whenOff(()=>{a=t,c=t});c=(e,t)=>{const s=e((...t)=>{if(t.length)o.set(e,t);else if(!o.delete(e))return;a()}).needs(t).whenOff(s=>{s!==zn&&t.off(s),o.delete(e)&&a()});u.whenOff(()=>s.off(zn))},b(i.entries(),([e,t])=>c(e,t)),a=()=>{n.send(...O(o.values(),e))},o.size&&a()}).share().tillOff(s),this.from=e=>{const t=jn(e)(s),n=ee(()=>{i.delete(t)});return i.set(t,n),c(t,n),n.needs(s)}}}const Rn={applyTo:e=>qs(e,Tn,(e,t)=>{const s=new Ln(e);if(t){const e=t.aspect(Tn);s.by(e.read.keep.thru(e=>u(...e.messages())))}return s})};class Tn{static get[Ds](){return Rn}get[Q](){return this.read}}const Dn={get ok(){return!0},messages:()=>[],has:()=>!1,hasBut:()=>!1,[Symbol.iterator]:()=>[][Symbol.iterator]()};class Cn{constructor(e){this._byCode=new Map,this._all=[],b(e,e=>{let t=!1;b(C(e),([s,n])=>{if(n){t=!0;const n=this._byCode.get(s);n?n.push(e):this._byCode.set(s,[e])}}),t&&this._all.push(e)})}get ok(){return!this._all.length}messages(e){return null==e?this._all:this._byCode.get(e)||[]}has(e){return null==e||this._byCode.has(e)}hasBut(...e){return this._all.some(t=>e.every(e=>!t[e]))}[Symbol.iterator](){return this._all[Symbol.iterator]()}}function qn(...e){return e.length?new Cn(e):Dn}class Ln extends Tn{constructor(e){super(),this._messages=new En(e);const t=e.aspect(Ys);t&&this._messages.from(function(e){return e.controls.read.keep.thru(Mn,Zn)}(t)),this.read=ye(this._messages).keep.thru(qn)}by(...e){return this._messages.from(function(...e){const t=e.length;return 1===t?e[0]:t?t=>{const s=new En(t);return e.forEach(e=>s.from(e)),s}:$n}(...e))}}function Mn(e){return ve(xe(...A(e,e=>e.aspect(Tn))))}function Zn(...e){return u(...O(A(e,e=>e[0])))}function Pn(e){return e?e.read.keep.thru(e=>e?u():{missing:"missing"}):Pn}const Kn={applyTo:e=>qs(e,In,e=>new Bn(e))};class Fn extends Error{constructor(...e){super(),this.errors=qn(...A(e,e=>e.submit?e:Object.assign(Object.assign({},e),{submit:!0})))}}class Un extends Fn{constructor(e){super({submit:"rejected",rejected:e,[e]:!0})}}class In{static get[Ds](){return Kn}get[Q](){return this.read}}class Bn extends In{constructor(e){super(),this._control=e,this._flags=Le({submitted:!1,busy:!1}),this._errors=Le([]);const t=e.aspect(Tn);t.by(this._errors.read.keep.thru(e=>u(...e))),this.read=we({flags:this._flags,data:e.aspect(gn),messages:t}).keep.thru(({flags:[e],data:[t],messages:[s]})=>({ready:void 0!==t&&(s.ok||k(s,e=>e.submit)),submitted:e.submitted,busy:e.busy})).tillOff(e)}async submit(e){if(Y(this._control).isOff)throw new Un("noInput");if(this._flags.it.busy)throw new Un("busy");const t=this,s=this._control;let n;this._flags.it=Object.assign(Object.assign({},this._flags.it),{submitted:!0,busy:!0});try{return this._errors.it.length&&(this._errors.it=[]),await e(await new Promise((e,n)=>{we({data:s.aspect(gn),flags:t.read}).once(({data:[t],flags:[{ready:s}]})=>{s?e(t):n(new Un("notReady"))})}),s)}catch(e){throw n=function(e){if(e instanceof Fn)return[...e.errors];return[{submit:e}]}(e),e}finally{this._flags.it=Object.assign(Object.assign({},this._flags.it),{busy:!1}),n&&(this._errors.it=n)}}reset(){const e=this._flags.it;e.submitted&&(this._flags.it=Object.assign(Object.assign({},e),{submitted:!1})),this._errors.it.length&&(this._errors.it=[])}}function Nn(e,{notReady:t="on",invalid:s="on",busy:n="ro"}={}){return e.aspect(In).read.keep.thru(e=>dn(e.busy?n:"on",e.ready?"on":e.submitted?s:t))}function Vn({invalid:e="-on",ignore:t="submit"}={}){return s=>s.aspect(Tn).read.keep.thru(s=>s.hasBut(..."string"==typeof t?[t]:t)?e:"on")}class Jn extends rn{constructor(t,{aspects:s,get:n,set:r}){super({aspects:s}),this.element=t,this._input=new Se,this._get=n,this._set=r,this._value=this.it;const i=this._update=(e,t)=>l({value:e},t);this.input=ye(this._input.on.thru(e),()=>[{value:this.it}]),this.on=this._input.on.thru(({value:e},t)=>e===t?h():u(e,t)),this.events=new pt(t);const o=this,a=Y(this),c=e=>l({value:o.it,event:e},o._value);function l(e,t){for(;;){let s;o._value=e.value,o._update=(t,n)=>{s=[Object.assign(Object.assign({},e),{value:t}),n]};try{o._input.send(e,t)}finally{o._update=i}if(!s)break;[e,t]=s}}this.events.on("input")(c).needs(a),this.events.on("change")(c).needs(a)}get[X](){return Y(this._input)}get it(){return this._get()}set it(e){const t=this.it;e!==t&&(this._set(e),this._update(this._get(),t))}}function Gn(e,{aspects:t}={}){return new Jn(e,{get(){return this.element.value},set(e){this.element.value=e},aspects:t})}const Qn={applyTo:e=>qs(e,Wn,e=>{const t=e.aspect(rn);return t&&new Xn(t)})};class Wn extends Ce{static get[Ds](){return Qn}}class Xn extends Wn{constructor(e){super();const{element:s,events:n}=e,r=s.getRootNode?s.getRootNode():s.ownerDocument;this._it=Le(!!r&&r.activeElement===s),Y(this).needs(e),n.on("focus")(()=>this._it.it=!0),n.on("blur")(()=>this._it.it=!1),this.on({receive(e,n){e.onRecurrent(t),n?s.focus():s.blur()}})}get on(){return this._it.on}get[X](){return Y(this._it)}get it(){return this._it.it}set it(e){this._it.it=e}}const Hn={applyTo:e=>qs(e,Yn,e=>{const t=e.aspect(Ys);return null!=t?new sr(t):new tr(e)})};class Yn{static get[Ds](){return Hn}get[Q](){return this.read}}const er={hasFocus:!1,touched:!1,edited:!1};class tr extends Yn{constructor(e){super(),this._flags=Le(er),this._flags.by(function(e,t){const s=t.aspect(rn);return we({hasFocus:t.aspect(Wn)||be(!1),edited:s?s.input.keep.thru(({event:e})=>!!e):be(!1)}).keep.thru(({hasFocus:[t],edited:[s]})=>function(e,t,s){e=t?Object.assign(Object.assign({},e),{hasFocus:t,touched:!0}):Object.assign(Object.assign({},e),{hasFocus:t});s&&(e=Object.assign(Object.assign({},e),{edited:s,touched:!0}));return e}(e.it,t,s))}(this._flags,e)),this.read=this._flags.read.tillOff(e)}markTouched(e=!0){const t=this._flags.it;return e?t.touched||(this._flags.it=Object.assign(Object.assign({},t),{touched:e})):t.touched&&(this._flags.it=Object.assign(Object.assign({},t),{touched:t.hasFocus,edited:!1})),this}markEdited(e=!0){const t=this._flags.it;return e?t.edited||(this._flags.it=Object.assign(Object.assign({},t),{touched:!0,edited:e})):t.edited&&(this._flags.it=Object.assign(Object.assign({},t),{edited:e})),this}}class sr extends Yn{constructor(e){var t;super(),this._container=e,this.read=(t=e,t.controls.read.keep.thru_(e=>ve(xe(...function(e){return A(e,e=>e.aspect(Yn))}(e))),nr)).tillOff(e)}markEdited(e){return this._container.controls.read.once(t=>b(t,t=>t.aspect(Yn).markEdited(e))),this}markTouched(e){return this._container.controls.read.once(t=>b(t,t=>t.aspect(Yn).markTouched(e))),this}}function nr(...e){const t={hasFocus:!1,touched:!1,edited:!1};return b(e,([{hasFocus:e,touched:s,edited:n}])=>{s&&(t.touched=!0),e&&(t.hasFocus=t.touched=!0),n&&(t.edited=t.touched=!0)}),t}function rr(e,s){const{form:n,aspects:r,modes:i}=s,o=new Jn(e,{aspects:[Bs(r)],get:t,set:t});return Y(o).needs(n),o.aspect(an).derive(Nn(n,i)),o}function ir(e,s){const{form:n,aspects:r,modes:{notReady:i="on",invalid:o="off",busy:a="off"}={}}=s,c=new Jn(e,{aspects:[Bs(r)],get:t,set:t});return Y(c).needs(n),c.aspect(an).derive(Nn(n,{notReady:i,invalid:o,busy:a})),c}const or={applyTo(e){const t=e.aspect(rn);return t?Ms(t.element):Cs}},ar={get[Ds](){return or},to:(e=null)=>({applyAspect:t=>t===or?Ms(e):void 0})},cr={applyTo:e=>({instance:new pr(e),convertTo:t})};class ur{static get[Ds](){return cr}get[Q](){return this.read}}const lr=Symbol("reason");function hr(e){return e&&"object"==typeof e&&lr in e}class pr extends ur{constructor(e){super(),this._control=e,this._sources=Le([new Map]),this.read=this._sources.read.keep.thru_(([e])=>ve(xe(...e.keys())),(...e)=>{const t={};return e.forEach(([e])=>dr(e,t)),t}).tillOff(e),this.track=me(e=>{const t=new Rs,s=new oe;let n=!1;return s.on(e),this.read(e=>{const r=new Set(t),i=[];b(v(C(e),([,e])=>!!e),([e])=>{r.delete(e)||i.push(e)}),(!n||i.length||r.size)&&(t.delta(i,r),n=!0,t.redelta((e,t)=>s.send(e,t)).undelta())})}).tillOff(e);const t=e.aspect(ar);t&&this.applyTo(t,this.schedule),Y(e).whenOff(e=>this.done(e))}get schedule(){return this._schedule||(this._schedule=fr(this._control,this._control.aspect(ar)))}specs(e){return ye(W(e)?e:e(this._control))}resolve(e){const t=this._control.aspect(Ks);return this.specs(e).keep.thru((...e)=>{const s={};return e.forEach(e=>{Be(e)?s[Ue.name(e,t)]=!0:dr(e,s)}),s})}add(e){const t=Y(this._control);if(t.isOff)return t;const s=ee(),n=me(t=>{const n=this.resolve(e)({receive(e,...s){t.receive(e,...s)}});t.supply.whenOff(e=>{s.off({[lr]:e})}),s.needs(n).whenOff(e=>{hr(e)&&n.off(e[lr])})}).share(),[r]=this._sources.it;return r.set(n,s),s.whenOff(e=>{hr(e)||(r.delete(n),this._sources.it=[r])}),this._sources.it=[r],s.needs(t)}applyTo(e,t=fr(this._control,e)){const{classList:s}=e,n=new Rs,r=()=>{n.redelta((e,t)=>{s.remove(...t),s.add(...e)}).undelta()};return this.track((e,s)=>{n.delta(e,s),t(r)}).whenOff(()=>{n.size&&(n.clear(),t(r))})}done(e){return b(this._sources.it[0].values(),t=>t.off(e)),this._sources.done(e),this}}function dr(e,t){b(C(e),([e,s])=>{null!=s&&(t[e]=s)})}function fr(e,t){return e.aspect(Us)({node:t})}const gr=[["has-error",Zs]];function _r(e){return!e.ok}function mr({mark:e,when:t}={}){let s,n;return s=t?Array.isArray(t)?t.length?e=>t.every(t=>e.has(t)):_r:e=>e.has(t):_r,n=e?Array.isArray(e)?e.length?e:gr:[e]:gr,e=>e.aspect(Tn).read.keep.thru(e=>s(e)?u(...n):u())}function yr({ns:e=Zs}={}){return t=>{const s=t=>[t,e];return we({md:t.aspect(an),vl:t.aspect(Tn),st:t.aspect(Yn)}).keep.thru(({md:[e],vl:[t],st:[{hasFocus:n,touched:r,edited:i}]})=>{const o=[];return an.hasData(e)||o.push(s("disabled")),"ro"!==e&&"-ro"!==e||o.push(s("readonly")),t.ok||o.push(s("invalid")),t.has("missing")&&o.push(s("missing")),t.has("incomplete")&&o.push(s("incomplete")),n&&o.push(s("has-focus")),r&&o.push(s("touched")),i&&o.push(s("edited")),u(...o)})}}export{ne as $,j as A,O as B,F as C,Q as D,X as E,Ye as F,Be as G,pt as H,Y as I,Ke as J,ye as K,Ue as L,J as M,Ie as N,ie as O,f as P,re as Q,oe as R,V as S,je as T,l as U,Ce as V,Es as W,zs as X,w as Y,c as Z,de as _,q as a,Qs as a0,He as a1,mn as a2,Is as a3,Ks as a4,Us as a5,ds as a6,Oe as a7,Fn as a8,S as a9,C as aa,dt as ab,r as ac,ur as ad,Yn as ae,Tn as af,mr as ag,ar as ah,yr as ai,ir as aj,An as ak,an as al,Vn as am,rr as an,Gn as ao,Pn as ap,In as aq,U as b,Xe as c,me as d,be as e,we as f,u as g,ve as h,x as i,xe as j,h as k,v as l,A as m,at as n,pe as o,Ne as p,ee as q,Se as r,$e as s,Le as t,t as u,n as v,b as w,T as x,s as y,De as z};//# sourceMappingURL=lib.9ec3b7f1.js.map
