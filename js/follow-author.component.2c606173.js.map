{"version":3,"file":"follow-author.component.2c606173.js","sources":["../../src/pages/profile/current-user-profile.ts","../../src/pages/profile/follow-author.component.ts"],"sourcesContent":["import { SingleContextUpKey, SingleContextUpRef } from 'context-values/updatable';\nimport { UserProfile } from '../../common/users';\n\nexport type CurrentUserProfile = UserProfile | { readonly username?: undefined };\n\nexport const noUserProfile: CurrentUserProfile = {};\n\nexport const CurrentUserProfile: SingleContextUpRef<CurrentUserProfile> = (\n    /*#__PURE__*/ new SingleContextUpKey<CurrentUserProfile>(\n        'current-user-profile',\n        {\n          byDefault: () => (noUserProfile),\n        },\n    )\n);\n","import { HierarchyContext } from '@wesib/generic';\nimport { Component, ComponentContext, ElementRenderer, Render, StateProperty } from '@wesib/wesib';\nimport { Conduit__NS } from '../../common';\nimport { escapeHtml } from '../../common/util';\nimport { CurrentUserProfile, noUserProfile } from './current-user-profile';\n\n@Component(['follow-author', Conduit__NS])\nexport class FollowAuthorComponent {\n\n  @StateProperty()\n  private author: CurrentUserProfile = noUserProfile;\n\n  constructor(private readonly _context: ComponentContext) {\n\n    const hierarchy = _context.get(HierarchyContext);\n\n    _context.whenOn(supply => {\n      hierarchy.get(CurrentUserProfile).tillOff(supply)(profile => {\n        this.author = profile;\n      });\n    });\n  }\n\n  @Render()\n  render(): ElementRenderer {\n\n    const { contentRoot }: { contentRoot: Element } = this._context;\n\n    return () => {\n      if (this.author.username) {\n        contentRoot.className = this.author.following ? 'btn-outline-primary' : 'btn-outline-secondary';\n        contentRoot.innerHTML = `<i class=\"ion-plus-round\"></i> Follow ${escapeHtml(this.author.username)}`;\n      } else {\n        contentRoot.innerHTML = '';\n      }\n\n    };\n  }\n\n}\n"],"names":["noUserProfile","CurrentUserProfile","SingleContextUpKey","byDefault","FollowAuthorComponent","[object Object]","_context","this","hierarchy","get","HierarchyContext","whenOn","supply","tillOff","profile","author","contentRoot","username","className","following","innerHTML","escapeHtml","__decorate","StateProperty","Render","Component","Conduit__NS"],"mappings":"wSAKaA,EAAoC,GAEpCC,MACSC,EACd,uBACA,CACEC,UAAW,YCJRC,EAAb,MAKEC,YAA6BC,GAAAC,cAAAD,EAFrBC,YAA6BP,EAInC,MAAMQ,EAAYF,EAASG,IAAIC,GAE/BJ,EAASK,OAAOC,IACdJ,EAAUC,IAAIR,GAAoBY,QAAQD,EAA1CJ,CAAkDM,IAChDP,KAAKQ,OAASD,MAMpBT,SAEE,MAAMW,YAAEA,GAA0CT,KAAKD,SAEvD,MAAO,KACDC,KAAKQ,OAAOE,UACdD,EAAYE,UAAYX,KAAKQ,OAAOI,UAAY,sBAAwB,wBACxEH,EAAYI,UAAY,yCAAyCC,EAAWd,KAAKQ,OAAOE,aAExFD,EAAYI,UAAY,MAvB9BE,GADCC,kCAeDD,GADCE,gCAhBUpB,KADZqB,EAAU,CAAC,gBAAiBC,KAChBtB"}