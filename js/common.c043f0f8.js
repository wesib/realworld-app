import{U as e,_ as t,t as s,H as n,k as a}from"./lib.c50838ef.js";import{C as o,N as r,p as c,B as i,i as l,R as p,a as d,F as h,b as f,P as g,c as m}from"./wesib.ca9e3419.js";const u=new e("https://wesib.github.io/realworld-app/ns/","conduit");let w=class{constructor(e){this._context=e,this._response=s(),this._response.on((t,s)=>e.updateState("response",t,s));const t=e.get(r);e.whenOn(s=>{t.read.once(t=>{t.put(c,{fragment:{tag:e.element.tagName},receiver:{supply:s,receive:(e,t)=>this._response.it=t}})})})}render(){const e=this._context.get(i).document,t=e.createRange();return t.selectNodeContents(this._context.element),()=>{const s=this._response.it;if(s)if(t.deleteContents(),s.ok){const n=e.createDocumentFragment(),{fragment:a}=s;a&&(l(a,n),t.insertNode(n))}else null==s.ok?t.insertNode(e.createTextNode("Loading...")):t.insertNode(e.createTextNode(`Error. ${s.error}`))}}};t([p()],w.prototype,"render",null),w=t([o(["main",u])],w);let v=class{constructor(e){const t=e.get(d),s=e.get(r);e.whenOn(e=>{const o=t.select("a",{all:!0,deep:!0}),r=new Map;o.track.tillOff(e)((t,a)=>{a.forEach(e=>{const t=r.get(e);t&&(r.delete(e),t.off())}),t.forEach(t=>{const a=t.element,o=new n(a).on("click").instead(()=>{a.classList.contains("active")||s.open(a.getAttribute("href")||"")}).needs(e);r.set(t,o)})}),a({links:o,page:s})({supply:e,receive(e,{links:[t],page:[s]}){const n=N(s.url);let a,o="";t.forEach(e=>{const t=e.element,s=N(new URL(t.href));t.classList.remove("active"),n.startsWith(s)&&o.length<s.length&&(a=t,o=s)}),a&&a.classList.add("active")}})})}};function N(e){const t=e.pathname;return t.endsWith("/")?t:t+"/"}v=t([o(["navbar",u])],v);let _=class{};_=t([o({name:["container",u],feature:{needs:[w,v]}})],_);let b=class{};b=t([h({needs:[f,_,g]})],b);let k=class{};k=t([h({needs:b})],k);const x=m(k);export{u as C,x as c};
//# sourceMappingURL=common.c043f0f8.js.map
