import{_ as o}from"./helpers.e1623395.js";import{e as t}from"./frontmeans/httongue.6b868a5b.js";import{h as e}from"./wesib/generic.36801613.js";import{S as r,R as s,C as n}from"./wesib/wesib.1ebc214d.js";import{C as a}from"./core.10059585.js";import{U as u,a as i}from"./core/users.915439be.js";import{a as c}from"./proc7ts/context-values.5140e67e.js";import{t as l,c as m}from"./proc7ts/fun-events.0c993baf.js";const h={},f=new c("current-user-profile",{byDefault:()=>h});function p(o){const t=l(o.do(m((o=>{if(null==o.username)return o;const e=o=>{t.it={...o,update:e}};return{...o,update:e}}))));return t}let d=class{constructor(o){this._context=o,this.author=h;const t=o.get(e),r=o.get(u);t.get(f)((o=>{this.author=o})),o.on("click")((()=>{const{author:o}=this;if(o.username){const t=!o.following;o.update({...o,following:t}),r.followUser(o.username,t)((t=>{this.author.username&&(t.ok?this.author.update(t.body):(this.author.update(o),console.error(`Failed to follow user ${o.username}`,t.errors)))}))}}))}render(){const{contentRoot:o,element:e}=this._context;return()=>{this.author.username?(e.className=this.author.following?"btn-secondary":"btn-outline-secondary",o.innerHTML=`<i class="ion-plus-round"></i> Follow ${t(this.author.username)}`):o.innerHTML=""}}};o([r()],d.prototype,"author",void 0),o([s()],d.prototype,"render",null),d=o([n(["follow-author-btn",a],{feature:{needs:i}})],d);export{f as C,d as F,p as c,h as n};//# sourceMappingURL=follow-author-btn.component.7a866a4d.js.map
