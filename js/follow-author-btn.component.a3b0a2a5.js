import{S as o}from"./proc7ts/context-values.dc14f6d9.js";import{c as t,f as e}from"./proc7ts/fun-events.cf430e05.js";import{S as r,R as s,C as n}from"./wesib/wesib.fdf88372.js";import{_ as a}from"./helpers.e1623395.js";import{a as u}from"./wesib/generic.56bad89f.js";import{C as i}from"./core.c852ba8c.js";import{U as c,a as l}from"./core/users.bb6a64cc.js";import{e as f}from"./core/util.0f1d0e60.js";const h={},m=new o("current-user-profile",{byDefault:()=>h});function p(o){const r=t(e(o).keepThru_(o=>{if(null==o.username)return o;const t=o=>{r.it={...o,update:t}};return{...o,update:t}}));return r}let d=(()=>{let o=class{constructor(o){this._context=o,this.author=h;const t=o.get(u),e=o.get(c);t.get(m).to(o=>{this.author=o}),o.on("click").to(()=>{const{author:o}=this;if(o.username){const t=!o.following;o.update({...o,following:t}),e.followUser(o.username,t).to(t=>{this.author.username&&(t.ok?this.author.update(t.body):(this.author.update(o),console.error("Failed to follow user "+o.username,t.errors)))})}})}render(){const{contentRoot:o}=this._context;return()=>{this.author.username?(o.className=this.author.following?"btn-secondary":"btn-outline-secondary",o.innerHTML='<i class="ion-plus-round"></i> Follow '+f(this.author.username)):o.innerHTML=""}}};return a([r()],o.prototype,"author",void 0),a([s()],o.prototype,"render",null),o=a([n(["follow-author-btn",i],{feature:{needs:l}})],o),o})();export{m as C,d as F,p as c,h as n};//# sourceMappingURL=follow-author-btn.component.a3b0a2a5.js.map
