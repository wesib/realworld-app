function t(t){return function(t){return Array.isArray(t)}(t)?t:null!=t?[t]:[]}function n(t){const n=Array.from(t),{length:e}=n;if(e)return 1===e?n[0]:n}function e(t){return n=t,Array.isArray(n)?new Set(t):null!=t?new Set([t]):new Set;var n}function r(t,n){var e;return e=n,Array.isArray(e)?n.forEach((n=>t.add(n))):null!=n&&t.add(n),t}function s(t,n=(()=>!0)){const e=Object.getPrototypeOf(t.prototype);if(null==e)return;const r=e.constructor;return n(r)?r:s(r,n)}function u(t){return t}function f(t,n,e=((t,n)=>n)){return t?n?function(...r){return e(t.apply(this,r),n.apply(this,r))}:t:n}function i(){}function o(t){return()=>t}function c(...t){return()=>t}function a(t){let n=()=>(n=o(t()))();return()=>n()}function h(t,...n){return"function"==typeof t?t(...n):t}function l(){let t,n,e=a((()=>new Promise(((e,r)=>{t=e,n=r}))));const r=r=>{e=a(r),t=i,n=i};return t=t=>{r((()=>Promise.resolve(t)))},n=t=>{r((()=>Promise.reject(t)))},{resolve(n){t(n)},reject(t){n(t)},promise:()=>e()}}function w(t){if(function(t){return void 0===t.value&&void 0===t.writable}(t))return t;const n=Symbol("value"),e=t.value,r={...t,writable:void 0,value:void 0,get(){return n in this?this[n]:e}};return t.writable&&(r.set=function(t){this[n]=t}),delete r.writable,delete r.value,r}function p(t,n){const e=Symbol(`${String(n)}:value`),r=t[n];return{configurable:!0,enumerable:!0,get(){return e in this?this[e]:r},set(t){this[e]=t}}}const d=Symbol("SupplyState"),y={isOff:!1,off(t,n){t[d]=v(n)},whenOff(t,n){t[d]=g(n)}},O={isOff:!0,off:b,whenOff(t,n){n()}};function v(t){return void 0===t?O:{isOff:!0,off:b,whenOff(n,e){e(t)}}}function b(t,n){}function g(t){return{isOff:!1,off(n,e){n[d]=v(e),t(e)},whenOff(n,e){const r=t;t=t=>{r(t),e(t)}}}}class m{constructor(t){this[d]=t?g(t):y}get supply(){return this}get isOff(){return this[d].isOff}off(t){return this[d].off(this,t),this}whenOff(t){return this[d].whenOff(this,t),this}whenDone(){return new Promise(((t,n)=>this.whenOff((e=>void 0===e?t():n(e)))))}cuts(t){return t.supply.needs(this),this}needs(t){return t.supply.whenOff((t=>this.off(t))),this}}class S extends m{get isOff(){return!1}off(t){return this}whenOff(t){return this}cuts(t){return this}needs(t){return this}}const A=new S;function P(){return A}function j(t){return t===A}class x extends m{get isOff(){return!0}off(){return this}whenOff(t){return t(),this}cuts(t){return t.supply.off(),this}needs(t){return this}}const k=new x;function q(){return k}function D(t){return null!=t}function E(t){return void 0!==t}export{m as S,u as a,c as b,q as c,t as d,j as e,h as f,p as g,n as h,D as i,r as j,s as k,l,f as m,i as n,P as o,a as p,E as q,e as s,w as t,o as v};//# sourceMappingURL=primitives.ada6e792.js.map
