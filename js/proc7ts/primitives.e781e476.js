function t(t){return function(t){return Array.isArray(t)}(t)?t:null!=t?[t]:[]}function n(t){const n=Array.from(t),{length:e}=n;if(e)return 1===e?n[0]:n}function e(t){return n=t,Array.isArray(n)?new Set(t):null!=t?new Set([t]):new Set;var n}function r(t,n){var e;return e=n,Array.isArray(e)?n.forEach((n=>t.add(n))):null!=n&&t.add(n),t}function s(t,n=(()=>!0)){const e=Object.getPrototypeOf(t.prototype);if(null==e)return;const r=e.constructor;return n(r)?r:s(r,n)}function i(t){return t}function u(t,n,e=((t,n)=>n)){return t?n?function(...r){return e(t.apply(this,r),n.apply(this,r))}:t:n}function f(){}function o(t){return()=>t}function a(...t){return()=>t}function c(t){let n=()=>(n=o(t()))();return()=>n()}function h(t,...n){return"function"==typeof t?t(...n):t}function l(){let t,n,e=c((()=>new Promise(((e,r)=>{t=e,n=r}))));const r=r=>{e=c(r),t=f,n=f};return t=t=>{r((()=>Promise.resolve(t)))},n=t=>{r((()=>Promise.reject(t)))},{resolve(n){t(n)},reject(t){n(t)},promise:()=>e()}}function p(t){if(function(t){return void 0===t.value&&void 0===t.writable}(t))return t;const n=Symbol("value"),e=t.value,r={...t,writable:void 0,value:void 0,get(){return n in this?this[n]:e}};return t.writable&&(r.set=function(t){this[n]=t}),delete r.writable,delete r.value,r}function w(t,n){const e=Symbol(`${String(n)}:value`),r=t[n];return{configurable:!0,enumerable:!0,get(){return e in this?this[e]:r},set(t){this[e]=t}}}class y{constructor(t=f){this._off=n=>{this._whenOff=t=>t(n),this._off=f,t(n)},this._whenOff=t=>{const n=this._off;this._off=e=>{n(e),t(e)}}}get supply(){return this}get isOff(){return this._off===f}off(t){return this._off(t),this}whenOff(t){return this._whenOff(t),this}whenDone(){return new Promise(((t,n)=>this.whenOff((e=>void 0===e?t():n(e)))))}cuts(t){return t.supply.needs(this),this}needs(t){return t.supply.whenOff((t=>this.off(t))),this}}class d extends y{get isOff(){return!0}off(){return this}whenOff(t){return t(),this}cuts(t){return t.supply.off(),this}needs(t){return this}}const v=new d;function O(){return v}function b(t){return null!=t}export{y as S,i as a,a as b,O as c,t as d,h as e,w as f,n as g,r as h,b as i,s as j,l as k,c as l,u as m,f as n,e as s,p as t,o as v};//# sourceMappingURL=primitives.e781e476.js.map
