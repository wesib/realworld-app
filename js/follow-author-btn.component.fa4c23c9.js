import{S as o}from"./proc7ts/context-values.de0fa082.js";import{c as t,f as e}from"./proc7ts/fun-events.751f4123.js";import{S as r,R as s,C as n}from"./wesib/wesib.fd49a6cd.js";import{_ as a}from"./helpers.e1623395.js";import{a as u}from"./wesib/generic.1df87fc1.js";import{C as i}from"./core.bba16f1a.js";import{e as c}from"./frontmeans/httongue.7343772f.js";import{U as l,a as f}from"./core/users.43d11713.js";const m={},h=new o("current-user-profile",{byDefault:()=>m});function p(o){const r=t(e(o).keepThru_((o=>{if(null==o.username)return o;const t=o=>{r.it={...o,update:t}};return{...o,update:t}})));return r}let d=class{constructor(o){this._context=o,this.author=m;const t=o.get(u),e=o.get(l);t.get(h).to((o=>{this.author=o})),o.on("click").to((()=>{const{author:o}=this;if(o.username){const t=!o.following;o.update({...o,following:t}),e.followUser(o.username,t).to((t=>{this.author.username&&(t.ok?this.author.update(t.body):(this.author.update(o),console.error(`Failed to follow user ${o.username}`,t.errors)))}))}}))}render(){const{contentRoot:o,element:t}=this._context;return()=>{this.author.username?(t.className=this.author.following?"btn-secondary":"btn-outline-secondary",o.innerHTML=`<i class="ion-plus-round"></i> Follow ${c(this.author.username)}`):o.innerHTML=""}}};a([r()],d.prototype,"author",void 0),a([s()],d.prototype,"render",null),d=a([n(["follow-author-btn",i],{feature:{needs:f}})],d);export{h as C,d as F,p as c,m as n};//# sourceMappingURL=follow-author-btn.component.fa4c23c9.js.map
