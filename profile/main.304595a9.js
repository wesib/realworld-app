import"../js/proc7ts/primitives.90941b78.js";import"../js/proc7ts/push-iterator.e3c0f3f1.js";import"../js/proc7ts/context-values.de0fa082.js";import"../js/proc7ts/call-thru.104a1934.js";import{g as e,t as s}from"../js/proc7ts/fun-events.751f4123.js";import"../js/frontmeans/namespace-aliaser.54a2e6c0.js";import"../js/frontmeans/render-scheduler.c6ad5452.js";import{C as t,S as r,R as o,B as a}from"../js/wesib/wesib.fd49a6cd.js";import{_ as i}from"../js/helpers.e1623395.js";import"../js/core/auth.2372f198.js";import{n}from"../js/core/api.850f8641.js";import{d as c,A as p,g as f,N as m,b as l,a as j}from"../js/wesib/generic.1df87fc1.js";import"../js/proc7ts/delta-set.9ee1ffba.js";import"../js/frontmeans/input-aspects.8b5674f5.js";import{C as u}from"../js/core.bba16f1a.js";import{a as d}from"../js/core/loader.46a2a88b.js";import"../js/core/layout.2906fa88.js";import{c as h}from"../js/core/main.e6d61b54.js";import"../js/core/articles.aa6b0084.js";import"../js/lib/dompurify.0d835c13.js";import"../js/lib/marked.55574563.js";import{n as g,C as b,F as v,c as y}from"../js/follow-author-btn.component.fa4c23c9.js";import"../js/frontmeans/httongue.7343772f.js";import{U as _,a as w}from"../js/core/users.43d11713.js";import"../js/core/feed.e63c551e.js";import{P as k}from"../js/article-buttons-support.feature.8243e24d.js";import"../js/current-article.faae2888.js";import{R as C}from"../js/render-feed.decorator.e95904f1.js";import"../js/core/util.0e2fc110.js";const x=/#\/.+\/favorite$/;let q=class{constructor(s){const t=s.get(m);s.whenConnected((()=>{e({page:t,links:s.get(l).select("a",{all:!0,deep:!0})}).tillOff(s).to((({page:[e],links:[s]})=>{for(const r of s){const s=r.element,o=e.get(k),a=o.author||o.favorited;let i;i=x.test(s.href)?{favorited:a}:{author:a};const n=t.with(k,i).pretend();if(n){const e=n.url.href;if(s.href!==e){const t=s.cloneNode(!0);t.href=e,s.replaceWith(t)}}}}))}))}};q=i([t(["user-feed-toggle",u],{feature:{needs:f}},p({active:"active"}),c())],q);let B=class{constructor(e){this.request={};const s=e.get(m);e.whenConnected((()=>{s.read().tillOff(e).to((e=>{this.request=e.get(k)}))}))}};i([C({requestParam:k})],B.prototype,"request",void 0),B=i([t(["user-feed",u])],B);let E=class{constructor(e){this._context=e,this.profile=g;e.get(j).get(b).to((e=>this.profile=e))}render(){const{document:e}=this._context.get(a);return()=>{var s;const{profile:t}=this;null===(s=e.getElementById("user:image"))||void 0===s||s.setAttribute("src",t.username&&t.image||"");const r=e.getElementById("user:username");r&&(r.innerText=t.username||"");const o=e.getElementById("user:bio");o&&(o.innerText=t.username&&t.bio||"")}}};i([r()],E.prototype,"profile",void 0),i([o()],E.prototype,"render",null),E=i([t(["user-info",u],{feature:{needs:v}})],E);let I=class{constructor(e){this._response=s();const t=e.get(_),r=e.get(m),o=e.get(j),a=y(this._response.read().keepThru_((e=>e&&e.ok?e.body:g)));o.provide({a:b,is:a}),e.whenConnected((()=>{r.read().thru_((e=>{const s=e.get(k);return s.author||s.favorited})).tillOff(e).consume((e=>{if(e){if(!this.response||!this.response.ok||this.response.body.username!==e)return t.userProfile(e).to((e=>this.response=e))}else this.response={ok:!1,errors:n()}}))}))}get response(){return this._response.it}set response(e){this._response.it=e}};i([d()],I.prototype,"response",null),I=i([t(["profile",u],{feature:{needs:[B,q,E,w]}})],I),h.load(I);//# sourceMappingURL=main.304595a9.js.map
