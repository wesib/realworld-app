import{e,t as s}from"../js/lib/fun-events.5ba1262f.js";import{C as t,p as r,R as o,B as n}from"../js/wesib/wesib.698f6f57.js";import{_ as a}from"../js/helpers.920c7f83.js";import{n as i}from"../js/core/api.75ae058d.js";import{a as f,A as c,d as p,h as l,N as u,e as m,b as d}from"../js/wesib/generic.0655e5c8.js";import{C as h}from"../js/core.f6946162.js";import{a as j}from"../js/core/loader.5d4e024f.js";import{c as g}from"../js/core/main.b23f36d7.js";import{n as b,C as v,F as y,c as _}from"../js/follow-author.component.5b394cf5.js";import{U as w,a as k}from"../js/core/users.0a0b1cfc.js";import{P as O}from"../js/article-meta-components-support.feature.f2f8f3bd.js";import{R as q}from"../js/render-feed.decorator.748daa5d.js";const x=/#\/.+\/favorite$/;let B=class{constructor(s){const t=s.get(u);s.whenOn(r=>{e({page:t,links:s.get(m).select("a",{all:!0,deep:!0})}).tillOff(r)(({page:[e],links:[s]})=>{s.forEach(s=>{const r=s.element,o=e.get(O),n=o.author||o.favorited;let a;a=x.test(r.href)?{favorited:n}:{author:n};const i=t.with(O,a).pretend();if(i){const e=i.url.href;if(r.href!==e){const s=r.cloneNode(!0);s.href=e,r.replaceWith(s)}}})})})}};B=a([t(["user-feed-toggle",h],{feature:{needs:[p,l]}},c({active:"active"}),f())],B);let E=class{constructor(e){this.request={};const s=e.get(u);e.whenOn(e=>{s.read.tillOff(e)(e=>{this.request=e.get(O)})})}};a([q({requestParam:O})],E.prototype,"request",void 0),E=a([t(["user-feed",h])],E);let C=class{constructor(e){this._context=e,this.profile=b,e.get(d).get(v)(e=>this.profile=e)}render(){const{document:e}=this._context.get(n);return()=>{var s;const{profile:t}=this;null===(s=e.getElementById("user:image"))||void 0===s||s.setAttribute("src",t.username&&t.image||"");const r=e.getElementById("user:username");r&&(r.innerText=t.username||"");const o=e.getElementById("user:bio");o&&(o.innerText=t.username&&t.bio||"")}}};a([r()],C.prototype,"profile",void 0),a([o()],C.prototype,"render",null),C=a([t(["user-info",h],{feature:{needs:y}})],C);let I=class{constructor(e){this._response=s();const t=e.get(w),r=e.get(u),o=e.get(d),n=_(this._response.read.keep.thru_(e=>e&&e.ok?e.body:b));o.provide({a:v,is:n}),e.whenOn(e=>{r.read.thru_(e=>{const s=e.get(O);return s.author||s.favorited}).tillOff(e).consume(e=>{if(e){if(!this.response||!this.response.ok||this.response.body.username!==e)return t.userProfile(e)(e=>this.response=e)}else this.response={ok:!1,errors:i()}})})}get response(){return this._response.it}set response(e){this._response.it=e}};a([j()],I.prototype,"response",null),I=a([t(["profile",h],{feature:{needs:[E,B,C,k]}})],I),g.load(I);//# sourceMappingURL=main.24b9db5b.js.map
