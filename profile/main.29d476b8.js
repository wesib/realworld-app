import{g as e,d as s}from"../js/proc7ts/fun-events.c2220af5.js";import{C as t,S as r,R as o,B as n}from"../js/wesib/wesib.e7f21d38.js";import{_ as a}from"../js/helpers.e1623395.js";import{n as i}from"../js/core/api.ac725a89.js";import{e as c,A as f,g as p,N as u,b as l,a as m}from"../js/wesib/generic.178f9189.js";import{C as d}from"../js/core.714cbb7b.js";import{a as h}from"../js/core/loader.ce41151b.js";import{P as g}from"../js/article-buttons-support.feature.4fec7fb2.js";import{R as j}from"../js/render-feed.decorator.7edc67a0.js";import{c as b}from"../js/core/main.9f1f08af.js";import{n as v,C as y,F as _,c as w}from"../js/follow-author-btn.component.14c0e493.js";import{U as k,a as C}from"../js/core/users.4c7a7b8e.js";const q=/#\/.+\/favorite$/;let x=(()=>{let s=class{constructor(s){const t=s.get(u);s.whenConnected(()=>{e({page:t,links:s.get(l).select("a",{all:!0,deep:!0})}).tillOff(s).to(({page:[e],links:[s]})=>{for(const r of s){const s=r.element,o=e.get(g),n=o.author||o.favorited;let a;a=q.test(s.href)?{favorited:n}:{author:n};const i=t.with(g,a).pretend();if(i){const e=i.url.href;if(s.href!==e){const t=s.cloneNode(!0);t.href=e,s.replaceWith(t)}}}})})}};return s=a([t(["user-feed-toggle",d],{feature:{needs:p}},f({active:"active"}),c())],s),s})(),B=(()=>{let e=class{constructor(e){this.request={};const s=e.get(u);e.whenConnected(()=>{s.read().tillOff(e).to(e=>{this.request=e.get(g)})})}};return a([j({requestParam:g})],e.prototype,"request",void 0),e=a([t(["user-feed",d])],e),e})(),E=(()=>{let e=class{constructor(e){this._context=e,this.profile=v;e.get(m).get(y).to(e=>this.profile=e)}render(){const{document:e}=this._context.get(n);return()=>{var s;const{profile:t}=this;null===(s=e.getElementById("user:image"))||void 0===s||s.setAttribute("src",t.username&&t.image||"");const r=e.getElementById("user:username");r&&(r.innerText=t.username||"");const o=e.getElementById("user:bio");o&&(o.innerText=t.username&&t.bio||"")}}};return a([r()],e.prototype,"profile",void 0),a([o()],e.prototype,"render",null),e=a([t(["user-info",d],{feature:{needs:_}})],e),e})(),I=(()=>{let e=class{constructor(e){this._response=s();const t=e.get(k),r=e.get(u),o=e.get(m),n=w(this._response.read().keepThru_(e=>e&&e.ok?e.body:v));o.provide({a:y,is:n}),e.whenConnected(()=>{r.read().thru_(e=>{const s=e.get(g);return s.author||s.favorited}).tillOff(e).consume(e=>{if(e){if(!this.response||!this.response.ok||this.response.body.username!==e)return t.userProfile(e).to(e=>this.response=e)}else this.response={ok:!1,errors:i()}})})}get response(){return this._response.it}set response(e){this._response.it=e}};return a([h()],e.prototype,"response",null),e=a([t(["profile",d],{feature:{needs:[B,x,E,C]}})],e),e})();b.load(I);//# sourceMappingURL=main.29d476b8.js.map
