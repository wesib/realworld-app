import{e,t}from"../js/lib/fun-events.a21352be.js";import{c as s}from"../js/lib/namespace-aliaser.535f16ce.js";import{C as r,o,R as n,B as i,c as a}from"../js/wesib/wesib.c03111fd.js";import{_ as c}from"../js/helpers.920c7f83.js";import{a as l,A as p,d as f,g as u,N as m,e as d,b as h}from"../js/wesib/generic.7ab3ed7c.js";import{C as g}from"../js/core.f6946162.js";import{c as j}from"../js/core/main.cf584391.js";import{A as b}from"../js/core/input.5459c5de.js";import{n as v,C as _,F as y,c as x}from"../js/follow-author.component.8982ae76.js";import{U as w,a as k}from"../js/core/users.3d1e5e9b.js";import{P as O}from"../js/article-meta-components-support.feature.b7569be2.js";import{R as C}from"../js/render-feed.decorator.aba95757.js";const E=/#\/.+\/favorite$/;let q=class{constructor(t){const s=t.get(m);t.whenOn(r=>{e({page:s,links:t.get(d).select("a",{all:!0,deep:!0})}).tillOff(r)(({page:[e],links:[t]})=>{t.forEach(t=>{const r=t.element,o=e.get(O),n=o.author||o.favorited;let i;i=E.test(r.href)?{favorited:n}:{author:n};const a=s.with(O,i).pretend();if(a){const e=a.url.href;if(r.href!==e){const t=r.cloneNode(!0);t.href=e,r.replaceWith(t)}}})})})}};q=c([r(["user-feed-toggle",g],{feature:{needs:[f,u]}},p({active:"active"}),l())],q);let B=class{constructor(e){this.request={};const t=e.get(m);e.whenOn(e=>{t.read.tillOff(e)(e=>{this.request=e.get(O)})})}};c([C({requestParam:O})],B.prototype,"request",void 0),B=c([r(["user-feed",g])],B);let A=class{constructor(e){this._context=e,this.profile=v,e.get(h).get(_)(e=>this.profile=e)}render(){const{document:e}=this._context.get(i);return()=>{var t;const{profile:s}=this;null===(t=e.getElementById("user:image"))||void 0===t||t.setAttribute("src",s.username&&s.image||"");const r=e.getElementById("user:username");r&&(r.innerText=s.username||"");const o=e.getElementById("user:bio");o&&(o.innerText=s.username&&s.bio||"")}}};c([o()],A.prototype,"profile",void 0),c([n()],A.prototype,"render",null),A=c([r(["user-info",g],{feature:{needs:y}})],A);let I=class{constructor(e){this._context=e,this._response=t();const s=e.get(w),r=e.get(m),o=e.get(h),n=x(this._response.read.keep.thru_(e=>e&&e.ok?e.body:v));o.provide({a:_,is:n}),e.whenOn(e=>{r.read.thru_(e=>{const t=e.get(O);return t.author||t.favorited}).tillOff(e).consume(e=>{if(e){if(!this.response||!this.response.ok||this.response.body.username!==e)return s.userProfile(e)(e=>this.response=e)}else this._response.it=void 0})})}get response(){return this._response.it}set response(e){this._response.it=e}render(){const e=s.name(["visible",g],this._context.get(a)),t=this._context.get(b),{element:r,contentRoot:o}=this._context,{document:n}=this._context.get(i);let c;return()=>{const{response:e}=this;e?e.ok?(l(),p(!0)):function({errors:e}){l(),p(!1),c=t(e),c&&o.appendChild(c)}(e):(p(!1),c||(c=o.appendChild(n.createElement("conduit-loader"))))};function l(){c&&(c.remove(),c=void 0)}function p(t){t?r.classList.add(e):r.classList.remove(e)}}};c([o()],I.prototype,"response",null),c([n()],I.prototype,"render",null),I=c([r(["profile",g],{feature:{needs:[B,q,A,k]}})],I),j.load(I);//# sourceMappingURL=main.98b92f57.js.map
