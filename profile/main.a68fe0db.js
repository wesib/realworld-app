import{e,t}from"../js/lib/fun-events.a21352be.js";import{c as s}from"../js/lib/namespace-aliaser.535f16ce.js";import{C as o,o as r,R as n,B as i,c as a}from"../js/wesib/wesib.c03111fd.js";import{_ as c}from"../js/helpers.920c7f83.js";import{a as l,A as p,d as m,g as f,N as d,e as u,b as h}from"../js/wesib/generic.7ab3ed7c.js";import{C as g}from"../js/common.74dd5bad.js";import{c as j}from"../js/common/main.83398623.js";import{A as v}from"../js/common/input.0c0819f3.js";import{n as b,C as _,F as y,c as x}from"../js/follow-author.component.749d5572.js";import{U as w,a as k}from"../js/common/users.9af65e5d.js";import{P as O}from"../js/article-meta-components-support.feature.20003085.js";import{R as C}from"../js/render-feed.decorator.da23c86b.js";const E=/#\/.+\/favorite$/;let q=class{constructor(t){const s=t.get(d);t.whenOn(o=>{e({page:s,links:t.get(u).select("a",{all:!0,deep:!0})}).tillOff(o)(({page:[e],links:[t]})=>{t.forEach(t=>{const o=t.element,r=e.get(O),n=r.author||r.favorited;let i;i=E.test(o.href)?{favorited:n}:{author:n};const a=s.with(O,i).pretend();if(a){const e=a.url.href;if(o.href!==e){const t=o.cloneNode(!0);t.href=e,o.replaceWith(t)}}})})})}};q=c([o(["user-feed-toggle",g],{feature:{needs:[m,f]}},p({active:"active"}),l())],q);let B=class{constructor(e){this.request={};const t=e.get(d);e.whenOn(e=>{t.read.tillOff(e)(e=>{this.request=e.get(O)})})}};c([C({requestParam:O})],B.prototype,"request",void 0),B=c([o(["user-feed",g])],B);let A=class{constructor(e){this._context=e,this.profile=b,e.get(h).get(_)(e=>this.profile=e)}render(){const{document:e}=this._context.get(i);return()=>{var t;const{profile:s}=this;null===(t=e.getElementById("user:image"))||void 0===t||t.setAttribute("src",s.username&&s.image||"");const o=e.getElementById("user:username");o&&(o.innerText=s.username||"");const r=e.getElementById("user:bio");r&&(r.innerText=s.username&&s.bio||"")}}};c([r()],A.prototype,"profile",void 0),c([n()],A.prototype,"render",null),A=c([o(["user-info",g],{feature:{needs:y}})],A);let I=class{constructor(e){this._context=e,this._response=t();const s=e.get(w),o=e.get(d),r=e.get(h),n=x(this._response.read.keep.thru_(e=>e&&e.ok?e.body:b));r.provide({a:_,is:n}),e.whenOn(e=>{o.read.thru_(e=>{const t=e.get(O);return t.author||t.favorited}).tillOff(e).consume(e=>{if(e){if(!this.response||!this.response.ok||this.response.body.username!==e)return s.userProfile(e)(e=>this.response=e)}else this._response.it=void 0})})}get response(){return this._response.it}set response(e){this._response.it=e}render(){const e=s.name(["visible",g],this._context.get(a)),t=this._context.get(v),{element:o,contentRoot:r}=this._context,{document:n}=this._context.get(i);let c;return()=>{const{response:e}=this;e?e.ok?(l(),p(!0)):function({errors:e}){l(),p(!1),c=t(e),c&&r.appendChild(c)}(e):(p(!1),c||(c=r.appendChild(n.createElement("conduit-loader"))))};function l(){c&&(c.remove(),c=void 0)}function p(t){t?o.classList.add(e):o.classList.remove(e)}}};c([r()],I.prototype,"response",null),c([n()],I.prototype,"render",null),I=c([o(["profile",g],{feature:{needs:[B,q,A,k]}})],I),j.load(I);//# sourceMappingURL=main.a68fe0db.js.map
