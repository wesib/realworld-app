import{c as e}from"../js/core/main.0c31cba3.js";import{_ as s}from"../js/helpers.e1623395.js";import{i as t,s as r,t as o,m as a,a as i,H as n,F as c}from"../js/proc7ts/fun-events.8f536596.js";import{g as p,A as m,m as j,N as f,C as d,h as l}from"../js/wesib/generic.e05bd5a6.js";import{C as u,S as h,R as b,B as g}from"../js/wesib/wesib.289eabae.js";import{C as v}from"../js/core.10059585.js";import{n as y}from"../js/core/api.48f5edea.js";import"../js/frontmeans/input-aspects.e72f213f.js";import{a as w}from"../js/core/loader.6a8fc6bd.js";import{U as k,a as C}from"../js/core/users.220a355a.js";import{n as _,C as x,F as q,c as B}from"../js/follow-author-btn.component.04ab1c60.js";import{P as E}from"../js/article-buttons-support.feature.4c75d087.js";import{R as I}from"../js/render-feed.decorator.ce8ac001.js";import"../js/core/auth.98c2c25d.js";import"../js/proc7ts/context-values.cc32b8c5.js";import"../js/proc7ts/primitives.38e5298b.js";import"../js/proc7ts/push-iterator.039597c5.js";import"../js/proc7ts/call-thru.f4f68410.js";import"../js/proc7ts/supply.9762ee6d.js";import"../js/frontmeans/dom-events.bc847677.js";import"../js/core/layout.53939d89.js";import"../js/frontmeans/namespace-aliaser.9467f14d.js";import"../js/hatsy/http-header-value.851567fb.js";import"../js/proc7ts/workbench.31425b55.js";import"../js/frontmeans/render-scheduler.6f331202.js";import"../js/frontmeans/httongue.6b868a5b.js";import"../js/proc7ts/delta-set.d5d9e832.js";import"../js/core/feed.6cf2400c.js";import"../js/current-article.e2211b9a.js";import"../js/core/articles.bc0dc78d.js";import"../js/lib/dompurify.f5eadf9f.js";import"../js/lib/marked.9d494571.js";import"../js/core/util.946913f9.js";const P=/#\/.+\/favorite$/;let A=class{constructor(e){const s=e.get(f);e.whenConnected((()=>{t({page:s,links:e.get(d).select("a",{all:!0,deep:!0})}).do(r(e))((({page:[e],links:[t]})=>{for(const r of t){const t=r.element,o=e.get(E),a=o.author||o.favorited;let i;i=P.test(t.href)?{favorited:a}:{author:a};const n=s.with(E,i).pretend();if(n){const e=n.url.href;if(t.href!==e){const s=t.cloneNode(!0);s.href=e,t.replaceWith(s)}}}}))}))}};A=s([u(["user-feed-toggle",v],{feature:{needs:j}},m({active:"active"}),p())],A);let F=class{constructor(e){this.request={};const s=e.get(f);e.whenConnected((()=>{s.read.do(r(e))((e=>{this.request=e.get(E)}))}))}};s([I({requestParam:E})],F.prototype,"request",void 0),F=s([u(["user-feed",v])],F);let N=class{constructor(e){this._context=e,this.profile=_;e.get(l).get(x)((e=>this.profile=e))}render(){const{document:e}=this._context.get(g);return()=>{var s;const{profile:t}=this;null===(s=e.getElementById("user:image"))||void 0===s||s.setAttribute("src",t.username&&t.image||"");const r=e.getElementById("user:username");r&&(r.innerText=t.username||"");const o=e.getElementById("user:bio");o&&(o.innerText=t.username&&t.bio||"")}}};s([h()],N.prototype,"profile",void 0),s([b()],N.prototype,"render",null),N=s([u(["user-info",v],{feature:{needs:q}})],N);let R=class{constructor(e){this._response=o();const s=e.get(k),t=e.get(f),r=e.get(l),p=B(this._response.read.do(a((e=>e&&e.ok?e.body:_))));r.provide({a:x,is:p.read}),e.whenConnected((()=>{t.read.do(i((e=>{const s=e.get(E);return s.author||s.favorited})),n(e),c((e=>{if(e){if(!this.response||!this.response.ok||this.response.body.username!==e)return s.userProfile(e)((e=>this.response=e))}else this.response={ok:!1,errors:y()}})))}))}get response(){return this._response.it}set response(e){this._response.it=e}};s([w()],R.prototype,"response",null),R=s([u(["profile",v],{feature:{needs:[F,A,N,C]}})],R),e.load(R);//# sourceMappingURL=main.e80b714d.js.map
